Version 3.2 HI-TECH Software Intermediate Code
"78 ff.h
[s S1 `uc 1 `uc 1 `uc 1 `uc 1 `uc 1 `uc 1 `us 1 `us 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `uc -> 512 `i ]
[n S1 . fs_type drv csize n_fats wflag fsi_flag id n_rootdir last_clust free_clust cdir n_fatent fsize volbase fatbase dirbase database winsect win ]
"746 ff.c
[c E67 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 .. ]
[n E67 . FR_OK FR_DISK_ERR FR_INT_ERR FR_NOT_READY FR_NO_FILE FR_NO_PATH FR_INVALID_NAME FR_DENIED FR_EXIST FR_INVALID_OBJECT FR_WRITE_PROTECTED FR_INVALID_DRIVE FR_NOT_ENABLED FR_NO_FILESYSTEM FR_MKFS_ABORTED FR_TIMEOUT FR_LOCKED FR_NOT_ENOUGH_CORE FR_TOO_MANY_OPEN_FILES FR_INVALID_PARAMETER  ]
"754
[c E198 0 1 2 3 4 .. ]
[n E198 . RES_OK RES_ERROR RES_WRPRT RES_NOTRDY RES_PARERR  ]
"35 diskio.h
[v _disk_write `(E198 ~T0 @X0 0 ef4`uc`*Cuc`ul`ui ]
"34
[v _disk_read `(E198 ~T0 @X0 0 ef4`uc`*uc`ul`ui ]
"36
[v _disk_ioctl `(E198 ~T0 @X0 0 ef3`uc`uc`*v ]
"114 ff.h
[s S2 `*S1 1 `us 1 `uc 1 `uc 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `ul 1 `*uc 1 `*ul 1 ]
[n S2 . fs id flag err fptr fsize sclust clust dsect dir_sect dir_ptr cltbl ]
"143
[s S3 `*S1 1 `us 1 `us 1 `ul 1 `ul 1 `ul 1 `*uc 1 `*uc 1 `*Cuc 1 ]
[n S3 . fs id index sclust clust sect dir fn pat ]
"168
[s S4 `ul 1 `us 1 `us 1 `uc 1 `uc -> 13 `i ]
[n S4 . fsize fdate ftime fattrib fname ]
"33 diskio.h
[v _disk_status `(uc ~T0 @X0 0 ef1`uc ]
"32
[v _disk_initialize `(uc ~T0 @X0 0 ef1`uc ]
[v F108 `(ui ~T0 @X0 0 tf2`*Cuc`ui ]
"4553 ff.c
[s S744 `*S2 1 `i 1 `i 1 `uc -> 64 `i ]
[n S744 . fp idx nchr buf ]
"10 C:\Program Files (x86)\Microchip\xc8\v1.33\include\stdarg.h
[v ___va_start `(*v ~T0 @X0 0 ef ]
[p i ___va_start ]
"13
[v ___va_arg `(*v ~T0 @X0 0 ev`*v ]
[p i ___va_arg ]
[; ;integer.h: 16: typedef int INT;
[; ;integer.h: 17: typedef unsigned int UINT;
[; ;integer.h: 20: typedef char CHAR;
[; ;integer.h: 21: typedef unsigned char UCHAR;
[; ;integer.h: 22: typedef unsigned char BYTE;
[; ;integer.h: 25: typedef short SHORT;
[; ;integer.h: 26: typedef unsigned short USHORT;
[; ;integer.h: 27: typedef unsigned short WORD;
[; ;integer.h: 28: typedef unsigned short WCHAR;
[; ;integer.h: 31: typedef long LONG;
[; ;integer.h: 32: typedef unsigned long ULONG;
[; ;integer.h: 33: typedef unsigned long DWORD;
[; ;ff.h: 67: typedef char TCHAR;
[; ;ff.h: 78: typedef struct {
[; ;ff.h: 79: BYTE fs_type;
[; ;ff.h: 80: BYTE drv;
[; ;ff.h: 81: BYTE csize;
[; ;ff.h: 82: BYTE n_fats;
[; ;ff.h: 83: BYTE wflag;
[; ;ff.h: 84: BYTE fsi_flag;
[; ;ff.h: 85: WORD id;
[; ;ff.h: 86: WORD n_rootdir;
[; ;ff.h: 94: DWORD last_clust;
[; ;ff.h: 95: DWORD free_clust;
[; ;ff.h: 98: DWORD cdir;
[; ;ff.h: 100: DWORD n_fatent;
[; ;ff.h: 101: DWORD fsize;
[; ;ff.h: 102: DWORD volbase;
[; ;ff.h: 103: DWORD fatbase;
[; ;ff.h: 104: DWORD dirbase;
[; ;ff.h: 105: DWORD database;
[; ;ff.h: 106: DWORD winsect;
[; ;ff.h: 107: BYTE win[512];
[; ;ff.h: 108: } FATFS;
[; ;ff.h: 114: typedef struct {
[; ;ff.h: 115: FATFS* fs;
[; ;ff.h: 116: WORD id;
[; ;ff.h: 117: BYTE flag;
[; ;ff.h: 118: BYTE err;
[; ;ff.h: 119: DWORD fptr;
[; ;ff.h: 120: DWORD fsize;
[; ;ff.h: 121: DWORD sclust;
[; ;ff.h: 122: DWORD clust;
[; ;ff.h: 123: DWORD dsect;
[; ;ff.h: 125: DWORD dir_sect;
[; ;ff.h: 126: BYTE* dir_ptr;
[; ;ff.h: 129: DWORD* cltbl;
[; ;ff.h: 137: } FIL;
[; ;ff.h: 143: typedef struct {
[; ;ff.h: 144: FATFS* fs;
[; ;ff.h: 145: WORD id;
[; ;ff.h: 146: WORD index;
[; ;ff.h: 147: DWORD sclust;
[; ;ff.h: 148: DWORD clust;
[; ;ff.h: 149: DWORD sect;
[; ;ff.h: 150: BYTE* dir;
[; ;ff.h: 151: BYTE* fn;
[; ;ff.h: 160: const TCHAR* pat;
[; ;ff.h: 162: } DIR;
[; ;ff.h: 168: typedef struct {
[; ;ff.h: 169: DWORD fsize;
[; ;ff.h: 170: WORD fdate;
[; ;ff.h: 171: WORD ftime;
[; ;ff.h: 172: BYTE fattrib;
[; ;ff.h: 173: TCHAR fname[13];
[; ;ff.h: 178: } FILINFO;
[; ;ff.h: 184: typedef enum {
[; ;ff.h: 185: FR_OK = 0,
[; ;ff.h: 186: FR_DISK_ERR,
[; ;ff.h: 187: FR_INT_ERR,
[; ;ff.h: 188: FR_NOT_READY,
[; ;ff.h: 189: FR_NO_FILE,
[; ;ff.h: 190: FR_NO_PATH,
[; ;ff.h: 191: FR_INVALID_NAME,
[; ;ff.h: 192: FR_DENIED,
[; ;ff.h: 193: FR_EXIST,
[; ;ff.h: 194: FR_INVALID_OBJECT,
[; ;ff.h: 195: FR_WRITE_PROTECTED,
[; ;ff.h: 196: FR_INVALID_DRIVE,
[; ;ff.h: 197: FR_NOT_ENABLED,
[; ;ff.h: 198: FR_NO_FILESYSTEM,
[; ;ff.h: 199: FR_MKFS_ABORTED,
[; ;ff.h: 200: FR_TIMEOUT,
[; ;ff.h: 201: FR_LOCKED,
[; ;ff.h: 202: FR_NOT_ENOUGH_CORE,
[; ;ff.h: 203: FR_TOO_MANY_OPEN_FILES,
[; ;ff.h: 204: FR_INVALID_PARAMETER
[; ;ff.h: 205: } FRESULT;
[; ;ff.h: 212: FRESULT f_open (FIL* fp, const TCHAR* path, BYTE mode);
[; ;ff.h: 213: FRESULT f_close (FIL* fp);
[; ;ff.h: 214: FRESULT f_read (FIL* fp, void* buff, UINT btr, UINT* br);
[; ;ff.h: 215: FRESULT f_write (FIL* fp, const void* buff, UINT btw, UINT* bw);
[; ;ff.h: 216: FRESULT f_forward (FIL* fp, UINT(*func)(const BYTE*,UINT), UINT btf, UINT* bf);
[; ;ff.h: 217: FRESULT f_lseek (FIL* fp, DWORD ofs);
[; ;ff.h: 218: FRESULT f_truncate (FIL* fp);
[; ;ff.h: 219: FRESULT f_sync (FIL* fp);
[; ;ff.h: 220: FRESULT f_opendir (DIR* dp, const TCHAR* path);
[; ;ff.h: 221: FRESULT f_closedir (DIR* dp);
[; ;ff.h: 222: FRESULT f_readdir (DIR* dp, FILINFO* fno);
[; ;ff.h: 223: FRESULT f_findfirst (DIR* dp, FILINFO* fno, const TCHAR* path, const TCHAR* pattern);
[; ;ff.h: 224: FRESULT f_findnext (DIR* dp, FILINFO* fno);
[; ;ff.h: 225: FRESULT f_mkdir (const TCHAR* path);
[; ;ff.h: 226: FRESULT f_unlink (const TCHAR* path);
[; ;ff.h: 227: FRESULT f_rename (const TCHAR* path_old, const TCHAR* path_new);
[; ;ff.h: 228: FRESULT f_stat (const TCHAR* path, FILINFO* fno);
[; ;ff.h: 229: FRESULT f_chmod (const TCHAR* path, BYTE attr, BYTE mask);
[; ;ff.h: 230: FRESULT f_utime (const TCHAR* path, const FILINFO* fno);
[; ;ff.h: 231: FRESULT f_chdir (const TCHAR* path);
[; ;ff.h: 232: FRESULT f_chdrive (const TCHAR* path);
[; ;ff.h: 233: FRESULT f_getcwd (TCHAR* buff, UINT len);
[; ;ff.h: 234: FRESULT f_getfree (const TCHAR* path, DWORD* nclst, FATFS** fatfs);
[; ;ff.h: 235: FRESULT f_getlabel (const TCHAR* path, TCHAR* label, DWORD* vsn);
[; ;ff.h: 236: FRESULT f_setlabel (const TCHAR* label);
[; ;ff.h: 237: FRESULT f_mount (FATFS* fs, const TCHAR* path, BYTE opt);
[; ;ff.h: 238: FRESULT f_mkfs (const TCHAR* path, BYTE sfd, UINT au);
[; ;ff.h: 239: FRESULT f_fdisk (BYTE pdrv, const DWORD szt[], void* work);
[; ;ff.h: 240: int f_putc (TCHAR c, FIL* fp);
[; ;ff.h: 241: int f_puts (const TCHAR* str, FIL* cp);
[; ;ff.h: 242: int f_printf (FIL* fp, const TCHAR* str, ...);
[; ;ff.h: 243: TCHAR* f_gets (TCHAR* buff, int len, FIL* fp);
[; ;ff.h: 264: DWORD get_fattime (void);
[; ;diskio.h: 16: typedef BYTE DSTATUS;
[; ;diskio.h: 19: typedef enum {
[; ;diskio.h: 20: RES_OK = 0,
[; ;diskio.h: 21: RES_ERROR,
[; ;diskio.h: 22: RES_WRPRT,
[; ;diskio.h: 23: RES_NOTRDY,
[; ;diskio.h: 24: RES_PARERR
[; ;diskio.h: 25: } DRESULT;
[; ;diskio.h: 32: DSTATUS disk_initialize (BYTE pdrv);
[; ;diskio.h: 33: DSTATUS disk_status (BYTE pdrv);
[; ;diskio.h: 34: DRESULT disk_read (BYTE pdrv, BYTE* buff, DWORD sector, UINT count);
[; ;diskio.h: 35: DRESULT disk_write (BYTE pdrv, const BYTE* buff, DWORD sector, UINT count);
[; ;diskio.h: 36: DRESULT disk_ioctl (BYTE pdrv, BYTE cmd, void* buff);
"448 ff.c
[v _FatFs `*S1 ~T0 @X0 -> 5 `i s ]
[; ;ff.c: 448: static FATFS *FatFs[5];
"449
[v _Fsid `us ~T0 @X0 1 s ]
[; ;ff.c: 449: static WORD Fsid;
"452
[v _CurrVol `uc ~T0 @X0 1 s ]
[; ;ff.c: 452: static BYTE CurrVol;
"550
[v _mem_cpy `(v ~T0 @X0 1 sf3`*v`*Cv`ui ]
{
[; ;ff.c: 549: static
[; ;ff.c: 550: void mem_cpy (void* dst, const void* src, UINT cnt) {
[e :U _mem_cpy ]
[v _dst `*v ~T0 @X0 1 r1 ]
[v _src `*Cv ~T0 @X0 1 r2 ]
[v _cnt `ui ~T0 @X0 1 r3 ]
[f ]
"551
[v _d `*uc ~T0 @X0 1 a ]
[; ;ff.c: 551: BYTE *d = (BYTE*)dst;
[e = _d -> _dst `*uc ]
"552
[v _s `*Cuc ~T0 @X0 1 a ]
[; ;ff.c: 552: const BYTE *s = (const BYTE*)src;
[e = _s -> _src `*Cuc ]
[; ;ff.c: 561: while (cnt--)
"561
[e $U 6  ]
[e :U 7 ]
[; ;ff.c: 562: *d++ = *s++;
"562
[e = *U ++ _d * -> -> 1 `i `x -> -> # *U _d `i `x *U ++ _s * -> -> 1 `i `x -> -> # *U _s `i `x ]
[e :U 6 ]
"561
[e $ != -- _cnt -> -> 1 `i `ui -> -> 0 `i `ui 7  ]
[e :U 8 ]
[; ;ff.c: 563: }
"563
[e :UE 5 ]
}
"567
[v _mem_set `(v ~T0 @X0 1 sf3`*v`i`ui ]
{
[; ;ff.c: 566: static
[; ;ff.c: 567: void mem_set (void* dst, int val, UINT cnt) {
[e :U _mem_set ]
[v _dst `*v ~T0 @X0 1 r1 ]
[v _val `i ~T0 @X0 1 r2 ]
[v _cnt `ui ~T0 @X0 1 r3 ]
[f ]
"568
[v _d `*uc ~T0 @X0 1 a ]
[; ;ff.c: 568: BYTE *d = (BYTE*)dst;
[e = _d -> _dst `*uc ]
[; ;ff.c: 570: while (cnt--)
"570
[e $U 10  ]
[e :U 11 ]
[; ;ff.c: 571: *d++ = (BYTE)val;
"571
[e = *U ++ _d * -> -> 1 `i `x -> -> # *U _d `i `x -> _val `uc ]
[e :U 10 ]
"570
[e $ != -- _cnt -> -> 1 `i `ui -> -> 0 `i `ui 11  ]
[e :U 12 ]
[; ;ff.c: 572: }
"572
[e :UE 9 ]
}
"576
[v _mem_cmp `(i ~T0 @X0 1 sf3`*Cv`*Cv`ui ]
{
[; ;ff.c: 575: static
[; ;ff.c: 576: int mem_cmp (const void* dst, const void* src, UINT cnt) {
[e :U _mem_cmp ]
[v _dst `*Cv ~T0 @X0 1 r1 ]
[v _src `*Cv ~T0 @X0 1 r2 ]
[v _cnt `ui ~T0 @X0 1 r3 ]
[f ]
"577
[v _d `*Cuc ~T0 @X0 1 a ]
[; ;ff.c: 577: const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
[e = _d -> _dst `*Cuc ]
[v _s `*Cuc ~T0 @X0 1 a ]
[e = _s -> _src `*Cuc ]
"578
[v _r `i ~T0 @X0 1 a ]
[; ;ff.c: 578: int r = 0;
[e = _r -> 0 `i ]
[; ;ff.c: 580: while (cnt-- && (r = *d++ - *s++) == 0) ;
"580
[e $U 14  ]
[e :U 15 ]
[e :U 14 ]
[e $ && != -- _cnt -> -> 1 `i `ui -> -> 0 `i `ui == = _r - -> *U ++ _d * -> -> 1 `i `x -> -> # *U _d `i `x `i -> *U ++ _s * -> -> 1 `i `x -> -> # *U _s `i `x `i -> 0 `i 15  ]
[e :U 16 ]
[; ;ff.c: 581: return r;
"581
[e ) _r ]
[e $UE 13  ]
[; ;ff.c: 582: }
"582
[e :UE 13 ]
}
"586
[v _chk_chr `(i ~T0 @X0 1 sf2`*Cuc`i ]
{
[; ;ff.c: 585: static
[; ;ff.c: 586: int chk_chr (const char* str, int chr) {
[e :U _chk_chr ]
[v _str `*Cuc ~T0 @X0 1 r1 ]
[v _chr `i ~T0 @X0 1 r2 ]
[f ]
[; ;ff.c: 587: while (*str && *str != chr) str++;
"587
[e $U 18  ]
[e :U 19 ]
[e ++ _str * -> -> 1 `i `x -> -> # *U _str `i `x ]
[e :U 18 ]
[e $ && != -> *U _str `i -> -> -> 0 `i `Cuc `i != -> *U _str `i _chr 19  ]
[e :U 20 ]
[; ;ff.c: 588: return *str;
"588
[e ) -> *U _str `i ]
[e $UE 17  ]
[; ;ff.c: 589: }
"589
[e :UE 17 ]
}
"743
[v _sync_window `(E67 ~T0 @X0 1 sf1`*S1 ]
"746
{
[; ;ff.c: 742: static
[; ;ff.c: 743: FRESULT sync_window (
[; ;ff.c: 744: FATFS* fs
[; ;ff.c: 745: )
[; ;ff.c: 746: {
[e :U _sync_window ]
"744
[v _fs `*S1 ~T0 @X0 1 r1 ]
"746
[f ]
"747
[v _wsect `ul ~T0 @X0 1 a ]
"748
[v _nf `ui ~T0 @X0 1 a ]
"749
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 747: DWORD wsect;
[; ;ff.c: 748: UINT nf;
[; ;ff.c: 749: FRESULT res = FR_OK;
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 752: if (fs->wflag) {
"752
[e $ ! != -> . *U _fs 4 `i -> -> -> 0 `i `uc `i 22  ]
{
[; ;ff.c: 753: wsect = fs->winsect;
"753
[e = _wsect . *U _fs 17 ]
[; ;ff.c: 754: if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
"754
[e $ ! != -> ( _disk_write (4 , , , . *U _fs 1 -> &U . *U _fs 18 `*Cuc _wsect -> -> 1 `i `ui `i -> . `E198 0 `i 23  ]
{
[; ;ff.c: 755: res = FR_DISK_ERR;
"755
[e = _res -> . `E67 1 `E67 ]
"756
}
[; ;ff.c: 756: } else {
[e $U 24  ]
[e :U 23 ]
{
[; ;ff.c: 757: fs->wflag = 0;
"757
[e = . *U _fs 4 -> -> 0 `i `uc ]
[; ;ff.c: 758: if (wsect - fs->fatbase < fs->fsize) {
"758
[e $ ! < - _wsect . *U _fs 14 . *U _fs 12 25  ]
{
[; ;ff.c: 759: for (nf = fs->n_fats; nf >= 2; nf--) {
"759
{
[e = _nf -> . *U _fs 3 `ui ]
[e $ >= _nf -> -> 2 `i `ui 26  ]
[e $U 27  ]
[e :U 26 ]
{
[; ;ff.c: 760: wsect += fs->fsize;
"760
[e =+ _wsect . *U _fs 12 ]
[; ;ff.c: 761: disk_write(fs->drv, fs->win, wsect, 1);
"761
[e ( _disk_write (4 , , , . *U _fs 1 -> &U . *U _fs 18 `*Cuc _wsect -> -> 1 `i `ui ]
"762
}
"759
[e -- _nf -> -> 1 `i `ui ]
[e $ >= _nf -> -> 2 `i `ui 26  ]
[e :U 27 ]
"762
}
"763
}
[e :U 25 ]
"764
}
[e :U 24 ]
"765
}
[e :U 22 ]
[; ;ff.c: 762: }
[; ;ff.c: 763: }
[; ;ff.c: 764: }
[; ;ff.c: 765: }
[; ;ff.c: 766: return res;
"766
[e ) _res ]
[e $UE 21  ]
[; ;ff.c: 767: }
"767
[e :UE 21 ]
}
"772
[v _move_window `(E67 ~T0 @X0 1 sf2`*S1`ul ]
"776
{
[; ;ff.c: 771: static
[; ;ff.c: 772: FRESULT move_window (
[; ;ff.c: 773: FATFS* fs,
[; ;ff.c: 774: DWORD sector
[; ;ff.c: 775: )
[; ;ff.c: 776: {
[e :U _move_window ]
"773
[v _fs `*S1 ~T0 @X0 1 r1 ]
"774
[v _sector `ul ~T0 @X0 1 r2 ]
"776
[f ]
"777
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 777: FRESULT res = FR_OK;
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 780: if (sector != fs->winsect) {
"780
[e $ ! != _sector . *U _fs 17 30  ]
{
[; ;ff.c: 782: res = sync_window(fs);
"782
[e = _res ( _sync_window (1 _fs ]
[; ;ff.c: 784: if (res == FR_OK) {
"784
[e $ ! == -> _res `i -> . `E67 0 `i 31  ]
{
[; ;ff.c: 785: if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
"785
[e $ ! != -> ( _disk_read (4 , , , . *U _fs 1 &U . *U _fs 18 _sector -> -> 1 `i `ui `i -> . `E198 0 `i 32  ]
{
[; ;ff.c: 786: sector = 0xFFFFFFFF;
"786
[e = _sector -> -1 `ul ]
[; ;ff.c: 787: res = FR_DISK_ERR;
"787
[e = _res -> . `E67 1 `E67 ]
"788
}
[e :U 32 ]
[; ;ff.c: 788: }
[; ;ff.c: 789: fs->winsect = sector;
"789
[e = . *U _fs 17 _sector ]
"790
}
[e :U 31 ]
"791
}
[e :U 30 ]
[; ;ff.c: 790: }
[; ;ff.c: 791: }
[; ;ff.c: 792: return res;
"792
[e ) _res ]
[e $UE 29  ]
[; ;ff.c: 793: }
"793
[e :UE 29 ]
}
"803
[v _sync_fs `(E67 ~T0 @X0 1 sf1`*S1 ]
"806
{
[; ;ff.c: 802: static
[; ;ff.c: 803: FRESULT sync_fs (
[; ;ff.c: 804: FATFS* fs
[; ;ff.c: 805: )
[; ;ff.c: 806: {
[e :U _sync_fs ]
"804
[v _fs `*S1 ~T0 @X0 1 r1 ]
"806
[f ]
"807
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 807: FRESULT res;
[; ;ff.c: 810: res = sync_window(fs);
"810
[e = _res ( _sync_window (1 _fs ]
[; ;ff.c: 811: if (res == FR_OK) {
"811
[e $ ! == -> _res `i -> . `E67 0 `i 34  ]
{
[; ;ff.c: 813: if (fs->fs_type == 3 && fs->fsi_flag == 1) {
"813
[e $ ! && == -> . *U _fs 0 `i -> 3 `i == -> . *U _fs 5 `i -> 1 `i 35  ]
{
[; ;ff.c: 815: mem_set(fs->win, 0, ((UINT)512));
"815
[e ( _mem_set (3 , , -> &U . *U _fs 18 `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 816: *(BYTE*)(fs->win + 510)=(BYTE)(0xAA55); *((BYTE*)(fs->win + 510)+1)=(BYTE)((WORD)(0xAA55)>>8);
"816
[e = *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x -> -> 43605 `ui `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> -> 43605 `ui `us `ui -> 8 `i `uc ]
[; ;ff.c: 817: *(BYTE*)(fs->win + 0)=(BYTE)(0x41615252); *((BYTE*)(fs->win + 0)+1)=(BYTE)((WORD)(0x41615252)>>8); *((BYTE*)(fs->win + 0)+2)=(BYTE)((DWORD)(0x41615252)>>16); *((BYTE*)(fs->win + 0)+3)=(BYTE)((DWORD)(0x41615252)>>24);
"817
[e = *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x -> -> 1096897106 `l `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> -> 1096897106 `l `us `ui -> 8 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> 1096897106 `l `ul -> 16 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> 1096897106 `l `ul -> 24 `i `uc ]
[; ;ff.c: 818: *(BYTE*)(fs->win + 484)=(BYTE)(0x61417272); *((BYTE*)(fs->win + 484)+1)=(BYTE)((WORD)(0x61417272)>>8); *((BYTE*)(fs->win + 484)+2)=(BYTE)((DWORD)(0x61417272)>>16); *((BYTE*)(fs->win + 484)+3)=(BYTE)((DWORD)(0x61417272)>>24);
"818
[e = *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x -> -> 1631679090 `l `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> -> 1631679090 `l `us `ui -> 8 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> 1631679090 `l `ul -> 16 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> 1631679090 `l `ul -> 24 `i `uc ]
[; ;ff.c: 819: *(BYTE*)(fs->win + 488)=(BYTE)(fs->free_clust); *((BYTE*)(fs->win + 488)+1)=(BYTE)((WORD)(fs->free_clust)>>8); *((BYTE*)(fs->win + 488)+2)=(BYTE)((DWORD)(fs->free_clust)>>16); *((BYTE*)(fs->win + 488)+3)=(BYTE)((DWORD)(fs->free_clust)>>24);
"819
[e = *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x -> . *U _fs 9 `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> . *U _fs 9 `us `ui -> 8 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> . *U _fs 9 -> 16 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> . *U _fs 9 -> 24 `i `uc ]
[; ;ff.c: 820: *(BYTE*)(fs->win + 492)=(BYTE)(fs->last_clust); *((BYTE*)(fs->win + 492)+1)=(BYTE)((WORD)(fs->last_clust)>>8); *((BYTE*)(fs->win + 492)+2)=(BYTE)((DWORD)(fs->last_clust)>>16); *((BYTE*)(fs->win + 492)+3)=(BYTE)((DWORD)(fs->last_clust)>>24);
"820
[e = *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x -> . *U _fs 8 `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> . *U _fs 8 `us `ui -> 8 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> . *U _fs 8 -> 16 `i `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> . *U _fs 8 -> 24 `i `uc ]
[; ;ff.c: 822: fs->winsect = fs->volbase + 1;
"822
[e = . *U _fs 17 + . *U _fs 13 -> -> -> 1 `i `l `ul ]
[; ;ff.c: 823: disk_write(fs->drv, fs->win, fs->winsect, 1);
"823
[e ( _disk_write (4 , , , . *U _fs 1 -> &U . *U _fs 18 `*Cuc . *U _fs 17 -> -> 1 `i `ui ]
[; ;ff.c: 824: fs->fsi_flag = 0;
"824
[e = . *U _fs 5 -> -> 0 `i `uc ]
"825
}
[e :U 35 ]
[; ;ff.c: 825: }
[; ;ff.c: 827: if (disk_ioctl(fs->drv, 0, 0) != RES_OK)
"827
[e $ ! != -> ( _disk_ioctl (3 , , . *U _fs 1 -> -> 0 `i `uc -> -> 0 `i `*v `i -> . `E198 0 `i 36  ]
[; ;ff.c: 828: res = FR_DISK_ERR;
"828
[e = _res -> . `E67 1 `E67 ]
[e :U 36 ]
"829
}
[e :U 34 ]
[; ;ff.c: 829: }
[; ;ff.c: 831: return res;
"831
[e ) _res ]
[e $UE 33  ]
[; ;ff.c: 832: }
"832
[e :UE 33 ]
}
"843
[v _clust2sect `(ul ~T0 @X0 1 ef2`*S1`ul ]
"847
{
[; ;ff.c: 843: DWORD clust2sect (
[; ;ff.c: 844: FATFS* fs,
[; ;ff.c: 845: DWORD clst
[; ;ff.c: 846: )
[; ;ff.c: 847: {
[e :U _clust2sect ]
"844
[v _fs `*S1 ~T0 @X0 1 r1 ]
"845
[v _clst `ul ~T0 @X0 1 r2 ]
"847
[f ]
[; ;ff.c: 848: clst -= 2;
"848
[e =- _clst -> -> -> 2 `i `l `ul ]
[; ;ff.c: 849: if (clst >= fs->n_fatent - 2) return 0;
"849
[e $ ! >= _clst - . *U _fs 11 -> -> -> 2 `i `l `ul 38  ]
[e ) -> -> -> 0 `i `l `ul ]
[e $UE 37  ]
[e :U 38 ]
[; ;ff.c: 850: return clst * fs->csize + fs->database;
"850
[e ) + * _clst -> . *U _fs 2 `ul . *U _fs 16 ]
[e $UE 37  ]
[; ;ff.c: 851: }
"851
[e :UE 37 ]
}
"861
[v _get_fat `(ul ~T0 @X0 1 ef2`*S1`ul ]
"865
{
[; ;ff.c: 861: DWORD get_fat (
[; ;ff.c: 862: FATFS* fs,
[; ;ff.c: 863: DWORD clst
[; ;ff.c: 864: )
[; ;ff.c: 865: {
[e :U _get_fat ]
"862
[v _fs `*S1 ~T0 @X0 1 r1 ]
"863
[v _clst `ul ~T0 @X0 1 r2 ]
"865
[f ]
"866
[v _wc `ui ~T0 @X0 1 a ]
[v _bc `ui ~T0 @X0 1 a ]
"867
[v _p `*uc ~T0 @X0 1 a ]
"868
[v _val `ul ~T0 @X0 1 a ]
[; ;ff.c: 866: UINT wc, bc;
[; ;ff.c: 867: BYTE *p;
[; ;ff.c: 868: DWORD val;
[; ;ff.c: 871: if (clst < 2 || clst >= fs->n_fatent) {
"871
[e $ ! || < _clst -> -> -> 2 `i `l `ul >= _clst . *U _fs 11 40  ]
{
[; ;ff.c: 872: val = 1;
"872
[e = _val -> -> -> 1 `i `l `ul ]
"874
}
[; ;ff.c: 874: } else {
[e $U 41  ]
[e :U 40 ]
{
[; ;ff.c: 875: val = 0xFFFFFFFF;
"875
[e = _val -> -1 `ul ]
[; ;ff.c: 877: switch (fs->fs_type) {
"877
[e $U 43  ]
{
[; ;ff.c: 878: case 1 :
"878
[e :U 44 ]
[; ;ff.c: 879: bc = (UINT)clst; bc += bc / 2;
"879
[e = _bc -> _clst `ui ]
[e =+ _bc / _bc -> -> 2 `i `ui ]
[; ;ff.c: 880: if (move_window(fs, fs->fatbase + (bc / ((UINT)512))) != FR_OK) break;
"880
[e $ ! != -> ( _move_window (2 , _fs + . *U _fs 14 -> / _bc -> -> 512 `i `ui `ul `i -> . `E67 0 `i 45  ]
[e $U 42  ]
[e :U 45 ]
[; ;ff.c: 881: wc = fs->win[bc++ % ((UINT)512)];
"881
[e = _wc -> *U + &U . *U _fs 18 * -> % ++ _bc -> -> 1 `i `ui -> -> 512 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `ui ]
[; ;ff.c: 882: if (move_window(fs, fs->fatbase + (bc / ((UINT)512))) != FR_OK) break;
"882
[e $ ! != -> ( _move_window (2 , _fs + . *U _fs 14 -> / _bc -> -> 512 `i `ui `ul `i -> . `E67 0 `i 46  ]
[e $U 42  ]
[e :U 46 ]
[; ;ff.c: 883: wc |= fs->win[bc % ((UINT)512)] << 8;
"883
[e =| _wc -> << -> *U + &U . *U _fs 18 * -> % _bc -> -> 512 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i -> 8 `i `ui ]
[; ;ff.c: 884: val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
"884
[e = _val -> ? != & _clst -> -> -> 1 `i `l `ul -> -> 0 `i `ul : >> _wc -> 4 `i & _wc -> -> 4095 `i `ui `ul ]
[; ;ff.c: 885: break;
"885
[e $U 42  ]
[; ;ff.c: 887: case 2 :
"887
[e :U 47 ]
[; ;ff.c: 888: if (move_window(fs, fs->fatbase + (clst / (((UINT)512) / 2))) != FR_OK) break;
"888
[e $ ! != -> ( _move_window (2 , _fs + . *U _fs 14 / _clst -> / -> -> 512 `i `ui -> -> 2 `i `ui `ul `i -> . `E67 0 `i 48  ]
[e $U 42  ]
[e :U 48 ]
[; ;ff.c: 889: p = &fs->win[clst * 2 % ((UINT)512)];
"889
[e = _p &U *U + &U . *U _fs 18 * -> % * _clst -> -> -> 2 `i `l `ul -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 890: val = (WORD)(((WORD)*((BYTE*)(p)+1)<<8)|(WORD)*(BYTE*)(p));
"890
[e = _val -> -> | << -> -> *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x `us `ui -> 8 `i -> -> *U _p `us `ui `us `ul ]
[; ;ff.c: 891: break;
"891
[e $U 42  ]
[; ;ff.c: 893: case 3 :
"893
[e :U 49 ]
[; ;ff.c: 894: if (move_window(fs, fs->fatbase + (clst / (((UINT)512) / 4))) != FR_OK) break;
"894
[e $ ! != -> ( _move_window (2 , _fs + . *U _fs 14 / _clst -> / -> -> 512 `i `ui -> -> 4 `i `ui `ul `i -> . `E67 0 `i 50  ]
[e $U 42  ]
[e :U 50 ]
[; ;ff.c: 895: p = &fs->win[clst * 4 % ((UINT)512)];
"895
[e = _p &U *U + &U . *U _fs 18 * -> % * _clst -> -> -> 4 `i `l `ul -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 896: val = (DWORD)(((DWORD)*((BYTE*)(p)+3)<<24)|((DWORD)*((BYTE*)(p)+2)<<16)|((WORD)*((BYTE*)(p)+1)<<8)|*(BYTE*)(p)) & 0x0FFFFFFF;
"896
[e = _val & | | | << -> *U + _p * -> -> 3 `i `x -> -> # *U _p `i `x `ul -> 24 `i << -> *U + _p * -> -> 2 `i `x -> -> # *U _p `i `x `ul -> 16 `i -> << -> -> *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x `us `ui -> 8 `i `ul -> *U _p `ul -> -> 268435455 `l `ul ]
[; ;ff.c: 897: break;
"897
[e $U 42  ]
[; ;ff.c: 899: default:
"899
[e :U 51 ]
[; ;ff.c: 900: val = 1;
"900
[e = _val -> -> -> 1 `i `l `ul ]
"901
}
[; ;ff.c: 901: }
[e $U 42  ]
"877
[e :U 43 ]
[e [\ . *U _fs 0 , $ -> -> 1 `i `uc 44
 , $ -> -> 2 `i `uc 47
 , $ -> -> 3 `i `uc 49
 51 ]
"901
[e :U 42 ]
"902
}
[e :U 41 ]
[; ;ff.c: 902: }
[; ;ff.c: 904: return val;
"904
[e ) _val ]
[e $UE 39  ]
[; ;ff.c: 905: }
"905
[e :UE 39 ]
}
"916
[v _put_fat `(E67 ~T0 @X0 1 ef3`*S1`ul`ul ]
"921
{
[; ;ff.c: 916: FRESULT put_fat (
[; ;ff.c: 917: FATFS* fs,
[; ;ff.c: 918: DWORD clst,
[; ;ff.c: 919: DWORD val
[; ;ff.c: 920: )
[; ;ff.c: 921: {
[e :U _put_fat ]
"917
[v _fs `*S1 ~T0 @X0 1 r1 ]
"918
[v _clst `ul ~T0 @X0 1 r2 ]
"919
[v _val `ul ~T0 @X0 1 r3 ]
"921
[f ]
"922
[v _bc `ui ~T0 @X0 1 a ]
"923
[v _p `*uc ~T0 @X0 1 a ]
"924
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 922: UINT bc;
[; ;ff.c: 923: BYTE *p;
[; ;ff.c: 924: FRESULT res;
[; ;ff.c: 927: if (clst < 2 || clst >= fs->n_fatent) {
"927
[e $ ! || < _clst -> -> -> 2 `i `l `ul >= _clst . *U _fs 11 53  ]
{
[; ;ff.c: 928: res = FR_INT_ERR;
"928
[e = _res -> . `E67 2 `E67 ]
"930
}
[; ;ff.c: 930: } else {
[e $U 54  ]
[e :U 53 ]
{
[; ;ff.c: 931: switch (fs->fs_type) {
"931
[e $U 56  ]
{
[; ;ff.c: 932: case 1 :
"932
[e :U 57 ]
[; ;ff.c: 933: bc = (UINT)clst; bc += bc / 2;
"933
[e = _bc -> _clst `ui ]
[e =+ _bc / _bc -> -> 2 `i `ui ]
[; ;ff.c: 934: res = move_window(fs, fs->fatbase + (bc / ((UINT)512)));
"934
[e = _res ( _move_window (2 , _fs + . *U _fs 14 -> / _bc -> -> 512 `i `ui `ul ]
[; ;ff.c: 935: if (res != FR_OK) break;
"935
[e $ ! != -> _res `i -> . `E67 0 `i 58  ]
[e $U 55  ]
[e :U 58 ]
[; ;ff.c: 936: p = &fs->win[bc++ % ((UINT)512)];
"936
[e = _p &U *U + &U . *U _fs 18 * -> % ++ _bc -> -> 1 `i `ui -> -> 512 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 937: *p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
"937
[e = *U _p -> ? != & _clst -> -> -> 1 `i `l `ul -> -> 0 `i `ul : | & -> *U _p `i -> 15 `i << -> -> _val `uc `i -> 4 `i -> -> _val `uc `i `uc ]
[; ;ff.c: 938: fs->wflag = 1;
"938
[e = . *U _fs 4 -> -> 1 `i `uc ]
[; ;ff.c: 939: res = move_window(fs, fs->fatbase + (bc / ((UINT)512)));
"939
[e = _res ( _move_window (2 , _fs + . *U _fs 14 -> / _bc -> -> 512 `i `ui `ul ]
[; ;ff.c: 940: if (res != FR_OK) break;
"940
[e $ ! != -> _res `i -> . `E67 0 `i 59  ]
[e $U 55  ]
[e :U 59 ]
[; ;ff.c: 941: p = &fs->win[bc % ((UINT)512)];
"941
[e = _p &U *U + &U . *U _fs 18 * -> % _bc -> -> 512 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 942: *p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
"942
[e = *U _p -> ? != & _clst -> -> -> 1 `i `l `ul -> -> 0 `i `ul : -> -> >> _val -> 4 `i `uc `i | & -> *U _p `i -> 240 `i & -> -> >> _val -> 8 `i `uc `i -> 15 `i `uc ]
[; ;ff.c: 943: fs->wflag = 1;
"943
[e = . *U _fs 4 -> -> 1 `i `uc ]
[; ;ff.c: 944: break;
"944
[e $U 55  ]
[; ;ff.c: 946: case 2 :
"946
[e :U 60 ]
[; ;ff.c: 947: res = move_window(fs, fs->fatbase + (clst / (((UINT)512) / 2)));
"947
[e = _res ( _move_window (2 , _fs + . *U _fs 14 / _clst -> / -> -> 512 `i `ui -> -> 2 `i `ui `ul ]
[; ;ff.c: 948: if (res != FR_OK) break;
"948
[e $ ! != -> _res `i -> . `E67 0 `i 61  ]
[e $U 55  ]
[e :U 61 ]
[; ;ff.c: 949: p = &fs->win[clst * 2 % ((UINT)512)];
"949
[e = _p &U *U + &U . *U _fs 18 * -> % * _clst -> -> -> 2 `i `l `ul -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 950: *(BYTE*)(p)=(BYTE)((WORD)val); *((BYTE*)(p)+1)=(BYTE)((WORD)((WORD)val)>>8);
"950
[e = *U _p -> -> _val `us `uc ]
[e = *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x -> >> -> -> _val `us `ui -> 8 `i `uc ]
[; ;ff.c: 951: fs->wflag = 1;
"951
[e = . *U _fs 4 -> -> 1 `i `uc ]
[; ;ff.c: 952: break;
"952
[e $U 55  ]
[; ;ff.c: 954: case 3 :
"954
[e :U 62 ]
[; ;ff.c: 955: res = move_window(fs, fs->fatbase + (clst / (((UINT)512) / 4)));
"955
[e = _res ( _move_window (2 , _fs + . *U _fs 14 / _clst -> / -> -> 512 `i `ui -> -> 4 `i `ui `ul ]
[; ;ff.c: 956: if (res != FR_OK) break;
"956
[e $ ! != -> _res `i -> . `E67 0 `i 63  ]
[e $U 55  ]
[e :U 63 ]
[; ;ff.c: 957: p = &fs->win[clst * 4 % ((UINT)512)];
"957
[e = _p &U *U + &U . *U _fs 18 * -> % * _clst -> -> -> 4 `i `l `ul -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 958: val |= (DWORD)(((DWORD)*((BYTE*)(p)+3)<<24)|((DWORD)*((BYTE*)(p)+2)<<16)|((WORD)*((BYTE*)(p)+1)<<8)|*(BYTE*)(p)) & 0xF0000000;
"958
[e =| _val & | | | << -> *U + _p * -> -> 3 `i `x -> -> # *U _p `i `x `ul -> 24 `i << -> *U + _p * -> -> 2 `i `x -> -> # *U _p `i `x `ul -> 16 `i -> << -> -> *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x `us `ui -> 8 `i `ul -> *U _p `ul -> -268435456 `ul ]
[; ;ff.c: 959: *(BYTE*)(p)=(BYTE)(val); *((BYTE*)(p)+1)=(BYTE)((WORD)(val)>>8); *((BYTE*)(p)+2)=(BYTE)((DWORD)(val)>>16); *((BYTE*)(p)+3)=(BYTE)((DWORD)(val)>>24);
"959
[e = *U _p -> _val `uc ]
[e = *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x -> >> -> -> _val `us `ui -> 8 `i `uc ]
[e = *U + _p * -> -> 2 `i `x -> -> # *U _p `i `x -> >> _val -> 16 `i `uc ]
[e = *U + _p * -> -> 3 `i `x -> -> # *U _p `i `x -> >> _val -> 24 `i `uc ]
[; ;ff.c: 960: fs->wflag = 1;
"960
[e = . *U _fs 4 -> -> 1 `i `uc ]
[; ;ff.c: 961: break;
"961
[e $U 55  ]
[; ;ff.c: 963: default :
"963
[e :U 64 ]
[; ;ff.c: 964: res = FR_INT_ERR;
"964
[e = _res -> . `E67 2 `E67 ]
"965
}
[; ;ff.c: 965: }
[e $U 55  ]
"931
[e :U 56 ]
[e [\ . *U _fs 0 , $ -> -> 1 `i `uc 57
 , $ -> -> 2 `i `uc 60
 , $ -> -> 3 `i `uc 62
 64 ]
"965
[e :U 55 ]
"966
}
[e :U 54 ]
[; ;ff.c: 966: }
[; ;ff.c: 968: return res;
"968
[e ) _res ]
[e $UE 52  ]
[; ;ff.c: 969: }
"969
[e :UE 52 ]
}
"980
[v _remove_chain `(E67 ~T0 @X0 1 sf2`*S1`ul ]
"984
{
[; ;ff.c: 979: static
[; ;ff.c: 980: FRESULT remove_chain (
[; ;ff.c: 981: FATFS* fs,
[; ;ff.c: 982: DWORD clst
[; ;ff.c: 983: )
[; ;ff.c: 984: {
[e :U _remove_chain ]
"981
[v _fs `*S1 ~T0 @X0 1 r1 ]
"982
[v _clst `ul ~T0 @X0 1 r2 ]
"984
[f ]
"985
[v _res `E67 ~T0 @X0 1 a ]
"986
[v _nxt `ul ~T0 @X0 1 a ]
"988
[v _scl `ul ~T0 @X0 1 a ]
[; ;ff.c: 985: FRESULT res;
[; ;ff.c: 986: DWORD nxt;
[; ;ff.c: 988: DWORD scl = clst, ecl = clst, rt[2];
[e = _scl _clst ]
[v _ecl `ul ~T0 @X0 1 a ]
[e = _ecl _clst ]
[v _rt `ul ~T0 @X0 -> 2 `i a ]
[; ;ff.c: 991: if (clst < 2 || clst >= fs->n_fatent) {
"991
[e $ ! || < _clst -> -> -> 2 `i `l `ul >= _clst . *U _fs 11 66  ]
{
[; ;ff.c: 992: res = FR_INT_ERR;
"992
[e = _res -> . `E67 2 `E67 ]
"994
}
[; ;ff.c: 994: } else {
[e $U 67  ]
[e :U 66 ]
{
[; ;ff.c: 995: res = FR_OK;
"995
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 996: while (clst < fs->n_fatent) {
"996
[e $U 68  ]
[e :U 69 ]
{
[; ;ff.c: 997: nxt = get_fat(fs, clst);
"997
[e = _nxt ( _get_fat (2 , _fs _clst ]
[; ;ff.c: 998: if (nxt == 0) break;
"998
[e $ ! == _nxt -> -> -> 0 `i `l `ul 71  ]
[e $U 70  ]
[e :U 71 ]
[; ;ff.c: 999: if (nxt == 1) { res = FR_INT_ERR; break; }
"999
[e $ ! == _nxt -> -> -> 1 `i `l `ul 72  ]
{
[e = _res -> . `E67 2 `E67 ]
[e $U 70  ]
}
[e :U 72 ]
[; ;ff.c: 1000: if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
"1000
[e $ ! == _nxt -> -1 `ul 73  ]
{
[e = _res -> . `E67 1 `E67 ]
[e $U 70  ]
}
[e :U 73 ]
[; ;ff.c: 1001: res = put_fat(fs, clst, 0);
"1001
[e = _res ( _put_fat (3 , , _fs _clst -> -> -> 0 `i `l `ul ]
[; ;ff.c: 1002: if (res != FR_OK) break;
"1002
[e $ ! != -> _res `i -> . `E67 0 `i 74  ]
[e $U 70  ]
[e :U 74 ]
[; ;ff.c: 1003: if (fs->free_clust != 0xFFFFFFFF) {
"1003
[e $ ! != . *U _fs 9 -> -1 `ul 75  ]
{
[; ;ff.c: 1004: fs->free_clust++;
"1004
[e ++ . *U _fs 9 -> -> -> 1 `i `l `ul ]
[; ;ff.c: 1005: fs->fsi_flag |= 1;
"1005
[e =| . *U _fs 5 -> -> 1 `i `uc ]
"1006
}
[e :U 75 ]
[; ;ff.c: 1006: }
[; ;ff.c: 1008: if (ecl + 1 == nxt) {
"1008
[e $ ! == + _ecl -> -> -> 1 `i `l `ul _nxt 76  ]
{
[; ;ff.c: 1009: ecl = nxt;
"1009
[e = _ecl _nxt ]
"1010
}
[; ;ff.c: 1010: } else {
[e $U 77  ]
[e :U 76 ]
{
[; ;ff.c: 1011: rt[0] = clust2sect(fs, scl);
"1011
[e = *U + &U _rt * -> -> -> 0 `i `ui `ux -> -> # *U &U _rt `ui `ux ( _clust2sect (2 , _fs _scl ]
[; ;ff.c: 1012: rt[1] = clust2sect(fs, ecl) + fs->csize - 1;
"1012
[e = *U + &U _rt * -> -> -> 1 `i `ui `ux -> -> # *U &U _rt `ui `ux - + ( _clust2sect (2 , _fs _ecl -> . *U _fs 2 `ul -> -> -> 1 `i `l `ul ]
[; ;ff.c: 1013: disk_ioctl(fs->drv, 4, rt);
"1013
[e ( _disk_ioctl (3 , , . *U _fs 1 -> -> 4 `i `uc -> &U _rt `*v ]
[; ;ff.c: 1014: scl = ecl = nxt;
"1014
[e = _scl = _ecl _nxt ]
"1015
}
[e :U 77 ]
[; ;ff.c: 1015: }
[; ;ff.c: 1017: clst = nxt;
"1017
[e = _clst _nxt ]
"1018
}
[e :U 68 ]
"996
[e $ < _clst . *U _fs 11 69  ]
[e :U 70 ]
"1019
}
[e :U 67 ]
[; ;ff.c: 1018: }
[; ;ff.c: 1019: }
[; ;ff.c: 1021: return res;
"1021
[e ) _res ]
[e $UE 65  ]
[; ;ff.c: 1022: }
"1022
[e :UE 65 ]
}
"1033
[v _create_chain `(ul ~T0 @X0 1 sf2`*S1`ul ]
"1037
{
[; ;ff.c: 1032: static
[; ;ff.c: 1033: DWORD create_chain (
[; ;ff.c: 1034: FATFS* fs,
[; ;ff.c: 1035: DWORD clst
[; ;ff.c: 1036: )
[; ;ff.c: 1037: {
[e :U _create_chain ]
"1034
[v _fs `*S1 ~T0 @X0 1 r1 ]
"1035
[v _clst `ul ~T0 @X0 1 r2 ]
"1037
[f ]
"1038
[v _cs `ul ~T0 @X0 1 a ]
[v _ncl `ul ~T0 @X0 1 a ]
[v _scl `ul ~T0 @X0 1 a ]
"1039
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 1038: DWORD cs, ncl, scl;
[; ;ff.c: 1039: FRESULT res;
[; ;ff.c: 1042: if (clst == 0) {
"1042
[e $ ! == _clst -> -> -> 0 `i `l `ul 79  ]
{
[; ;ff.c: 1043: scl = fs->last_clust;
"1043
[e = _scl . *U _fs 8 ]
[; ;ff.c: 1044: if (!scl || scl >= fs->n_fatent) scl = 1;
"1044
[e $ ! || ! != _scl -> -> 0 `i `ul >= _scl . *U _fs 11 80  ]
[e = _scl -> -> -> 1 `i `l `ul ]
[e :U 80 ]
"1045
}
[; ;ff.c: 1045: }
[e $U 81  ]
"1046
[e :U 79 ]
[; ;ff.c: 1046: else {
{
[; ;ff.c: 1047: cs = get_fat(fs, clst);
"1047
[e = _cs ( _get_fat (2 , _fs _clst ]
[; ;ff.c: 1048: if (cs < 2) return 1;
"1048
[e $ ! < _cs -> -> -> 2 `i `l `ul 82  ]
[e ) -> -> -> 1 `i `l `ul ]
[e $UE 78  ]
[e :U 82 ]
[; ;ff.c: 1049: if (cs == 0xFFFFFFFF) return cs;
"1049
[e $ ! == _cs -> -1 `ul 83  ]
[e ) _cs ]
[e $UE 78  ]
[e :U 83 ]
[; ;ff.c: 1050: if (cs < fs->n_fatent) return cs;
"1050
[e $ ! < _cs . *U _fs 11 84  ]
[e ) _cs ]
[e $UE 78  ]
[e :U 84 ]
[; ;ff.c: 1051: scl = clst;
"1051
[e = _scl _clst ]
"1052
}
[e :U 81 ]
[; ;ff.c: 1052: }
[; ;ff.c: 1054: ncl = scl;
"1054
[e = _ncl _scl ]
[; ;ff.c: 1055: for (;;) {
"1055
{
[e :U 85 ]
{
[; ;ff.c: 1056: ncl++;
"1056
[e ++ _ncl -> -> -> 1 `i `l `ul ]
[; ;ff.c: 1057: if (ncl >= fs->n_fatent) {
"1057
[e $ ! >= _ncl . *U _fs 11 88  ]
{
[; ;ff.c: 1058: ncl = 2;
"1058
[e = _ncl -> -> -> 2 `i `l `ul ]
[; ;ff.c: 1059: if (ncl > scl) return 0;
"1059
[e $ ! > _ncl _scl 89  ]
[e ) -> -> -> 0 `i `l `ul ]
[e $UE 78  ]
[e :U 89 ]
"1060
}
[e :U 88 ]
[; ;ff.c: 1060: }
[; ;ff.c: 1061: cs = get_fat(fs, ncl);
"1061
[e = _cs ( _get_fat (2 , _fs _ncl ]
[; ;ff.c: 1062: if (cs == 0) break;
"1062
[e $ ! == _cs -> -> -> 0 `i `l `ul 90  ]
[e $U 86  ]
[e :U 90 ]
[; ;ff.c: 1063: if (cs == 0xFFFFFFFF || cs == 1)
"1063
[e $ ! || == _cs -> -1 `ul == _cs -> -> -> 1 `i `l `ul 91  ]
[; ;ff.c: 1064: return cs;
"1064
[e ) _cs ]
[e $UE 78  ]
[e :U 91 ]
[; ;ff.c: 1065: if (ncl == scl) return 0;
"1065
[e $ ! == _ncl _scl 92  ]
[e ) -> -> -> 0 `i `l `ul ]
[e $UE 78  ]
[e :U 92 ]
"1066
}
[; ;ff.c: 1066: }
[e $U 85  ]
[e :U 86 ]
}
[; ;ff.c: 1068: res = put_fat(fs, ncl, 0x0FFFFFFF);
"1068
[e = _res ( _put_fat (3 , , _fs _ncl -> -> 268435455 `l `ul ]
[; ;ff.c: 1069: if (res == FR_OK && clst != 0) {
"1069
[e $ ! && == -> _res `i -> . `E67 0 `i != _clst -> -> -> 0 `i `l `ul 93  ]
{
[; ;ff.c: 1070: res = put_fat(fs, clst, ncl);
"1070
[e = _res ( _put_fat (3 , , _fs _clst _ncl ]
"1071
}
[e :U 93 ]
[; ;ff.c: 1071: }
[; ;ff.c: 1072: if (res == FR_OK) {
"1072
[e $ ! == -> _res `i -> . `E67 0 `i 94  ]
{
[; ;ff.c: 1073: fs->last_clust = ncl;
"1073
[e = . *U _fs 8 _ncl ]
[; ;ff.c: 1074: if (fs->free_clust != 0xFFFFFFFF) {
"1074
[e $ ! != . *U _fs 9 -> -1 `ul 95  ]
{
[; ;ff.c: 1075: fs->free_clust--;
"1075
[e -- . *U _fs 9 -> -> -> 1 `i `l `ul ]
[; ;ff.c: 1076: fs->fsi_flag |= 1;
"1076
[e =| . *U _fs 5 -> -> 1 `i `uc ]
"1077
}
[e :U 95 ]
"1078
}
[; ;ff.c: 1077: }
[; ;ff.c: 1078: } else {
[e $U 96  ]
[e :U 94 ]
{
[; ;ff.c: 1079: ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
"1079
[e = _ncl ? == -> _res `i -> . `E67 1 `i : -> -1 `ul -> -> -> 1 `i `l `ul ]
"1080
}
[e :U 96 ]
[; ;ff.c: 1080: }
[; ;ff.c: 1082: return ncl;
"1082
[e ) _ncl ]
[e $UE 78  ]
[; ;ff.c: 1083: }
"1083
[e :UE 78 ]
}
"1095
[v _clmt_clust `(ul ~T0 @X0 1 sf2`*S2`ul ]
"1099
{
[; ;ff.c: 1094: static
[; ;ff.c: 1095: DWORD clmt_clust (
[; ;ff.c: 1096: FIL* fp,
[; ;ff.c: 1097: DWORD ofs
[; ;ff.c: 1098: )
[; ;ff.c: 1099: {
[e :U _clmt_clust ]
"1096
[v _fp `*S2 ~T0 @X0 1 r1 ]
"1097
[v _ofs `ul ~T0 @X0 1 r2 ]
"1099
[f ]
"1100
[v _cl `ul ~T0 @X0 1 a ]
[v _ncl `ul ~T0 @X0 1 a ]
[v _tbl `*ul ~T0 @X0 1 a ]
[; ;ff.c: 1100: DWORD cl, ncl, *tbl;
[; ;ff.c: 1103: tbl = fp->cltbl + 1;
"1103
[e = _tbl + . *U _fp 11 * -> -> 1 `i `x -> -> # *U . *U _fp 11 `i `x ]
[; ;ff.c: 1104: cl = ofs / ((UINT)512) / fp->fs->csize;
"1104
[e = _cl / / _ofs -> -> -> 512 `i `ui `ul -> . *U . *U _fp 0 2 `ul ]
[; ;ff.c: 1105: for (;;) {
"1105
{
[e :U 98 ]
{
[; ;ff.c: 1106: ncl = *tbl++;
"1106
[e = _ncl *U ++ _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x ]
[; ;ff.c: 1107: if (!ncl) return 0;
"1107
[e $ ! ! != _ncl -> -> 0 `i `ul 101  ]
[e ) -> -> -> 0 `i `l `ul ]
[e $UE 97  ]
[e :U 101 ]
[; ;ff.c: 1108: if (cl < ncl) break;
"1108
[e $ ! < _cl _ncl 102  ]
[e $U 99  ]
[e :U 102 ]
[; ;ff.c: 1109: cl -= ncl; tbl++;
"1109
[e =- _cl _ncl ]
[e ++ _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x ]
"1110
}
[; ;ff.c: 1110: }
[e $U 98  ]
[e :U 99 ]
}
[; ;ff.c: 1111: return cl + *tbl;
"1111
[e ) + _cl *U _tbl ]
[e $UE 97  ]
[; ;ff.c: 1112: }
"1112
[e :UE 97 ]
}
"1123
[v _dir_sdi `(E67 ~T0 @X0 1 sf2`*S3`ui ]
"1127
{
[; ;ff.c: 1122: static
[; ;ff.c: 1123: FRESULT dir_sdi (
[; ;ff.c: 1124: DIR* dp,
[; ;ff.c: 1125: UINT idx
[; ;ff.c: 1126: )
[; ;ff.c: 1127: {
[e :U _dir_sdi ]
"1124
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1125
[v _idx `ui ~T0 @X0 1 r2 ]
"1127
[f ]
"1128
[v _clst `ul ~T0 @X0 1 a ]
[v _sect `ul ~T0 @X0 1 a ]
"1129
[v _ic `ui ~T0 @X0 1 a ]
[; ;ff.c: 1128: DWORD clst, sect;
[; ;ff.c: 1129: UINT ic;
[; ;ff.c: 1132: dp->index = (WORD)idx;
"1132
[e = . *U _dp 2 -> _idx `us ]
[; ;ff.c: 1133: clst = dp->sclust;
"1133
[e = _clst . *U _dp 3 ]
[; ;ff.c: 1134: if (clst == 1 || clst >= dp->fs->n_fatent)
"1134
[e $ ! || == _clst -> -> -> 1 `i `l `ul >= _clst . *U . *U _dp 0 11 104  ]
[; ;ff.c: 1135: return FR_INT_ERR;
"1135
[e ) -> . `E67 2 `E67 ]
[e $UE 103  ]
[e :U 104 ]
[; ;ff.c: 1136: if (!clst && dp->fs->fs_type == 3)
"1136
[e $ ! && ! != _clst -> -> 0 `i `ul == -> . *U . *U _dp 0 0 `i -> 3 `i 105  ]
[; ;ff.c: 1137: clst = dp->fs->dirbase;
"1137
[e = _clst . *U . *U _dp 0 15 ]
[e :U 105 ]
[; ;ff.c: 1139: if (clst == 0) {
"1139
[e $ ! == _clst -> -> -> 0 `i `l `ul 106  ]
{
[; ;ff.c: 1140: if (idx >= dp->fs->n_rootdir)
"1140
[e $ ! >= _idx -> . *U . *U _dp 0 7 `ui 107  ]
[; ;ff.c: 1141: return FR_INT_ERR;
"1141
[e ) -> . `E67 2 `E67 ]
[e $UE 103  ]
[e :U 107 ]
[; ;ff.c: 1142: sect = dp->fs->dirbase;
"1142
[e = _sect . *U . *U _dp 0 15 ]
"1143
}
[; ;ff.c: 1143: }
[e $U 108  ]
"1144
[e :U 106 ]
[; ;ff.c: 1144: else {
{
[; ;ff.c: 1145: ic = ((UINT)512) / 32 * dp->fs->csize;
"1145
[e = _ic * / -> -> 512 `i `ui -> -> 32 `i `ui -> . *U . *U _dp 0 2 `ui ]
[; ;ff.c: 1146: while (idx >= ic) {
"1146
[e $U 109  ]
[e :U 110 ]
{
[; ;ff.c: 1147: clst = get_fat(dp->fs, clst);
"1147
[e = _clst ( _get_fat (2 , . *U _dp 0 _clst ]
[; ;ff.c: 1148: if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
"1148
[e $ ! == _clst -> -1 `ul 112  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 103  ]
[e :U 112 ]
[; ;ff.c: 1149: if (clst < 2 || clst >= dp->fs->n_fatent)
"1149
[e $ ! || < _clst -> -> -> 2 `i `l `ul >= _clst . *U . *U _dp 0 11 113  ]
[; ;ff.c: 1150: return FR_INT_ERR;
"1150
[e ) -> . `E67 2 `E67 ]
[e $UE 103  ]
[e :U 113 ]
[; ;ff.c: 1151: idx -= ic;
"1151
[e =- _idx _ic ]
"1152
}
[e :U 109 ]
"1146
[e $ >= _idx _ic 110  ]
[e :U 111 ]
[; ;ff.c: 1152: }
[; ;ff.c: 1153: sect = clust2sect(dp->fs, clst);
"1153
[e = _sect ( _clust2sect (2 , . *U _dp 0 _clst ]
"1154
}
[e :U 108 ]
[; ;ff.c: 1154: }
[; ;ff.c: 1155: dp->clust = clst;
"1155
[e = . *U _dp 4 _clst ]
[; ;ff.c: 1156: if (!sect) return FR_INT_ERR;
"1156
[e $ ! ! != _sect -> -> 0 `i `ul 114  ]
[e ) -> . `E67 2 `E67 ]
[e $UE 103  ]
[e :U 114 ]
[; ;ff.c: 1157: dp->sect = sect + idx / (((UINT)512) / 32);
"1157
[e = . *U _dp 5 + _sect -> / _idx / -> -> 512 `i `ui -> -> 32 `i `ui `ul ]
[; ;ff.c: 1158: dp->dir = dp->fs->win + (idx % (((UINT)512) / 32)) * 32;
"1158
[e = . *U _dp 6 + &U . *U . *U _dp 0 18 * -> * % _idx / -> -> 512 `i `ui -> -> 32 `i `ui -> -> 32 `i `ui `ux -> -> # *U &U . *U . *U _dp 0 18 `ui `ux ]
[; ;ff.c: 1160: return FR_OK;
"1160
[e ) -> . `E67 0 `E67 ]
[e $UE 103  ]
[; ;ff.c: 1161: }
"1161
[e :UE 103 ]
}
"1171
[v _dir_next `(E67 ~T0 @X0 1 sf2`*S3`i ]
"1175
{
[; ;ff.c: 1170: static
[; ;ff.c: 1171: FRESULT dir_next (
[; ;ff.c: 1172: DIR* dp,
[; ;ff.c: 1173: int stretch
[; ;ff.c: 1174: )
[; ;ff.c: 1175: {
[e :U _dir_next ]
"1172
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1173
[v _stretch `i ~T0 @X0 1 r2 ]
"1175
[f ]
"1176
[v _clst `ul ~T0 @X0 1 a ]
"1177
[v _i `ui ~T0 @X0 1 a ]
"1179
[v _c `ui ~T0 @X0 1 a ]
[; ;ff.c: 1176: DWORD clst;
[; ;ff.c: 1177: UINT i;
[; ;ff.c: 1179: UINT c;
[; ;ff.c: 1183: i = dp->index + 1;
"1183
[e = _i + -> . *U _dp 2 `ui -> -> 1 `i `ui ]
[; ;ff.c: 1184: if (!(i & 0xFFFF) || !dp->sect)
"1184
[e $ ! || ! != & _i -> 65535 `ui -> -> 0 `i `ui ! != . *U _dp 5 -> -> 0 `i `ul 116  ]
[; ;ff.c: 1185: return FR_NO_FILE;
"1185
[e ) -> . `E67 4 `E67 ]
[e $UE 115  ]
[e :U 116 ]
[; ;ff.c: 1187: if (!(i % (((UINT)512) / 32))) {
"1187
[e $ ! ! != % _i / -> -> 512 `i `ui -> -> 32 `i `ui -> -> 0 `i `ui 117  ]
{
[; ;ff.c: 1188: dp->sect++;
"1188
[e ++ . *U _dp 5 -> -> -> 1 `i `l `ul ]
[; ;ff.c: 1190: if (!dp->clust) {
"1190
[e $ ! ! != . *U _dp 4 -> -> 0 `i `ul 118  ]
{
[; ;ff.c: 1191: if (i >= dp->fs->n_rootdir)
"1191
[e $ ! >= _i -> . *U . *U _dp 0 7 `ui 119  ]
[; ;ff.c: 1192: return FR_NO_FILE;
"1192
[e ) -> . `E67 4 `E67 ]
[e $UE 115  ]
[e :U 119 ]
"1193
}
[; ;ff.c: 1193: }
[e $U 120  ]
"1194
[e :U 118 ]
[; ;ff.c: 1194: else {
{
[; ;ff.c: 1195: if (((i / (((UINT)512) / 32)) & (dp->fs->csize - 1)) == 0) {
"1195
[e $ ! == & / _i / -> -> 512 `i `ui -> -> 32 `i `ui -> - -> . *U . *U _dp 0 2 `i -> 1 `i `ui -> -> 0 `i `ui 121  ]
{
[; ;ff.c: 1196: clst = get_fat(dp->fs, dp->clust);
"1196
[e = _clst ( _get_fat (2 , . *U _dp 0 . *U _dp 4 ]
[; ;ff.c: 1197: if (clst <= 1) return FR_INT_ERR;
"1197
[e $ ! <= _clst -> -> -> 1 `i `l `ul 122  ]
[e ) -> . `E67 2 `E67 ]
[e $UE 115  ]
[e :U 122 ]
[; ;ff.c: 1198: if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
"1198
[e $ ! == _clst -> -1 `ul 123  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 115  ]
[e :U 123 ]
[; ;ff.c: 1199: if (clst >= dp->fs->n_fatent) {
"1199
[e $ ! >= _clst . *U . *U _dp 0 11 124  ]
{
[; ;ff.c: 1201: if (!stretch) return FR_NO_FILE;
"1201
[e $ ! ! != _stretch -> 0 `i 125  ]
[e ) -> . `E67 4 `E67 ]
[e $UE 115  ]
[e :U 125 ]
[; ;ff.c: 1202: clst = create_chain(dp->fs, dp->clust);
"1202
[e = _clst ( _create_chain (2 , . *U _dp 0 . *U _dp 4 ]
[; ;ff.c: 1203: if (clst == 0) return FR_DENIED;
"1203
[e $ ! == _clst -> -> -> 0 `i `l `ul 126  ]
[e ) -> . `E67 7 `E67 ]
[e $UE 115  ]
[e :U 126 ]
[; ;ff.c: 1204: if (clst == 1) return FR_INT_ERR;
"1204
[e $ ! == _clst -> -> -> 1 `i `l `ul 127  ]
[e ) -> . `E67 2 `E67 ]
[e $UE 115  ]
[e :U 127 ]
[; ;ff.c: 1205: if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
"1205
[e $ ! == _clst -> -1 `ul 128  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 115  ]
[e :U 128 ]
[; ;ff.c: 1207: if (sync_window(dp->fs)) return FR_DISK_ERR;
"1207
[e $ ! != -> ( _sync_window (1 . *U _dp 0 `i -> -> -> 0 `i `E67 `i 129  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 115  ]
[e :U 129 ]
[; ;ff.c: 1208: mem_set(dp->fs->win, 0, ((UINT)512));
"1208
[e ( _mem_set (3 , , -> &U . *U . *U _dp 0 18 `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 1209: dp->fs->winsect = clust2sect(dp->fs, clst);
"1209
[e = . *U . *U _dp 0 17 ( _clust2sect (2 , . *U _dp 0 _clst ]
[; ;ff.c: 1210: for (c = 0; c < dp->fs->csize; c++) {
"1210
{
[e = _c -> -> 0 `i `ui ]
[e $U 133  ]
[e :U 130 ]
{
[; ;ff.c: 1211: dp->fs->wflag = 1;
"1211
[e = . *U . *U _dp 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 1212: if (sync_window(dp->fs)) return FR_DISK_ERR;
"1212
[e $ ! != -> ( _sync_window (1 . *U _dp 0 `i -> -> -> 0 `i `E67 `i 134  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 115  ]
[e :U 134 ]
[; ;ff.c: 1213: dp->fs->winsect++;
"1213
[e ++ . *U . *U _dp 0 17 -> -> -> 1 `i `l `ul ]
"1214
}
"1210
[e ++ _c -> -> 1 `i `ui ]
[e :U 133 ]
[e $ < _c -> . *U . *U _dp 0 2 `ui 130  ]
[e :U 131 ]
"1214
}
[; ;ff.c: 1214: }
[; ;ff.c: 1215: dp->fs->winsect -= c;
"1215
[e =- . *U . *U _dp 0 17 -> _c `ul ]
"1220
}
[e :U 124 ]
[; ;ff.c: 1220: }
[; ;ff.c: 1221: dp->clust = clst;
"1221
[e = . *U _dp 4 _clst ]
[; ;ff.c: 1222: dp->sect = clust2sect(dp->fs, clst);
"1222
[e = . *U _dp 5 ( _clust2sect (2 , . *U _dp 0 _clst ]
"1223
}
[e :U 121 ]
"1224
}
[e :U 120 ]
"1225
}
[e :U 117 ]
[; ;ff.c: 1223: }
[; ;ff.c: 1224: }
[; ;ff.c: 1225: }
[; ;ff.c: 1227: dp->index = (WORD)i;
"1227
[e = . *U _dp 2 -> _i `us ]
[; ;ff.c: 1228: dp->dir = dp->fs->win + (i % (((UINT)512) / 32)) * 32;
"1228
[e = . *U _dp 6 + &U . *U . *U _dp 0 18 * -> * % _i / -> -> 512 `i `ui -> -> 32 `i `ui -> -> 32 `i `ui `ux -> -> # *U &U . *U . *U _dp 0 18 `ui `ux ]
[; ;ff.c: 1230: return FR_OK;
"1230
[e ) -> . `E67 0 `E67 ]
[e $UE 115  ]
[; ;ff.c: 1231: }
"1231
[e :UE 115 ]
}
"1242
[v _dir_alloc `(E67 ~T0 @X0 1 sf2`*S3`ui ]
"1246
{
[; ;ff.c: 1241: static
[; ;ff.c: 1242: FRESULT dir_alloc (
[; ;ff.c: 1243: DIR* dp,
[; ;ff.c: 1244: UINT nent
[; ;ff.c: 1245: )
[; ;ff.c: 1246: {
[e :U _dir_alloc ]
"1243
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1244
[v _nent `ui ~T0 @X0 1 r2 ]
"1246
[f ]
"1247
[v _res `E67 ~T0 @X0 1 a ]
"1248
[v _n `ui ~T0 @X0 1 a ]
[; ;ff.c: 1247: FRESULT res;
[; ;ff.c: 1248: UINT n;
[; ;ff.c: 1251: res = dir_sdi(dp, 0);
"1251
[e = _res ( _dir_sdi (2 , _dp -> -> 0 `i `ui ]
[; ;ff.c: 1252: if (res == FR_OK) {
"1252
[e $ ! == -> _res `i -> . `E67 0 `i 136  ]
{
[; ;ff.c: 1253: n = 0;
"1253
[e = _n -> -> 0 `i `ui ]
[; ;ff.c: 1254: do {
"1254
[e :U 139 ]
{
[; ;ff.c: 1255: res = move_window(dp->fs, dp->sect);
"1255
[e = _res ( _move_window (2 , . *U _dp 0 . *U _dp 5 ]
[; ;ff.c: 1256: if (res != FR_OK) break;
"1256
[e $ ! != -> _res `i -> . `E67 0 `i 140  ]
[e $U 138  ]
[e :U 140 ]
[; ;ff.c: 1257: if (dp->dir[0] == 0xE5 || dp->dir[0] == 0) {
"1257
[e $ ! || == -> *U + . *U _dp 6 * -> -> 0 `i `x -> -> # *U . *U _dp 6 `i `x `i -> 229 `i == -> *U + . *U _dp 6 * -> -> 0 `i `x -> -> # *U . *U _dp 6 `i `x `i -> 0 `i 141  ]
{
[; ;ff.c: 1258: if (++n == nent) break;
"1258
[e $ ! == =+ _n -> -> 1 `i `ui _nent 142  ]
[e $U 138  ]
[e :U 142 ]
"1259
}
[; ;ff.c: 1259: } else {
[e $U 143  ]
[e :U 141 ]
{
[; ;ff.c: 1260: n = 0;
"1260
[e = _n -> -> 0 `i `ui ]
"1261
}
[e :U 143 ]
[; ;ff.c: 1261: }
[; ;ff.c: 1262: res = dir_next(dp, 1);
"1262
[e = _res ( _dir_next (2 , _dp -> 1 `i ]
"1263
}
[; ;ff.c: 1263: } while (res == FR_OK);
[e $ == -> _res `i -> . `E67 0 `i 139  ]
[e :U 138 ]
"1264
}
[e :U 136 ]
[; ;ff.c: 1264: }
[; ;ff.c: 1265: if (res == FR_NO_FILE) res = FR_DENIED;
"1265
[e $ ! == -> _res `i -> . `E67 4 `i 144  ]
[e = _res -> . `E67 7 `E67 ]
[e :U 144 ]
[; ;ff.c: 1266: return res;
"1266
[e ) _res ]
[e $UE 135  ]
[; ;ff.c: 1267: }
"1267
[e :UE 135 ]
}
"1278
[v _ld_clust `(ul ~T0 @X0 1 sf2`*S1`*Cuc ]
"1282
{
[; ;ff.c: 1277: static
[; ;ff.c: 1278: DWORD ld_clust (
[; ;ff.c: 1279: FATFS* fs,
[; ;ff.c: 1280: const BYTE* dir
[; ;ff.c: 1281: )
[; ;ff.c: 1282: {
[e :U _ld_clust ]
"1279
[v _fs `*S1 ~T0 @X0 1 r1 ]
"1280
[v _dir `*Cuc ~T0 @X0 1 r2 ]
"1282
[f ]
"1283
[v _cl `ul ~T0 @X0 1 a ]
[; ;ff.c: 1283: DWORD cl;
[; ;ff.c: 1285: cl = (WORD)(((WORD)*((BYTE*)(dir + 26)+1)<<8)|(WORD)*(BYTE*)(dir + 26));
"1285
[e = _cl -> -> | << -> -> *U + -> + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x `*uc * -> -> 1 `i `x -> -> # *U -> + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x `*uc `i `x `us `ui -> 8 `i -> -> *U -> + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x `*uc `us `ui `us `ul ]
[; ;ff.c: 1286: if (fs->fs_type == 3)
"1286
[e $ ! == -> . *U _fs 0 `i -> 3 `i 146  ]
[; ;ff.c: 1287: cl |= (DWORD)(WORD)(((WORD)*((BYTE*)(dir + 20)+1)<<8)|(WORD)*(BYTE*)(dir + 20)) << 16;
"1287
[e =| _cl << -> -> | << -> -> *U + -> + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x `*uc * -> -> 1 `i `x -> -> # *U -> + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x `*uc `i `x `us `ui -> 8 `i -> -> *U -> + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x `*uc `us `ui `us `ul -> 16 `i ]
[e :U 146 ]
[; ;ff.c: 1289: return cl;
"1289
[e ) _cl ]
[e $UE 145  ]
[; ;ff.c: 1290: }
"1290
[e :UE 145 ]
}
"1295
[v _st_clust `(v ~T0 @X0 1 sf2`*uc`ul ]
"1299
{
[; ;ff.c: 1294: static
[; ;ff.c: 1295: void st_clust (
[; ;ff.c: 1296: BYTE* dir,
[; ;ff.c: 1297: DWORD cl
[; ;ff.c: 1298: )
[; ;ff.c: 1299: {
[e :U _st_clust ]
"1296
[v _dir `*uc ~T0 @X0 1 r1 ]
"1297
[v _cl `ul ~T0 @X0 1 r2 ]
"1299
[f ]
[; ;ff.c: 1300: *(BYTE*)(dir + 26)=(BYTE)(cl); *((BYTE*)(dir + 26)+1)=(BYTE)((WORD)(cl)>>8);
"1300
[e = *U + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x -> _cl `uc ]
[e = *U + + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 26 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _cl `us `ui -> 8 `i `uc ]
[; ;ff.c: 1301: *(BYTE*)(dir + 20)=(BYTE)(cl >> 16); *((BYTE*)(dir + 20)+1)=(BYTE)((WORD)(cl >> 16)>>8);
"1301
[e = *U + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x -> >> _cl -> 16 `i `uc ]
[e = *U + + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 20 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> >> _cl -> 16 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 1302: }
"1302
[e :UE 147 ]
}
"1501
[v _dir_find `(E67 ~T0 @X0 1 sf1`*S3 ]
"1504
{
[; ;ff.c: 1500: static
[; ;ff.c: 1501: FRESULT dir_find (
[; ;ff.c: 1502: DIR* dp
[; ;ff.c: 1503: )
[; ;ff.c: 1504: {
[e :U _dir_find ]
"1502
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1504
[f ]
"1505
[v _res `E67 ~T0 @X0 1 a ]
"1506
[v _c `uc ~T0 @X0 1 a ]
[v _dir `*uc ~T0 @X0 1 a ]
[; ;ff.c: 1505: FRESULT res;
[; ;ff.c: 1506: BYTE c, *dir;
[; ;ff.c: 1511: res = dir_sdi(dp, 0);
"1511
[e = _res ( _dir_sdi (2 , _dp -> -> 0 `i `ui ]
[; ;ff.c: 1512: if (res != FR_OK) return res;
"1512
[e $ ! != -> _res `i -> . `E67 0 `i 149  ]
[e ) _res ]
[e $UE 148  ]
[e :U 149 ]
[; ;ff.c: 1517: do {
"1517
[e :U 152 ]
{
[; ;ff.c: 1518: res = move_window(dp->fs, dp->sect);
"1518
[e = _res ( _move_window (2 , . *U _dp 0 . *U _dp 5 ]
[; ;ff.c: 1519: if (res != FR_OK) break;
"1519
[e $ ! != -> _res `i -> . `E67 0 `i 153  ]
[e $U 151  ]
[e :U 153 ]
[; ;ff.c: 1520: dir = dp->dir;
"1520
[e = _dir . *U _dp 6 ]
[; ;ff.c: 1521: c = dir[0];
"1521
[e = _c *U + _dir * -> -> 0 `i `x -> -> # *U _dir `i `x ]
[; ;ff.c: 1522: if (c == 0) { res = FR_NO_FILE; break; }
"1522
[e $ ! == -> _c `i -> 0 `i 154  ]
{
[e = _res -> . `E67 4 `E67 ]
[e $U 151  ]
}
[e :U 154 ]
[; ;ff.c: 1545: if (!(dir[11] & 0x08) && !mem_cmp(dir, dp->fn, 11))
"1545
[e $ ! && ! != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 8 `i -> 0 `i ! != ( _mem_cmp (3 , , -> _dir `*Cv -> . *U _dp 7 `*Cv -> -> 11 `i `ui -> 0 `i 155  ]
[; ;ff.c: 1546: break;
"1546
[e $U 151  ]
[e :U 155 ]
[; ;ff.c: 1548: res = dir_next(dp, 0);
"1548
[e = _res ( _dir_next (2 , _dp -> 0 `i ]
"1549
}
[; ;ff.c: 1549: } while (res == FR_OK);
[e $ == -> _res `i -> . `E67 0 `i 152  ]
[e :U 151 ]
[; ;ff.c: 1551: return res;
"1551
[e ) _res ]
[e $UE 148  ]
[; ;ff.c: 1552: }
"1552
[e :UE 148 ]
}
"1562
[v _dir_read `(E67 ~T0 @X0 1 sf2`*S3`i ]
"1566
{
[; ;ff.c: 1561: static
[; ;ff.c: 1562: FRESULT dir_read (
[; ;ff.c: 1563: DIR* dp,
[; ;ff.c: 1564: int vol
[; ;ff.c: 1565: )
[; ;ff.c: 1566: {
[e :U _dir_read ]
"1563
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1564
[v _vol `i ~T0 @X0 1 r2 ]
"1566
[f ]
"1567
[v _res `E67 ~T0 @X0 1 a ]
"1568
[v _a `uc ~T0 @X0 1 a ]
[v _c `uc ~T0 @X0 1 a ]
[v _dir `*uc ~T0 @X0 1 a ]
[; ;ff.c: 1567: FRESULT res;
[; ;ff.c: 1568: BYTE a, c, *dir;
[; ;ff.c: 1573: res = FR_NO_FILE;
"1573
[e = _res -> . `E67 4 `E67 ]
[; ;ff.c: 1574: while (dp->sect) {
"1574
[e $U 157  ]
[e :U 158 ]
{
[; ;ff.c: 1575: res = move_window(dp->fs, dp->sect);
"1575
[e = _res ( _move_window (2 , . *U _dp 0 . *U _dp 5 ]
[; ;ff.c: 1576: if (res != FR_OK) break;
"1576
[e $ ! != -> _res `i -> . `E67 0 `i 160  ]
[e $U 159  ]
[e :U 160 ]
[; ;ff.c: 1577: dir = dp->dir;
"1577
[e = _dir . *U _dp 6 ]
[; ;ff.c: 1578: c = dir[0];
"1578
[e = _c *U + _dir * -> -> 0 `i `x -> -> # *U _dir `i `x ]
[; ;ff.c: 1579: if (c == 0) { res = FR_NO_FILE; break; }
"1579
[e $ ! == -> _c `i -> 0 `i 161  ]
{
[e = _res -> . `E67 4 `E67 ]
[e $U 159  ]
}
[e :U 161 ]
[; ;ff.c: 1580: a = dir[11] & 0x3F;
"1580
[e = _a -> & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 63 `i `uc ]
[; ;ff.c: 1600: if (c != 0xE5 && (2 || c != '.') && a != 0x0F && (int)((a & ~0x20) == 0x08) == vol)
"1600
[e $ ! && && && != -> _c `i -> 229 `i || != -> 2 `i -> 0 `i != -> _c `ui -> 46 `ui != -> _a `i -> 15 `i == -> == & -> _a `i ~ -> 32 `i -> 8 `i `i _vol 162  ]
[; ;ff.c: 1601: break;
"1601
[e $U 159  ]
[e :U 162 ]
[; ;ff.c: 1603: res = dir_next(dp, 0);
"1603
[e = _res ( _dir_next (2 , _dp -> 0 `i ]
[; ;ff.c: 1604: if (res != FR_OK) break;
"1604
[e $ ! != -> _res `i -> . `E67 0 `i 163  ]
[e $U 159  ]
[e :U 163 ]
"1605
}
[e :U 157 ]
"1574
[e $ != . *U _dp 5 -> -> 0 `i `ul 158  ]
[e :U 159 ]
[; ;ff.c: 1605: }
[; ;ff.c: 1607: if (res != FR_OK) dp->sect = 0;
"1607
[e $ ! != -> _res `i -> . `E67 0 `i 164  ]
[e = . *U _dp 5 -> -> -> 0 `i `l `ul ]
[e :U 164 ]
[; ;ff.c: 1609: return res;
"1609
[e ) _res ]
[e $UE 156  ]
[; ;ff.c: 1610: }
"1610
[e :UE 156 ]
}
"1621
[v _dir_register `(E67 ~T0 @X0 1 sf1`*S3 ]
"1624
{
[; ;ff.c: 1620: static
[; ;ff.c: 1621: FRESULT dir_register (
[; ;ff.c: 1622: DIR* dp
[; ;ff.c: 1623: )
[; ;ff.c: 1624: {
[e :U _dir_register ]
"1622
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1624
[f ]
"1625
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 1625: FRESULT res;
[; ;ff.c: 1672: res = dir_alloc(dp, 1);
"1672
[e = _res ( _dir_alloc (2 , _dp -> -> 1 `i `ui ]
[; ;ff.c: 1675: if (res == FR_OK) {
"1675
[e $ ! == -> _res `i -> . `E67 0 `i 166  ]
{
[; ;ff.c: 1676: res = move_window(dp->fs, dp->sect);
"1676
[e = _res ( _move_window (2 , . *U _dp 0 . *U _dp 5 ]
[; ;ff.c: 1677: if (res == FR_OK) {
"1677
[e $ ! == -> _res `i -> . `E67 0 `i 167  ]
{
[; ;ff.c: 1678: mem_set(dp->dir, 0, 32);
"1678
[e ( _mem_set (3 , , -> . *U _dp 6 `*v -> 0 `i -> -> 32 `i `ui ]
[; ;ff.c: 1679: mem_cpy(dp->dir, dp->fn, 11);
"1679
[e ( _mem_cpy (3 , , -> . *U _dp 6 `*v -> . *U _dp 7 `*Cv -> -> 11 `i `ui ]
[; ;ff.c: 1683: dp->fs->wflag = 1;
"1683
[e = . *U . *U _dp 0 4 -> -> 1 `i `uc ]
"1684
}
[e :U 167 ]
"1685
}
[e :U 166 ]
[; ;ff.c: 1684: }
[; ;ff.c: 1685: }
[; ;ff.c: 1687: return res;
"1687
[e ) _res ]
[e $UE 165  ]
[; ;ff.c: 1688: }
"1688
[e :UE 165 ]
}
"1699
[v _dir_remove `(E67 ~T0 @X0 1 sf1`*S3 ]
"1702
{
[; ;ff.c: 1698: static
[; ;ff.c: 1699: FRESULT dir_remove (
[; ;ff.c: 1700: DIR* dp
[; ;ff.c: 1701: )
[; ;ff.c: 1702: {
[e :U _dir_remove ]
"1700
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1702
[f ]
"1703
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 1703: FRESULT res;
[; ;ff.c: 1723: res = dir_sdi(dp, dp->index);
"1723
[e = _res ( _dir_sdi (2 , _dp -> . *U _dp 2 `ui ]
[; ;ff.c: 1724: if (res == FR_OK) {
"1724
[e $ ! == -> _res `i -> . `E67 0 `i 169  ]
{
[; ;ff.c: 1725: res = move_window(dp->fs, dp->sect);
"1725
[e = _res ( _move_window (2 , . *U _dp 0 . *U _dp 5 ]
[; ;ff.c: 1726: if (res == FR_OK) {
"1726
[e $ ! == -> _res `i -> . `E67 0 `i 170  ]
{
[; ;ff.c: 1727: mem_set(dp->dir, 0, 32);
"1727
[e ( _mem_set (3 , , -> . *U _dp 6 `*v -> 0 `i -> -> 32 `i `ui ]
[; ;ff.c: 1728: *dp->dir = 0xE5;
"1728
[e = *U . *U _dp 6 -> -> 229 `i `uc ]
[; ;ff.c: 1729: dp->fs->wflag = 1;
"1729
[e = . *U . *U _dp 0 4 -> -> 1 `i `uc ]
"1730
}
[e :U 170 ]
"1731
}
[e :U 169 ]
[; ;ff.c: 1730: }
[; ;ff.c: 1731: }
[; ;ff.c: 1734: return res;
"1734
[e ) _res ]
[e $UE 168  ]
[; ;ff.c: 1735: }
"1735
[e :UE 168 ]
}
"1746
[v _get_fileinfo `(v ~T0 @X0 1 sf2`*S3`*S4 ]
"1750
{
[; ;ff.c: 1745: static
[; ;ff.c: 1746: void get_fileinfo (
[; ;ff.c: 1747: DIR* dp,
[; ;ff.c: 1748: FILINFO* fno
[; ;ff.c: 1749: )
[; ;ff.c: 1750: {
[e :U _get_fileinfo ]
"1747
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1748
[v _fno `*S4 ~T0 @X0 1 r2 ]
"1750
[f ]
"1751
[v _i `ui ~T0 @X0 1 a ]
"1752
[v _p `*uc ~T0 @X0 1 a ]
[v _c `uc ~T0 @X0 1 a ]
"1753
[v _dir `*uc ~T0 @X0 1 a ]
[; ;ff.c: 1751: UINT i;
[; ;ff.c: 1752: TCHAR *p, c;
[; ;ff.c: 1753: BYTE *dir;
[; ;ff.c: 1758: p = fno->fname;
"1758
[e = _p &U . *U _fno 4 ]
[; ;ff.c: 1759: if (dp->sect) {
"1759
[e $ ! != . *U _dp 5 -> -> 0 `i `ul 172  ]
{
[; ;ff.c: 1760: dir = dp->dir;
"1760
[e = _dir . *U _dp 6 ]
[; ;ff.c: 1761: i = 0;
"1761
[e = _i -> -> 0 `i `ui ]
[; ;ff.c: 1762: while (i < 11) {
"1762
[e $U 173  ]
[e :U 174 ]
{
[; ;ff.c: 1763: c = (TCHAR)dir[i++];
"1763
[e = _c *U + _dir * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _dir `ui `ux ]
[; ;ff.c: 1764: if (c == ' ') continue;
"1764
[e $ ! == -> _c `ui -> 32 `ui 176  ]
[e $U 173  ]
[e :U 176 ]
[; ;ff.c: 1765: if (c == 0x05) c = (TCHAR)0xE5;
"1765
[e $ ! == -> _c `i -> 5 `i 177  ]
[e = _c -> -> 229 `i `uc ]
[e :U 177 ]
[; ;ff.c: 1766: if (i == 9) *p++ = '.';
"1766
[e $ ! == _i -> -> 9 `i `ui 178  ]
[e = *U ++ _p * -> -> 1 `i `x -> -> # *U _p `i `x -> -> 46 `ui `uc ]
[e :U 178 ]
[; ;ff.c: 1777: *p++ = c;
"1777
[e = *U ++ _p * -> -> 1 `i `x -> -> # *U _p `i `x _c ]
"1778
}
[e :U 173 ]
"1762
[e $ < _i -> -> 11 `i `ui 174  ]
[e :U 175 ]
[; ;ff.c: 1778: }
[; ;ff.c: 1779: fno->fattrib = dir[11];
"1779
[e = . *U _fno 3 *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x ]
[; ;ff.c: 1780: fno->fsize = (DWORD)(((DWORD)*((BYTE*)(dir + 28)+3)<<24)|((DWORD)*((BYTE*)(dir + 28)+2)<<16)|((WORD)*((BYTE*)(dir + 28)+1)<<8)|*(BYTE*)(dir + 28));
"1780
[e = . *U _fno 0 | | | << -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `ul -> 24 `i << -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `ul -> 16 `i -> << -> -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `us `ui -> 8 `i `ul -> *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `ul ]
[; ;ff.c: 1781: fno->fdate = (WORD)(((WORD)*((BYTE*)(dir + 24)+1)<<8)|(WORD)*(BYTE*)(dir + 24));
"1781
[e = . *U _fno 1 -> | << -> -> *U + + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x `i `x `us `ui -> 8 `i -> -> *U + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x `us `ui `us ]
[; ;ff.c: 1782: fno->ftime = (WORD)(((WORD)*((BYTE*)(dir + 22)+1)<<8)|(WORD)*(BYTE*)(dir + 22));
"1782
[e = . *U _fno 2 -> | << -> -> *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x `us `ui -> 8 `i -> -> *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `us `ui `us ]
"1783
}
[e :U 172 ]
[; ;ff.c: 1783: }
[; ;ff.c: 1784: *p = 0;
"1784
[e = *U _p -> -> 0 `i `uc ]
[; ;ff.c: 1805: }
"1805
[e :UE 171 ]
}
"1816
[v _get_achar `(us ~T0 @X0 1 sf1`**Cuc ]
"1819
{
[; ;ff.c: 1815: static
[; ;ff.c: 1816: WCHAR get_achar (
[; ;ff.c: 1817: const TCHAR** ptr
[; ;ff.c: 1818: )
[; ;ff.c: 1819: {
[e :U _get_achar ]
"1817
[v _ptr `**Cuc ~T0 @X0 1 r1 ]
"1819
[f ]
"1820
[v _chr `us ~T0 @X0 1 a ]
[; ;ff.c: 1820: WCHAR chr;
[; ;ff.c: 1823: chr = (BYTE)*(*ptr)++;
"1823
[e = _chr -> *U ++ *U _ptr * -> -> 1 `i `x -> -> # *U *U _ptr `i `x `us ]
[; ;ff.c: 1824: if ((((chr)>='a')&&((chr)<='z'))) chr -= 0x20;
"1824
[e $ ! && >= -> _chr `ui -> 97 `ui <= -> _chr `ui -> 122 `ui 180  ]
[e =- _chr -> -> 32 `i `us ]
[e :U 180 ]
[; ;ff.c: 1825: if ((((BYTE)(chr) >= 0x81 && (BYTE)(chr) <= 0x9F) || ((BYTE)(chr) >= 0xE0 && (BYTE)(chr) <= 0xFC)) && (((BYTE)(**ptr) >= 0x40 && (BYTE)(**ptr) <= 0x7E) || ((BYTE)(**ptr) >= 0x80 && (BYTE)(**ptr) <= 0xFC)))
"1825
[e $ ! && || && >= -> -> _chr `uc `i -> 129 `i <= -> -> _chr `uc `i -> 159 `i && >= -> -> _chr `uc `i -> 224 `i <= -> -> _chr `uc `i -> 252 `i || && >= -> *U *U _ptr `i -> 64 `i <= -> *U *U _ptr `i -> 126 `i && >= -> *U *U _ptr `i -> 128 `i <= -> *U *U _ptr `i -> 252 `i 181  ]
[; ;ff.c: 1826: chr = chr << 8 | (BYTE)*(*ptr)++;
"1826
[e = _chr -> | << -> _chr `ui -> 8 `i -> *U ++ *U _ptr * -> -> 1 `i `x -> -> # *U *U _ptr `i `x `ui `us ]
[e :U 181 ]
[; ;ff.c: 1833: return chr;
"1833
[e ) _chr ]
[e $UE 179  ]
[; ;ff.c: 1834: }
"1834
[e :UE 179 ]
}
"1838
[v _pattern_matching `(i ~T0 @X0 1 sf4`*Cuc`*Cuc`i`i ]
"1844
{
[; ;ff.c: 1837: static
[; ;ff.c: 1838: int pattern_matching (
[; ;ff.c: 1839: const TCHAR* pat,
[; ;ff.c: 1840: const TCHAR* nam,
[; ;ff.c: 1841: int skip,
[; ;ff.c: 1842: int inf
[; ;ff.c: 1843: )
[; ;ff.c: 1844: {
[e :U _pattern_matching ]
"1839
[v _pat `*Cuc ~T0 @X0 1 r1 ]
"1840
[v _nam `*Cuc ~T0 @X0 1 r2 ]
"1841
[v _skip `i ~T0 @X0 1 r3 ]
"1842
[v _inf `i ~T0 @X0 1 r4 ]
"1844
[f ]
"1845
[v _pp `*Cuc ~T0 @X0 1 a ]
[v _np `*Cuc ~T0 @X0 1 a ]
"1846
[v _pc `us ~T0 @X0 1 a ]
[v _nc `us ~T0 @X0 1 a ]
"1847
[v _nm `i ~T0 @X0 1 a ]
[v _nx `i ~T0 @X0 1 a ]
[; ;ff.c: 1845: const TCHAR *pp, *np;
[; ;ff.c: 1846: WCHAR pc, nc;
[; ;ff.c: 1847: int nm, nx;
[; ;ff.c: 1850: while (skip--) {
"1850
[e $U 183  ]
[e :U 184 ]
{
[; ;ff.c: 1851: if (!get_achar(&nam)) return 0;
"1851
[e $ ! ! != -> ( _get_achar (1 &U _nam `ui -> -> -> 0 `i `us `ui 186  ]
[e ) -> 0 `i ]
[e $UE 182  ]
[e :U 186 ]
"1852
}
[e :U 183 ]
"1850
[e $ != -- _skip -> 1 `i -> 0 `i 184  ]
[e :U 185 ]
[; ;ff.c: 1852: }
[; ;ff.c: 1853: if (!*pat && inf) return 1;
"1853
[e $ ! && ! != -> *U _pat `i -> -> -> 0 `i `Cuc `i != _inf -> 0 `i 187  ]
[e ) -> 1 `i ]
[e $UE 182  ]
[e :U 187 ]
[; ;ff.c: 1855: do {
"1855
[e :U 190 ]
{
[; ;ff.c: 1856: pp = pat; np = nam;
"1856
[e = _pp _pat ]
[e = _np _nam ]
[; ;ff.c: 1857: for (;;) {
"1857
{
[e :U 191 ]
{
[; ;ff.c: 1858: if (*pp == '?' || *pp == '*') {
"1858
[e $ ! || == -> *U _pp `ui -> 63 `ui == -> *U _pp `ui -> 42 `ui 194  ]
{
[; ;ff.c: 1859: nm = nx = 0;
"1859
[e = _nm = _nx -> 0 `i ]
[; ;ff.c: 1860: do {
"1860
[e :U 197 ]
{
[; ;ff.c: 1861: if (*pp++ == '?') nm++; else nx = 1;
"1861
[e $ ! == -> *U ++ _pp * -> -> 1 `i `x -> -> # *U _pp `i `x `ui -> 63 `ui 198  ]
[e ++ _nm -> 1 `i ]
[e $U 199  ]
[e :U 198 ]
[e = _nx -> 1 `i ]
[e :U 199 ]
"1862
}
[; ;ff.c: 1862: } while (*pp == '?' || *pp == '*');
[e $ || == -> *U _pp `ui -> 63 `ui == -> *U _pp `ui -> 42 `ui 197  ]
[e :U 196 ]
[; ;ff.c: 1863: if (pattern_matching(pp, np, nm, nx)) return 1;
"1863
[e $ ! != ( _pattern_matching (4 , , , _pp _np _nm _nx -> 0 `i 200  ]
[e ) -> 1 `i ]
[e $UE 182  ]
[e :U 200 ]
[; ;ff.c: 1864: nc = *np; break;
"1864
[e = _nc -> *U _np `us ]
[e $U 192  ]
"1865
}
[e :U 194 ]
[; ;ff.c: 1865: }
[; ;ff.c: 1866: pc = get_achar(&pp);
"1866
[e = _pc ( _get_achar (1 &U _pp ]
[; ;ff.c: 1867: nc = get_achar(&np);
"1867
[e = _nc ( _get_achar (1 &U _np ]
[; ;ff.c: 1868: if (pc != nc) break;
"1868
[e $ ! != -> _pc `ui -> _nc `ui 201  ]
[e $U 192  ]
[e :U 201 ]
[; ;ff.c: 1869: if (!pc) return 1;
"1869
[e $ ! ! != -> _pc `ui -> -> -> 0 `i `us `ui 202  ]
[e ) -> 1 `i ]
[e $UE 182  ]
[e :U 202 ]
"1870
}
[; ;ff.c: 1870: }
[e $U 191  ]
[e :U 192 ]
}
[; ;ff.c: 1871: get_achar(&nam);
"1871
[e ( _get_achar (1 &U _nam ]
"1872
}
[; ;ff.c: 1872: } while (inf && nc);
[e $ && != _inf -> 0 `i != -> _nc `ui -> -> -> 0 `i `us `ui 190  ]
[e :U 189 ]
[; ;ff.c: 1874: return 0;
"1874
[e ) -> 0 `i ]
[e $UE 182  ]
[; ;ff.c: 1875: }
"1875
[e :UE 182 ]
}
"1886
[v _create_name `(E67 ~T0 @X0 1 sf2`*S3`**Cuc ]
"1890
{
[; ;ff.c: 1885: static
[; ;ff.c: 1886: FRESULT create_name (
[; ;ff.c: 1887: DIR* dp,
[; ;ff.c: 1888: const TCHAR** path
[; ;ff.c: 1889: )
[; ;ff.c: 1890: {
[e :U _create_name ]
"1887
[v _dp `*S3 ~T0 @X0 1 r1 ]
"1888
[v _path `**Cuc ~T0 @X0 1 r2 ]
"1890
[f ]
"2012
[v _b `uc ~T0 @X0 1 a ]
[v _c `uc ~T0 @X0 1 a ]
[v _d `uc ~T0 @X0 1 a ]
[v _sfn `*uc ~T0 @X0 1 a ]
"2013
[v _ni `ui ~T0 @X0 1 a ]
[v _si `ui ~T0 @X0 1 a ]
[v _i `ui ~T0 @X0 1 a ]
"2014
[v _p `*Cuc ~T0 @X0 1 a ]
[; ;ff.c: 2012: BYTE b, c, d, *sfn;
[; ;ff.c: 2013: UINT ni, si, i;
[; ;ff.c: 2014: const char *p;
[; ;ff.c: 2017: for (p = *path; *p == '/' || *p == '\\'; p++) ;
"2017
{
[e = _p *U _path ]
[e $U 207  ]
[e :U 204 ]
[e ++ _p * -> -> 1 `i `x -> -> # *U _p `i `x ]
[e :U 207 ]
[e $ || == -> *U _p `ui -> 47 `ui == -> *U _p `ui -> 92 `ui 204  ]
[e :U 205 ]
}
[; ;ff.c: 2018: sfn = dp->fn;
"2018
[e = _sfn . *U _dp 7 ]
[; ;ff.c: 2019: mem_set(sfn, ' ', 11);
"2019
[e ( _mem_set (3 , , -> _sfn `*v -> -> 32 `ui `i -> -> 11 `i `ui ]
[; ;ff.c: 2020: si = i = b = 0; ni = 8;
"2020
[e = _si = _i -> = _b -> -> 0 `i `uc `ui ]
[e = _ni -> -> 8 `i `ui ]
[; ;ff.c: 2022: if (p[si] == '.') {
"2022
[e $ ! == -> *U + _p * -> _si `ux -> -> # *U _p `ui `ux `ui -> 46 `ui 208  ]
{
[; ;ff.c: 2023: for (;;) {
"2023
{
[e :U 209 ]
{
[; ;ff.c: 2024: c = (BYTE)p[si++];
"2024
[e = _c *U + _p * -> ++ _si -> -> 1 `i `ui `ux -> -> # *U _p `ui `ux ]
[; ;ff.c: 2025: if (c != '.' || si >= 3) break;
"2025
[e $ ! || != -> _c `ui -> 46 `ui >= _si -> -> 3 `i `ui 212  ]
[e $U 210  ]
[e :U 212 ]
[; ;ff.c: 2026: sfn[i++] = c;
"2026
[e = *U + _sfn * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _sfn `ui `ux _c ]
"2027
}
[; ;ff.c: 2027: }
[e $U 209  ]
[e :U 210 ]
}
[; ;ff.c: 2028: if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
"2028
[e $ ! && && != -> _c `ui -> 47 `ui != -> _c `ui -> 92 `ui > -> _c `ui -> 32 `ui 213  ]
[e ) -> . `E67 6 `E67 ]
[e $UE 203  ]
[e :U 213 ]
[; ;ff.c: 2029: *path = &p[si];
"2029
[e = *U _path &U *U + _p * -> _si `ux -> -> # *U _p `ui `ux ]
[; ;ff.c: 2030: sfn[11] = (c <= ' ') ? 0x04 | 0x20 : 0x20;
"2030
[e = *U + _sfn * -> -> 11 `i `x -> -> # *U _sfn `i `x -> ? <= -> _c `ui -> 32 `ui : | -> 4 `i -> 32 `i -> 32 `i `uc ]
[; ;ff.c: 2031: return FR_OK;
"2031
[e ) -> . `E67 0 `E67 ]
[e $UE 203  ]
"2032
}
[e :U 208 ]
[; ;ff.c: 2032: }
[; ;ff.c: 2034: for (;;) {
"2034
{
[e :U 214 ]
{
[; ;ff.c: 2035: c = (BYTE)p[si++];
"2035
[e = _c *U + _p * -> ++ _si -> -> 1 `i `ui `ux -> -> # *U _p `ui `ux ]
[; ;ff.c: 2036: if (c <= ' ' || c == '/' || c == '\\') break;
"2036
[e $ ! || || <= -> _c `ui -> 32 `ui == -> _c `ui -> 47 `ui == -> _c `ui -> 92 `ui 217  ]
[e $U 215  ]
[e :U 217 ]
[; ;ff.c: 2037: if (c == '.' || i >= ni) {
"2037
[e $ ! || == -> _c `ui -> 46 `ui >= _i _ni 218  ]
{
[; ;ff.c: 2038: if (ni != 8 || c != '.') return FR_INVALID_NAME;
"2038
[e $ ! || != _ni -> -> 8 `i `ui != -> _c `ui -> 46 `ui 219  ]
[e ) -> . `E67 6 `E67 ]
[e $UE 203  ]
[e :U 219 ]
[; ;ff.c: 2039: i = 8; ni = 11;
"2039
[e = _i -> -> 8 `i `ui ]
[e = _ni -> -> 11 `i `ui ]
[; ;ff.c: 2040: b <<= 2; continue;
"2040
[e =<< _b -> 2 `i ]
[e $U 216  ]
"2041
}
[e :U 218 ]
[; ;ff.c: 2041: }
[; ;ff.c: 2042: if (c >= 0x80) {
"2042
[e $ ! >= -> _c `i -> 128 `i 220  ]
{
[; ;ff.c: 2043: b |= 3;
"2043
[e =| _b -> -> 3 `i `uc ]
"2051
}
[e :U 220 ]
[; ;ff.c: 2051: }
[; ;ff.c: 2052: if ((((BYTE)(c) >= 0x81 && (BYTE)(c) <= 0x9F) || ((BYTE)(c) >= 0xE0 && (BYTE)(c) <= 0xFC))) {
"2052
[e $ ! || && >= -> _c `i -> 129 `i <= -> _c `i -> 159 `i && >= -> _c `i -> 224 `i <= -> _c `i -> 252 `i 221  ]
{
[; ;ff.c: 2053: d = (BYTE)p[si++];
"2053
[e = _d *U + _p * -> ++ _si -> -> 1 `i `ui `ux -> -> # *U _p `ui `ux ]
[; ;ff.c: 2054: if (!(((BYTE)(d) >= 0x40 && (BYTE)(d) <= 0x7E) || ((BYTE)(d) >= 0x80 && (BYTE)(d) <= 0xFC)) || i >= ni - 1)
"2054
[e $ ! || ! || && >= -> _d `i -> 64 `i <= -> _d `i -> 126 `i && >= -> _d `i -> 128 `i <= -> _d `i -> 252 `i >= _i - _ni -> -> 1 `i `ui 222  ]
[; ;ff.c: 2055: return FR_INVALID_NAME;
"2055
[e ) -> . `E67 6 `E67 ]
[e $UE 203  ]
[e :U 222 ]
[; ;ff.c: 2056: sfn[i++] = c;
"2056
[e = *U + _sfn * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _sfn `ui `ux _c ]
[; ;ff.c: 2057: sfn[i++] = d;
"2057
[e = *U + _sfn * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _sfn `ui `ux _d ]
"2058
}
[; ;ff.c: 2058: } else {
[e $U 223  ]
[e :U 221 ]
{
[; ;ff.c: 2059: if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))
"2059
[e $ ! != ( _chk_chr (2 , :s 1C -> _c `i -> 0 `i 224  ]
[; ;ff.c: 2060: return FR_INVALID_NAME;
"2060
[e ) -> . `E67 6 `E67 ]
[e $UE 203  ]
[e :U 224 ]
[; ;ff.c: 2061: if ((((c)>='A')&&((c)<='Z'))) {
"2061
[e $ ! && >= -> _c `ui -> 65 `ui <= -> _c `ui -> 90 `ui 225  ]
{
[; ;ff.c: 2062: b |= 2;
"2062
[e =| _b -> -> 2 `i `uc ]
"2063
}
[; ;ff.c: 2063: } else {
[e $U 226  ]
[e :U 225 ]
{
[; ;ff.c: 2064: if ((((c)>='a')&&((c)<='z'))) {
"2064
[e $ ! && >= -> _c `ui -> 97 `ui <= -> _c `ui -> 122 `ui 227  ]
{
[; ;ff.c: 2065: b |= 1; c -= 0x20;
"2065
[e =| _b -> -> 1 `i `uc ]
[e =- _c -> -> 32 `i `uc ]
"2066
}
[e :U 227 ]
"2067
}
[e :U 226 ]
[; ;ff.c: 2066: }
[; ;ff.c: 2067: }
[; ;ff.c: 2068: sfn[i++] = c;
"2068
[e = *U + _sfn * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _sfn `ui `ux _c ]
"2069
}
[e :U 223 ]
"2070
}
[e :U 216 ]
[; ;ff.c: 2069: }
[; ;ff.c: 2070: }
[e $U 214  ]
[e :U 215 ]
}
[; ;ff.c: 2071: *path = &p[si];
"2071
[e = *U _path &U *U + _p * -> _si `ux -> -> # *U _p `ui `ux ]
[; ;ff.c: 2072: c = (c <= ' ') ? 0x04 : 0;
"2072
[e = _c -> ? <= -> _c `ui -> 32 `ui : -> 4 `i -> 0 `i `uc ]
[; ;ff.c: 2074: if (!i) return FR_INVALID_NAME;
"2074
[e $ ! ! != _i -> -> 0 `i `ui 228  ]
[e ) -> . `E67 6 `E67 ]
[e $UE 203  ]
[e :U 228 ]
[; ;ff.c: 2075: if (sfn[0] == 0xE5) sfn[0] = 0x05;
"2075
[e $ ! == -> *U + _sfn * -> -> 0 `i `x -> -> # *U _sfn `i `x `i -> 229 `i 229  ]
[e = *U + _sfn * -> -> 0 `i `x -> -> # *U _sfn `i `x -> -> 5 `i `uc ]
[e :U 229 ]
[; ;ff.c: 2077: if (ni == 8) b <<= 2;
"2077
[e $ ! == _ni -> -> 8 `i `ui 230  ]
[e =<< _b -> 2 `i ]
[e :U 230 ]
[; ;ff.c: 2078: if ((b & 0x03) == 0x01) c |= 0x10;
"2078
[e $ ! == & -> _b `i -> 3 `i -> 1 `i 231  ]
[e =| _c -> -> 16 `i `uc ]
[e :U 231 ]
[; ;ff.c: 2079: if ((b & 0x0C) == 0x04) c |= 0x08;
"2079
[e $ ! == & -> _b `i -> 12 `i -> 4 `i 232  ]
[e =| _c -> -> 8 `i `uc ]
[e :U 232 ]
[; ;ff.c: 2081: sfn[11] = c;
"2081
[e = *U + _sfn * -> -> 11 `i `x -> -> # *U _sfn `i `x _c ]
[; ;ff.c: 2083: return FR_OK;
"2083
[e ) -> . `E67 0 `E67 ]
[e $UE 203  ]
[; ;ff.c: 2085: }
"2085
[e :UE 203 ]
}
"2095
[v _follow_path `(E67 ~T0 @X0 1 sf2`*S3`*Cuc ]
"2099
{
[; ;ff.c: 2094: static
[; ;ff.c: 2095: FRESULT follow_path (
[; ;ff.c: 2096: DIR* dp,
[; ;ff.c: 2097: const TCHAR* path
[; ;ff.c: 2098: )
[; ;ff.c: 2099: {
[e :U _follow_path ]
"2096
[v _dp `*S3 ~T0 @X0 1 r1 ]
"2097
[v _path `*Cuc ~T0 @X0 1 r2 ]
"2099
[f ]
"2100
[v _res `E67 ~T0 @X0 1 a ]
"2101
[v _dir `*uc ~T0 @X0 1 a ]
[v _ns `uc ~T0 @X0 1 a ]
[; ;ff.c: 2100: FRESULT res;
[; ;ff.c: 2101: BYTE *dir, ns;
[; ;ff.c: 2105: if (*path == '/' || *path == '\\') {
"2105
[e $ ! || == -> *U _path `ui -> 47 `ui == -> *U _path `ui -> 92 `ui 234  ]
{
[; ;ff.c: 2106: path++; dp->sclust = 0;
"2106
[e ++ _path * -> -> 1 `i `x -> -> # *U _path `i `x ]
[e = . *U _dp 3 -> -> -> 0 `i `l `ul ]
"2107
}
[; ;ff.c: 2107: } else {
[e $U 235  ]
[e :U 234 ]
{
[; ;ff.c: 2108: dp->sclust = dp->fs->cdir;
"2108
[e = . *U _dp 3 . *U . *U _dp 0 10 ]
"2109
}
[e :U 235 ]
[; ;ff.c: 2109: }
[; ;ff.c: 2116: if ((UINT)*path < ' ') {
"2116
[e $ ! < -> *U _path `ui -> 32 `ui 236  ]
{
[; ;ff.c: 2117: res = dir_sdi(dp, 0);
"2117
[e = _res ( _dir_sdi (2 , _dp -> -> 0 `i `ui ]
[; ;ff.c: 2118: dp->dir = 0;
"2118
[e = . *U _dp 6 -> -> 0 `i `*uc ]
"2119
}
[; ;ff.c: 2119: } else {
[e $U 237  ]
[e :U 236 ]
{
[; ;ff.c: 2120: for (;;) {
"2120
{
[e :U 238 ]
{
[; ;ff.c: 2121: res = create_name(dp, &path);
"2121
[e = _res ( _create_name (2 , _dp &U _path ]
[; ;ff.c: 2122: if (res != FR_OK) break;
"2122
[e $ ! != -> _res `i -> . `E67 0 `i 241  ]
[e $U 239  ]
[e :U 241 ]
[; ;ff.c: 2123: res = dir_find(dp);
"2123
[e = _res ( _dir_find (1 _dp ]
[; ;ff.c: 2124: ns = dp->fn[11];
"2124
[e = _ns *U + . *U _dp 7 * -> -> 11 `i `x -> -> # *U . *U _dp 7 `i `x ]
[; ;ff.c: 2125: if (res != FR_OK) {
"2125
[e $ ! != -> _res `i -> . `E67 0 `i 242  ]
{
[; ;ff.c: 2126: if (res == FR_NO_FILE) {
"2126
[e $ ! == -> _res `i -> . `E67 4 `i 243  ]
{
[; ;ff.c: 2127: if (2 && (ns & 0x20)) {
"2127
[e $ ! && != -> 2 `i -> 0 `i != & -> _ns `i -> 32 `i -> 0 `i 244  ]
{
[; ;ff.c: 2128: dp->sclust = 0; dp->dir = 0;
"2128
[e = . *U _dp 3 -> -> -> 0 `i `l `ul ]
[e = . *U _dp 6 -> -> 0 `i `*uc ]
[; ;ff.c: 2129: if (!(ns & 0x04)) continue;
"2129
[e $ ! ! != & -> _ns `i -> 4 `i -> 0 `i 245  ]
[e $U 240  ]
[e :U 245 ]
[; ;ff.c: 2130: res = FR_OK;
"2130
[e = _res -> . `E67 0 `E67 ]
"2131
}
[; ;ff.c: 2131: } else {
[e $U 246  ]
[e :U 244 ]
{
[; ;ff.c: 2132: if (!(ns & 0x04)) res = FR_NO_PATH;
"2132
[e $ ! ! != & -> _ns `i -> 4 `i -> 0 `i 247  ]
[e = _res -> . `E67 5 `E67 ]
[e :U 247 ]
"2133
}
[e :U 246 ]
"2134
}
[e :U 243 ]
[; ;ff.c: 2133: }
[; ;ff.c: 2134: }
[; ;ff.c: 2135: break;
"2135
[e $U 239  ]
"2136
}
[e :U 242 ]
[; ;ff.c: 2136: }
[; ;ff.c: 2137: if (ns & 0x04) break;
"2137
[e $ ! != & -> _ns `i -> 4 `i -> 0 `i 248  ]
[e $U 239  ]
[e :U 248 ]
[; ;ff.c: 2138: dir = dp->dir;
"2138
[e = _dir . *U _dp 6 ]
[; ;ff.c: 2139: if (!(dir[11] & 0x10)) {
"2139
[e $ ! ! != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 16 `i -> 0 `i 249  ]
{
[; ;ff.c: 2140: res = FR_NO_PATH; break;
"2140
[e = _res -> . `E67 5 `E67 ]
[e $U 239  ]
"2141
}
[e :U 249 ]
[; ;ff.c: 2141: }
[; ;ff.c: 2142: dp->sclust = ld_clust(dp->fs, dir);
"2142
[e = . *U _dp 3 ( _ld_clust (2 , . *U _dp 0 -> _dir `*Cuc ]
"2143
}
[e :U 240 ]
[; ;ff.c: 2143: }
[e $U 238  ]
[e :U 239 ]
}
"2144
}
[e :U 237 ]
[; ;ff.c: 2144: }
[; ;ff.c: 2146: return res;
"2146
[e ) _res ]
[e $UE 233  ]
[; ;ff.c: 2147: }
"2147
[e :UE 233 ]
}
"2156
[v _ld1 `uc ~T0 @X0 1 e ]
[v _ld2 `uc ~T0 @X0 1 e ]
[v _ld3 `uc ~T0 @X0 1 e ]
[; ;ff.c: 2156: char ld1,ld2,ld3;
"2157
[v _myvar `uc ~T0 @X0 -> 5 `i e ]
[; ;ff.c: 2157: char myvar[5];
"2160
[v _get_ldnumber `(i ~T0 @X0 1 sf1`**Cuc ]
"2163
{
[; ;ff.c: 2159: static
[; ;ff.c: 2160: int get_ldnumber (
[; ;ff.c: 2161: const TCHAR** path
[; ;ff.c: 2162: )
[; ;ff.c: 2163: {
[e :U _get_ldnumber ]
"2161
[v _path `**Cuc ~T0 @X0 1 r1 ]
"2163
[f ]
[; ;ff.c: 2164: ld1=ld2=ld3=0;
"2164
[e = _ld1 = _ld2 = _ld3 -> -> 0 `i `uc ]
"2165
[v _tp `*Cuc ~T0 @X0 1 a ]
[v _tt `*Cuc ~T0 @X0 1 a ]
"2166
[v _i `ui ~T0 @X0 1 a ]
"2167
[v _vol `i ~T0 @X0 1 a ]
[; ;ff.c: 2165: const TCHAR *tp, *tt;
[; ;ff.c: 2166: UINT i;
[; ;ff.c: 2167: int vol = -1;
[e = _vol -U -> 1 `i ]
[; ;ff.c: 2169: myvar[0] = 1;
"2169
[e = *U + &U _myvar * -> -> -> 0 `i `ui `ux -> -> # *U &U _myvar `ui `ux -> -> 1 `i `uc ]
[v F580 `*Cuc ~T0 @X0 1 t ]
"2170
[v F578 `C*Cuc ~T0 @X0 -> 0 `x s str ]
[i F578
:U ..
:s 2C
:s 3C
:s 4C
:s 5C
:s 6C
:s 7C
:s 8C
:s 9C
..
]
"2171
[v _sp `*Cuc ~T0 @X0 1 a ]
"2172
[v _c `uc ~T0 @X0 1 a ]
"2173
[v _tc `uc ~T0 @X0 1 a ]
[; ;ff.c: 2170: static const char* const str[] = {"RAM","NAND","CF","SD1","SD2","USB1","USB2","USB3"};
[; ;ff.c: 2171: const char *sp;
[; ;ff.c: 2172: char c;
[; ;ff.c: 2173: TCHAR tc;
[; ;ff.c: 2176: ld2 = 3;
"2176
[e = _ld2 -> -> 3 `i `uc ]
[; ;ff.c: 2177: if (*path) {
"2177
[e $ ! != *U _path -> -> 0 `i `*Cuc 251  ]
{
[; ;ff.c: 2178: ld2 = 4;myvar[1] = 1;
"2178
[e = _ld2 -> -> 4 `i `uc ]
[e = *U + &U _myvar * -> -> -> 1 `i `ui `ux -> -> # *U &U _myvar `ui `ux -> -> 1 `i `uc ]
[; ;ff.c: 2179: for (tt = *path; (UINT)*tt >= (0 ? ' ' : '!') && *tt != ':'; tt++) ;
"2179
{
[e = _tt *U _path ]
[e $U 255  ]
[e :U 252 ]
[e ++ _tt * -> -> 1 `i `x -> -> # *U _tt `i `x ]
[e :U 255 ]
[e $ && >= -> *U _tt `ui ? != -> 0 `i -> 0 `i : -> 32 `ui -> 33 `ui != -> *U _tt `ui -> 58 `ui 252  ]
[e :U 253 ]
}
[; ;ff.c: 2180: if (*tt == ':') {
"2180
[e $ ! == -> *U _tt `ui -> 58 `ui 256  ]
{
[; ;ff.c: 2181: ld1 = 12;
"2181
[e = _ld1 -> -> 12 `i `uc ]
[; ;ff.c: 2182: tp = *path;
"2182
[e = _tp *U _path ]
[; ;ff.c: 2183: i = *tp++ - '0';
"2183
[e = _i - -> *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x `ui -> 48 `ui ]
[; ;ff.c: 2184: if (i < 10 && tp == tt) {
"2184
[e $ ! && < _i -> -> 10 `i `ui == _tp _tt 257  ]
{
[; ;ff.c: 2185: ld3 = 11;
"2185
[e = _ld3 -> -> 11 `i `uc ]
[; ;ff.c: 2186: if (i < 5) {
"2186
[e $ ! < _i -> -> 5 `i `ui 258  ]
{
[; ;ff.c: 2187: vol = (int)i;
"2187
[e = _vol -> _i `i ]
[; ;ff.c: 2188: *path = ++tt;
"2188
[e = *U _path =+ _tt * -> -> 1 `i `x -> -> # *U _tt `i `x ]
"2189
}
[e :U 258 ]
"2190
}
[; ;ff.c: 2189: }
[; ;ff.c: 2190: }
[e $U 259  ]
"2192
[e :U 257 ]
[; ;ff.c: 2192: else {
{
[; ;ff.c: 2193: ld3 = 12;;
"2193
[e = _ld3 -> -> 12 `i `uc ]
[; ;ff.c: 2194: i = 0; tt++;
"2194
[e = _i -> -> 0 `i `ui ]
[e ++ _tt * -> -> 1 `i `x -> -> # *U _tt `i `x ]
[; ;ff.c: 2195: do {
"2195
[e :U 262 ]
{
[; ;ff.c: 2196: sp = str[i]; tp = *path;
"2196
[e = _sp -> *U + &U F578 * -> _i `ux -> -> # *U &U F578 `ui `ux `*Cuc ]
[e = _tp *U _path ]
[; ;ff.c: 2197: do {
"2197
[e :U 265 ]
{
[; ;ff.c: 2198: c = *sp++; tc = *tp++;
"2198
[e = _c *U ++ _sp * -> -> 1 `i `x -> -> # *U _sp `i `x ]
[e = _tc *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x ]
[; ;ff.c: 2199: if ((((tc)>='a')&&((tc)<='z'))) tc -= 0x20;
"2199
[e $ ! && >= -> _tc `ui -> 97 `ui <= -> _tc `ui -> 122 `ui 266  ]
[e =- _tc -> -> 32 `i `uc ]
[e :U 266 ]
"2200
}
[; ;ff.c: 2200: } while (c && (TCHAR)c == tc);
[e $ && != -> _c `i -> -> -> 0 `i `uc `i == -> _c `i -> _tc `i 265  ]
[e :U 264 ]
"2201
}
[; ;ff.c: 2201: } while ((c || tp != tt) && ++i < 5);
[e $ && || != -> _c `i -> -> -> 0 `i `uc `i != _tp _tt < =+ _i -> -> 1 `i `ui -> -> 5 `i `ui 262  ]
[e :U 261 ]
[; ;ff.c: 2202: if (i < 5) {
"2202
[e $ ! < _i -> -> 5 `i `ui 267  ]
{
[; ;ff.c: 2203: vol = (int)i;
"2203
[e = _vol -> _i `i ]
[; ;ff.c: 2204: *path = tt;
"2204
[e = *U _path _tt ]
"2205
}
[e :U 267 ]
"2206
}
[e :U 259 ]
[; ;ff.c: 2205: }
[; ;ff.c: 2206: }
[; ;ff.c: 2207: myvar[2] = 1;
"2207
[e = *U + &U _myvar * -> -> -> 2 `i `ui `ux -> -> # *U &U _myvar `ui `ux -> -> 1 `i `uc ]
[; ;ff.c: 2209: return vol;
"2209
[e ) _vol ]
[e $UE 250  ]
"2210
}
[e :U 256 ]
[; ;ff.c: 2210: }
[; ;ff.c: 2211: ld1 = 15;
"2211
[e = _ld1 -> -> 15 `i `uc ]
[; ;ff.c: 2213: vol = CurrVol;
"2213
[e = _vol -> _CurrVol `i ]
"2217
}
[e :U 251 ]
[; ;ff.c: 2217: }
[; ;ff.c: 2218: return vol;
"2218
[e ) _vol ]
[e $UE 250  ]
[; ;ff.c: 2219: }
"2219
[e :UE 250 ]
}
"2227
[v _chr `ui ~T0 @X0 1 e ]
[; ;ff.c: 2227: unsigned int chr;
"2228
[v _tfs `*S1 ~T0 @X0 1 e ]
[; ;ff.c: 2228: FATFS* tfs;
"2230
[v _check_fs `(uc ~T0 @X0 1 sf2`*S1`ul ]
"2234
{
[; ;ff.c: 2229: static
[; ;ff.c: 2230: BYTE check_fs (
[; ;ff.c: 2231: FATFS* fs,
[; ;ff.c: 2232: DWORD sect
[; ;ff.c: 2233: )
[; ;ff.c: 2234: {
[e :U _check_fs ]
"2231
[v _fs `*S1 ~T0 @X0 1 r1 ]
"2232
[v _sect `ul ~T0 @X0 1 r2 ]
"2234
[f ]
[; ;ff.c: 2235: chr = 1;
"2235
[e = _chr -> -> 1 `i `ui ]
[; ;ff.c: 2236: fs->wflag = 0; fs->winsect = 0xFFFFFFFF;
"2236
[e = . *U _fs 4 -> -> 0 `i `uc ]
[e = . *U _fs 17 -> -1 `ul ]
[; ;ff.c: 2237: if (move_window(fs, sect) != FR_OK)
"2237
[e $ ! != -> ( _move_window (2 , _fs _sect `i -> . `E67 0 `i 269  ]
[; ;ff.c: 2238: return 3;
"2238
[e ) -> -> 3 `i `uc ]
[e $UE 268  ]
[e :U 269 ]
[; ;ff.c: 2239: chr = 2;
"2239
[e = _chr -> -> 2 `i `ui ]
[; ;ff.c: 2240: if ((WORD)(((WORD)*((BYTE*)(&fs->win[510])+1)<<8)|(WORD)*(BYTE*)(&fs->win[510])) != 0xAA55)
"2240
[e $ ! != -> -> | << -> -> *U + &U *U + &U . *U _fs 18 * -> -> -> 510 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 1 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 510 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `us `ui -> 8 `i -> -> *U &U *U + &U . *U _fs 18 * -> -> -> 510 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `us `ui `us `ui -> 43605 `ui 270  ]
[; ;ff.c: 2241: return 2;
"2241
[e ) -> -> 2 `i `uc ]
[e $UE 268  ]
[e :U 270 ]
[; ;ff.c: 2242: chr = 3;
"2242
[e = _chr -> -> 3 `i `ui ]
[; ;ff.c: 2244: if (((DWORD)(((DWORD)*((BYTE*)(&fs->win[54])+3)<<24)|((DWORD)*((BYTE*)(&fs->win[54])+2)<<16)|((WORD)*((BYTE*)(&fs->win[54])+1)<<8)|*(BYTE*)(&fs->win[54])) & 0xFFFFFF) == 0x544146)
"2244
[e $ ! == & | | | << -> *U + &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 3 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `ul -> 24 `i << -> *U + &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 2 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `ul -> 16 `i -> << -> -> *U + &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 1 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `us `ui -> 8 `i `ul -> *U &U *U + &U . *U _fs 18 * -> -> -> 54 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `ul -> -> 16777215 `l `ul -> -> 5521734 `l `ul 271  ]
[; ;ff.c: 2245: {
"2245
{
[; ;ff.c: 2246: chr = 30;
"2246
[e = _chr -> -> 30 `i `ui ]
[; ;ff.c: 2247: return 0;
"2247
[e ) -> -> 0 `i `uc ]
[e $UE 268  ]
"2248
}
[e :U 271 ]
[; ;ff.c: 2248: }
[; ;ff.c: 2249: chr = 4;
"2249
[e = _chr -> -> 4 `i `ui ]
[; ;ff.c: 2250: if (((DWORD)(((DWORD)*((BYTE*)(&fs->win[82])+3)<<24)|((DWORD)*((BYTE*)(&fs->win[82])+2)<<16)|((WORD)*((BYTE*)(&fs->win[82])+1)<<8)|*(BYTE*)(&fs->win[82])) & 0xFFFFFF) == 0x544146)
"2250
[e $ ! == & | | | << -> *U + &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 3 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `ul -> 24 `i << -> *U + &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 2 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `ul -> 16 `i -> << -> -> *U + &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux * -> -> 1 `i `x -> -> # *U &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `i `x `us `ui -> 8 `i `ul -> *U &U *U + &U . *U _fs 18 * -> -> -> 82 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux `ul -> -> 16777215 `l `ul -> -> 5521734 `l `ul 272  ]
[; ;ff.c: 2251: return 0;
"2251
[e ) -> -> 0 `i `uc ]
[e $UE 268  ]
[e :U 272 ]
[; ;ff.c: 2252: chr = 5;
"2252
[e = _chr -> -> 5 `i `ui ]
[; ;ff.c: 2253: return 1;
"2253
[e ) -> -> 1 `i `uc ]
[e $UE 268  ]
[; ;ff.c: 2254: }
"2254
[e :UE 268 ]
}
"2262
[v _ch `ui ~T0 @X0 1 e ]
[; ;ff.c: 2262: unsigned int ch;
"2264
[v _find_volume `(E67 ~T0 @X0 1 sf3`**S1`**Cuc`uc ]
"2269
{
[; ;ff.c: 2263: static
[; ;ff.c: 2264: FRESULT find_volume (
[; ;ff.c: 2265: FATFS** rfs,
[; ;ff.c: 2266: const TCHAR** path,
[; ;ff.c: 2267: BYTE wmode
[; ;ff.c: 2268: )
[; ;ff.c: 2269: {
[e :U _find_volume ]
"2265
[v _rfs `**S1 ~T0 @X0 1 r1 ]
"2266
[v _path `**Cuc ~T0 @X0 1 r2 ]
"2267
[v _wmode `uc ~T0 @X0 1 r3 ]
"2269
[f ]
"2270
[v _fmt `uc ~T0 @X0 1 a ]
[v _pt `*uc ~T0 @X0 1 a ]
"2271
[v _vol `i ~T0 @X0 1 a ]
"2272
[v _stat `uc ~T0 @X0 1 a ]
"2273
[v _bsect `ul ~T0 @X0 1 a ]
[v _fasize `ul ~T0 @X0 1 a ]
[v _tsect `ul ~T0 @X0 1 a ]
[v _sysect `ul ~T0 @X0 1 a ]
[v _nclst `ul ~T0 @X0 1 a ]
[v _szbfat `ul ~T0 @X0 1 a ]
[v _br `ul ~T0 @X0 -> 4 `i a ]
"2274
[v _nrsv `us ~T0 @X0 1 a ]
"2275
[v _fs `*S1 ~T0 @X0 1 a ]
"2276
[v _i `ui ~T0 @X0 1 a ]
[; ;ff.c: 2270: BYTE fmt, *pt;
[; ;ff.c: 2271: int vol;
[; ;ff.c: 2272: DSTATUS stat;
[; ;ff.c: 2273: DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
[; ;ff.c: 2274: WORD nrsv;
[; ;ff.c: 2275: FATFS *fs;
[; ;ff.c: 2276: UINT i;
[; ;ff.c: 2278: ch = 23;
"2278
[e = _ch -> -> 23 `i `ui ]
[; ;ff.c: 2280: *rfs = 0;
"2280
[e = *U _rfs -> -> 0 `i `*S1 ]
[; ;ff.c: 2281: vol = get_ldnumber(path);
"2281
[e = _vol ( _get_ldnumber (1 _path ]
[; ;ff.c: 2282: if (vol < 0){ch = 25; return FR_INVALID_DRIVE;}
"2282
[e $ ! < _vol -> 0 `i 274  ]
{
[e = _ch -> -> 25 `i `ui ]
[e ) -> . `E67 11 `E67 ]
[e $UE 273  ]
}
[e :U 274 ]
[; ;ff.c: 2283: ch = 24;
"2283
[e = _ch -> -> 24 `i `ui ]
[; ;ff.c: 2285: fs = FatFs[vol];
"2285
[e = _fs *U + &U _FatFs * -> -> _vol `ui `ux -> -> # *U &U _FatFs `ui `ux ]
[; ;ff.c: 2286: if (!fs) return FR_NOT_ENABLED;
"2286
[e $ ! ! != _fs -> -> 0 `i `*S1 275  ]
[e ) -> . `E67 12 `E67 ]
[e $UE 273  ]
[e :U 275 ]
[; ;ff.c: 2287: ch = 26;
"2287
[e = _ch -> -> 26 `i `ui ]
[; ;ff.c: 2288: ;
[; ;ff.c: 2289: *rfs = fs;
"2289
[e = *U _rfs _fs ]
[; ;ff.c: 2290: ch = 27;
"2290
[e = _ch -> -> 27 `i `ui ]
[; ;ff.c: 2291: if (fs->fs_type) {
"2291
[e $ ! != -> . *U _fs 0 `i -> -> -> 0 `i `uc `i 276  ]
{
[; ;ff.c: 2292: stat = disk_status(fs->drv);
"2292
[e = _stat ( _disk_status (1 . *U _fs 1 ]
[; ;ff.c: 2293: if (!(stat & 0x01)) {
"2293
[e $ ! ! != & -> _stat `i -> 1 `i -> 0 `i 277  ]
{
[; ;ff.c: 2294: if (!0 && wmode && (stat & 0x04))
"2294
[e $ ! && && ! != -> 0 `i -> 0 `i != -> _wmode `i -> -> -> 0 `i `uc `i != & -> _stat `i -> 4 `i -> 0 `i 278  ]
[; ;ff.c: 2295: return FR_WRITE_PROTECTED;
"2295
[e ) -> . `E67 10 `E67 ]
[e $UE 273  ]
[e :U 278 ]
[; ;ff.c: 2296: return FR_OK;
"2296
[e ) -> . `E67 0 `E67 ]
[e $UE 273  ]
"2297
}
[e :U 277 ]
"2298
}
[e :U 276 ]
[; ;ff.c: 2297: }
[; ;ff.c: 2298: }
[; ;ff.c: 2299: ch = 28;
"2299
[e = _ch -> -> 28 `i `ui ]
[; ;ff.c: 2303: fs->fs_type = 0;
"2303
[e = . *U _fs 0 -> -> 0 `i `uc ]
[; ;ff.c: 2304: fs->drv = (BYTE)(vol);
"2304
[e = . *U _fs 1 -> _vol `uc ]
[; ;ff.c: 2305: stat = disk_initialize(fs->drv);
"2305
[e = _stat ( _disk_initialize (1 . *U _fs 1 ]
[; ;ff.c: 2306: if (stat & 0x01)
"2306
[e $ ! != & -> _stat `i -> 1 `i -> 0 `i 279  ]
[; ;ff.c: 2307: return FR_NOT_READY;
"2307
[e ) -> . `E67 3 `E67 ]
[e $UE 273  ]
[e :U 279 ]
[; ;ff.c: 2308: if (!0 && wmode && (stat & 0x04))
"2308
[e $ ! && && ! != -> 0 `i -> 0 `i != -> _wmode `i -> -> -> 0 `i `uc `i != & -> _stat `i -> 4 `i -> 0 `i 280  ]
[; ;ff.c: 2309: return FR_WRITE_PROTECTED;
"2309
[e ) -> . `E67 10 `E67 ]
[e $UE 273  ]
[e :U 280 ]
[; ;ff.c: 2310: ch = 29;
"2310
[e = _ch -> -> 29 `i `ui ]
[; ;ff.c: 2315: ch = 30;
"2315
[e = _ch -> -> 30 `i `ui ]
[; ;ff.c: 2317: bsect = 0;
"2317
[e = _bsect -> -> -> 0 `i `l `ul ]
[; ;ff.c: 2318: ch = fmt = check_fs(fs, bsect);
"2318
[e = _ch -> = _fmt ( _check_fs (2 , _fs _bsect `ui ]
[; ;ff.c: 2319: ch = 61;
"2319
[e = _ch -> -> 61 `i `ui ]
[; ;ff.c: 2320: if (fmt == 1 || (!fmt && (0))) {
"2320
[e $ ! || == -> _fmt `i -> 1 `i && ! != -> _fmt `i -> -> -> 0 `i `uc `i != -> 0 `i -> 0 `i 281  ]
{
[; ;ff.c: 2321: ch = 62;
"2321
[e = _ch -> -> 62 `i `ui ]
[; ;ff.c: 2322: for (i = 0; i < 4; i++) { ch = 36;
"2322
{
[e = _i -> -> 0 `i `ui ]
[e $ < _i -> -> 4 `i `ui 282  ]
[e $U 283  ]
[e :U 282 ]
{
[e = _ch -> -> 36 `i `ui ]
[; ;ff.c: 2323: pt = fs->win + 446 + i * 16;
"2323
[e = _pt + + &U . *U _fs 18 * -> -> 446 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> * _i -> -> 16 `i `ui `ux -> -> # *U + &U . *U _fs 18 * -> -> 446 `i `x -> -> # *U &U . *U _fs 18 `i `x `ui `ux ]
[; ;ff.c: 2324: br[i] = pt[4] ? (DWORD)(((DWORD)*((BYTE*)(&pt[8])+3)<<24)|((DWORD)*((BYTE*)(&pt[8])+2)<<16)|((WORD)*((BYTE*)(&pt[8])+1)<<8)|*(BYTE*)(&pt[8])) : 0;
"2324
[e = *U + &U _br * -> _i `ux -> -> # *U &U _br `ui `ux ? != -> *U + _pt * -> -> 4 `i `x -> -> # *U _pt `i `x `i -> -> -> 0 `i `uc `i : | | | << -> *U + &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x * -> -> 3 `i `x -> -> # *U &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x `i `x `ul -> 24 `i << -> *U + &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x * -> -> 2 `i `x -> -> # *U &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x `i `x `ul -> 16 `i -> << -> -> *U + &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x * -> -> 1 `i `x -> -> # *U &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x `i `x `us `ui -> 8 `i `ul -> *U &U *U + _pt * -> -> 8 `i `x -> -> # *U _pt `i `x `ul -> -> -> 0 `i `l `ul ]
"2325
}
"2322
[e ++ _i -> -> 1 `i `ui ]
[e $ < _i -> -> 4 `i `ui 282  ]
[e :U 283 ]
"2325
}
[; ;ff.c: 2325: }
[; ;ff.c: 2326: i = 0;
"2326
[e = _i -> -> 0 `i `ui ]
[; ;ff.c: 2327: if (i) i--;
"2327
[e $ ! != _i -> -> 0 `i `ui 285  ]
[e -- _i -> -> 1 `i `ui ]
[e :U 285 ]
[; ;ff.c: 2328: do { ch = 34;
"2328
[e :U 288 ]
{
[e = _ch -> -> 34 `i `ui ]
[; ;ff.c: 2330: bsect = br[i];
"2330
[e = _bsect *U + &U _br * -> _i `ux -> -> # *U &U _br `ui `ux ]
[; ;ff.c: 2331: fmt = bsect ? check_fs(fs, bsect) : 2;
"2331
[e = _fmt -> ? != _bsect -> -> 0 `i `ul : -> ( _check_fs (2 , _fs _bsect `i -> 2 `i `uc ]
"2332
}
[; ;ff.c: 2332: } while (!0 && fmt && ++i < 4);
[e $ && && ! != -> 0 `i -> 0 `i != -> _fmt `i -> -> -> 0 `i `uc `i < =+ _i -> -> 1 `i `ui -> -> 4 `i `ui 288  ]
[e :U 287 ]
"2333
}
[e :U 281 ]
[; ;ff.c: 2333: }
[; ;ff.c: 2334: ch = 32;
"2334
[e = _ch -> -> 32 `i `ui ]
[; ;ff.c: 2335: if (fmt == 3) return FR_DISK_ERR;
"2335
[e $ ! == -> _fmt `i -> 3 `i 289  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 273  ]
[e :U 289 ]
[; ;ff.c: 2336: if (fmt) return FR_NO_FILESYSTEM;
"2336
[e $ ! != -> _fmt `i -> -> -> 0 `i `uc `i 290  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 290 ]
[; ;ff.c: 2337: ch = 31;
"2337
[e = _ch -> -> 31 `i `ui ]
[; ;ff.c: 2340: if ((WORD)(((WORD)*((BYTE*)(fs->win + 11)+1)<<8)|(WORD)*(BYTE*)(fs->win + 11)) != ((UINT)512))
"2340
[e $ ! != -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 11 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 11 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 11 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ui -> -> 512 `i `ui 291  ]
[; ;ff.c: 2341: return FR_NO_FILESYSTEM;
"2341
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 291 ]
[; ;ff.c: 2342: ch = 88;
"2342
[e = _ch -> -> 88 `i `ui ]
[; ;ff.c: 2343: fasize = (WORD)(((WORD)*((BYTE*)(fs->win + 22)+1)<<8)|(WORD)*(BYTE*)(fs->win + 22));
"2343
[e = _fasize -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 22 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 22 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 22 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ul ]
[; ;ff.c: 2344: if (!fasize) fasize = (DWORD)(((DWORD)*((BYTE*)(fs->win + 36)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 36)+2)<<16)|((WORD)*((BYTE*)(fs->win + 36)+1)<<8)|*(BYTE*)(fs->win + 36));
"2344
[e $ ! ! != _fasize -> -> 0 `i `ul 292  ]
[e = _fasize | | | << -> *U + + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 36 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul ]
[e :U 292 ]
[; ;ff.c: 2345: fs->fsize = fasize;
"2345
[e = . *U _fs 12 _fasize ]
[; ;ff.c: 2346: ch = 89;
"2346
[e = _ch -> -> 89 `i `ui ]
[; ;ff.c: 2347: fs->n_fats = fs->win[16];
"2347
[e = . *U _fs 3 *U + &U . *U _fs 18 * -> -> -> 16 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 2348: if (fs->n_fats != 1 && fs->n_fats != 2)
"2348
[e $ ! && != -> . *U _fs 3 `i -> 1 `i != -> . *U _fs 3 `i -> 2 `i 293  ]
[; ;ff.c: 2349: return FR_NO_FILESYSTEM;
"2349
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 293 ]
[; ;ff.c: 2350: fasize *= fs->n_fats;
"2350
[e =* _fasize -> . *U _fs 3 `ul ]
[; ;ff.c: 2351: ch = 90;
"2351
[e = _ch -> -> 90 `i `ui ]
[; ;ff.c: 2352: fs->csize = fs->win[13];
"2352
[e = . *U _fs 2 *U + &U . *U _fs 18 * -> -> -> 13 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 2353: if (!fs->csize || (fs->csize & (fs->csize - 1)))
"2353
[e $ ! || ! != -> . *U _fs 2 `i -> -> -> 0 `i `uc `i != & -> . *U _fs 2 `i - -> . *U _fs 2 `i -> 1 `i -> 0 `i 294  ]
[; ;ff.c: 2354: return FR_NO_FILESYSTEM;
"2354
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 294 ]
[; ;ff.c: 2355: ch = 91;
"2355
[e = _ch -> -> 91 `i `ui ]
[; ;ff.c: 2356: fs->n_rootdir = (WORD)(((WORD)*((BYTE*)(fs->win + 17)+1)<<8)|(WORD)*(BYTE*)(fs->win + 17));
"2356
[e = . *U _fs 7 -> | << -> -> *U + + &U . *U _fs 18 * -> -> 17 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 17 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 17 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us ]
[; ;ff.c: 2357: if (fs->n_rootdir % (((UINT)512) / 32))
"2357
[e $ ! != % -> . *U _fs 7 `ui / -> -> 512 `i `ui -> -> 32 `i `ui -> -> 0 `i `ui 295  ]
[; ;ff.c: 2358: return FR_NO_FILESYSTEM;
"2358
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 295 ]
[; ;ff.c: 2359: ch = 92;
"2359
[e = _ch -> -> 92 `i `ui ]
[; ;ff.c: 2360: tsect = (WORD)(((WORD)*((BYTE*)(fs->win + 19)+1)<<8)|(WORD)*(BYTE*)(fs->win + 19));
"2360
[e = _tsect -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 19 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 19 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 19 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ul ]
[; ;ff.c: 2361: if (!tsect) tsect = (DWORD)(((DWORD)*((BYTE*)(fs->win + 32)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 32)+2)<<16)|((WORD)*((BYTE*)(fs->win + 32)+1)<<8)|*(BYTE*)(fs->win + 32));
"2361
[e $ ! ! != _tsect -> -> 0 `i `ul 296  ]
[e = _tsect | | | << -> *U + + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 32 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul ]
[e :U 296 ]
[; ;ff.c: 2362: ch = 93;
"2362
[e = _ch -> -> 93 `i `ui ]
[; ;ff.c: 2363: nrsv = (WORD)(((WORD)*((BYTE*)(fs->win + 14)+1)<<8)|(WORD)*(BYTE*)(fs->win + 14));
"2363
[e = _nrsv -> | << -> -> *U + + &U . *U _fs 18 * -> -> 14 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 14 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 14 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us ]
[; ;ff.c: 2364: if (!nrsv) return FR_NO_FILESYSTEM;
"2364
[e $ ! ! != -> _nrsv `ui -> -> -> 0 `i `us `ui 297  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 297 ]
[; ;ff.c: 2365: ch = 94;
"2365
[e = _ch -> -> 94 `i `ui ]
[; ;ff.c: 2367: sysect = nrsv + fasize + fs->n_rootdir / (((UINT)512) / 32);
"2367
[e = _sysect + + -> _nrsv `ul _fasize -> / -> . *U _fs 7 `ui / -> -> 512 `i `ui -> -> 32 `i `ui `ul ]
[; ;ff.c: 2368: if (tsect < sysect) return FR_NO_FILESYSTEM;
"2368
[e $ ! < _tsect _sysect 298  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 298 ]
[; ;ff.c: 2369: nclst = (tsect - sysect) / fs->csize;
"2369
[e = _nclst / - _tsect _sysect -> . *U _fs 2 `ul ]
[; ;ff.c: 2370: if (!nclst) return FR_NO_FILESYSTEM;
"2370
[e $ ! ! != _nclst -> -> 0 `i `ul 299  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 299 ]
[; ;ff.c: 2371: fmt = 1;
"2371
[e = _fmt -> -> 1 `i `uc ]
[; ;ff.c: 2372: if (nclst >= 4086U) fmt = 2;
"2372
[e $ ! >= _nclst -> -> 4086 `ui `ul 300  ]
[e = _fmt -> -> 2 `i `uc ]
[e :U 300 ]
[; ;ff.c: 2373: if (nclst >= 65526U) fmt = 3;
"2373
[e $ ! >= _nclst -> -> 65526 `ui `ul 301  ]
[e = _fmt -> -> 3 `i `uc ]
[e :U 301 ]
[; ;ff.c: 2374: ch = 95;
"2374
[e = _ch -> -> 95 `i `ui ]
[; ;ff.c: 2376: fs->n_fatent = nclst + 2;
"2376
[e = . *U _fs 11 + _nclst -> -> -> 2 `i `l `ul ]
[; ;ff.c: 2377: fs->volbase = bsect;
"2377
[e = . *U _fs 13 _bsect ]
[; ;ff.c: 2378: fs->fatbase = bsect + nrsv;
"2378
[e = . *U _fs 14 + _bsect -> _nrsv `ul ]
[; ;ff.c: 2379: fs->database = bsect + sysect;
"2379
[e = . *U _fs 16 + _bsect _sysect ]
[; ;ff.c: 2380: if (fmt == 3) {
"2380
[e $ ! == -> _fmt `i -> 3 `i 302  ]
{
[; ;ff.c: 2381: if (fs->n_rootdir) return FR_NO_FILESYSTEM;
"2381
[e $ ! != -> . *U _fs 7 `ui -> -> -> 0 `i `us `ui 303  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 303 ]
[; ;ff.c: 2382: fs->dirbase = (DWORD)(((DWORD)*((BYTE*)(fs->win + 44)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 44)+2)<<16)|((WORD)*((BYTE*)(fs->win + 44)+1)<<8)|*(BYTE*)(fs->win + 44));
"2382
[e = . *U _fs 15 | | | << -> *U + + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 44 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul ]
[; ;ff.c: 2383: szbfat = fs->n_fatent * 4;
"2383
[e = _szbfat * . *U _fs 11 -> -> -> 4 `i `l `ul ]
"2384
}
[; ;ff.c: 2384: } else {
[e $U 304  ]
[e :U 302 ]
{
[; ;ff.c: 2385: if (!fs->n_rootdir) return FR_NO_FILESYSTEM;
"2385
[e $ ! ! != -> . *U _fs 7 `ui -> -> -> 0 `i `us `ui 305  ]
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 305 ]
[; ;ff.c: 2386: fs->dirbase = fs->fatbase + fasize;
"2386
[e = . *U _fs 15 + . *U _fs 14 _fasize ]
[; ;ff.c: 2387: szbfat = (fmt == 2) ?
[; ;ff.c: 2388: fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
"2388
[e = _szbfat ? == -> _fmt `i -> 2 `i : * . *U _fs 11 -> -> -> 2 `i `l `ul + / * . *U _fs 11 -> -> -> 3 `i `l `ul -> -> -> 2 `i `l `ul & . *U _fs 11 -> -> -> 1 `i `l `ul ]
"2389
}
[e :U 304 ]
[; ;ff.c: 2389: }
[; ;ff.c: 2390: if (fs->fsize < (szbfat + (((UINT)512) - 1)) / ((UINT)512))
"2390
[e $ ! < . *U _fs 12 / + _szbfat -> - -> -> 512 `i `ui -> -> 1 `i `ui `ul -> -> -> 512 `i `ui `ul 306  ]
[; ;ff.c: 2391: return FR_NO_FILESYSTEM;
"2391
[e ) -> . `E67 13 `E67 ]
[e $UE 273  ]
[e :U 306 ]
[; ;ff.c: 2392: ch = 96;
"2392
[e = _ch -> -> 96 `i `ui ]
[; ;ff.c: 2395: fs->last_clust = fs->free_clust = 0xFFFFFFFF;
"2395
[e = . *U _fs 8 = . *U _fs 9 -> -1 `ul ]
[; ;ff.c: 2396: ch = 97;
"2396
[e = _ch -> -> 97 `i `ui ]
[; ;ff.c: 2398: fs->fsi_flag = 0x80;
"2398
[e = . *U _fs 5 -> -> 128 `i `uc ]
[; ;ff.c: 2400: if (fmt == 3
[; ;ff.c: 2401: && (WORD)(((WORD)*((BYTE*)(fs->win + 48)+1)<<8)|(WORD)*(BYTE*)(fs->win + 48)) == 1
[; ;ff.c: 2402: && move_window(fs, bsect + 1) == FR_OK)
"2402
[e $ ! && && == -> _fmt `i -> 3 `i == -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 48 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 48 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 48 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ui -> -> 1 `i `ui == -> ( _move_window (2 , _fs + _bsect -> -> -> 1 `i `l `ul `i -> . `E67 0 `i 307  ]
[; ;ff.c: 2403: {
"2403
{
[; ;ff.c: 2404: fs->fsi_flag = 0;
"2404
[e = . *U _fs 5 -> -> 0 `i `uc ]
[; ;ff.c: 2405: if ((WORD)(((WORD)*((BYTE*)(fs->win + 510)+1)<<8)|(WORD)*(BYTE*)(fs->win + 510)) == 0xAA55
[; ;ff.c: 2406: && (DWORD)(((DWORD)*((BYTE*)(fs->win + 0)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 0)+2)<<16)|((WORD)*((BYTE*)(fs->win + 0)+1)<<8)|*(BYTE*)(fs->win + 0)) == 0x41615252
[; ;ff.c: 2407: && (DWORD)(((DWORD)*((BYTE*)(fs->win + 484)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 484)+2)<<16)|((WORD)*((BYTE*)(fs->win + 484)+1)<<8)|*(BYTE*)(fs->win + 484)) == 0x61417272)
"2407
[e $ ! && && == -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ui -> 43605 `ui == | | | << -> *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 0 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul -> -> 1096897106 `l `ul == | | | << -> *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 484 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul -> -> 1631679090 `l `ul 308  ]
[; ;ff.c: 2408: {
"2408
{
[; ;ff.c: 2410: fs->free_clust = (DWORD)(((DWORD)*((BYTE*)(fs->win + 488)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 488)+2)<<16)|((WORD)*((BYTE*)(fs->win + 488)+1)<<8)|*(BYTE*)(fs->win + 488));
"2410
[e = . *U _fs 9 | | | << -> *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 488 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul ]
[; ;ff.c: 2413: fs->last_clust = (DWORD)(((DWORD)*((BYTE*)(fs->win + 492)+3)<<24)|((DWORD)*((BYTE*)(fs->win + 492)+2)<<16)|((WORD)*((BYTE*)(fs->win + 492)+1)<<8)|*(BYTE*)(fs->win + 492));
"2413
[e = . *U _fs 8 | | | << -> *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 3 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 24 `i << -> *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 2 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `ul -> 16 `i -> << -> -> *U + + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i `ul -> *U + &U . *U _fs 18 * -> -> 492 `i `x -> -> # *U &U . *U _fs 18 `i `x `ul ]
"2415
}
[e :U 308 ]
"2416
}
[e :U 307 ]
[; ;ff.c: 2415: }
[; ;ff.c: 2416: }
[; ;ff.c: 2419: fs->fs_type = fmt;
"2419
[e = . *U _fs 0 _fmt ]
[; ;ff.c: 2420: fs->id = ++Fsid;
"2420
[e = . *U _fs 6 =+ _Fsid -> -> 1 `i `us ]
[; ;ff.c: 2422: fs->cdir = 0;
"2422
[e = . *U _fs 10 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 2428: return FR_OK;
"2428
[e ) -> . `E67 0 `E67 ]
[e $UE 273  ]
[; ;ff.c: 2429: }
"2429
[e :UE 273 ]
}
"2439
[v _validate `(E67 ~T0 @X0 1 sf1`*v ]
"2442
{
[; ;ff.c: 2438: static
[; ;ff.c: 2439: FRESULT validate (
[; ;ff.c: 2440: void* obj
[; ;ff.c: 2441: )
[; ;ff.c: 2442: {
[e :U _validate ]
"2440
[v _obj `*v ~T0 @X0 1 r1 ]
"2442
[f ]
"2443
[v _fil `*S2 ~T0 @X0 1 a ]
[; ;ff.c: 2443: FIL *fil = (FIL*)obj;
[e = _fil -> _obj `*S2 ]
[; ;ff.c: 2446: if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id || (disk_status(fil->fs->drv) & 0x01))
"2446
[e $ ! || || || || ! != _fil -> -> 0 `i `*S2 ! != . *U _fil 0 -> -> 0 `i `*S1 ! != -> . *U . *U _fil 0 0 `i -> -> -> 0 `i `uc `i != -> . *U . *U _fil 0 6 `ui -> . *U _fil 1 `ui != & -> ( _disk_status (1 . *U . *U _fil 0 1 `i -> 1 `i -> 0 `i 310  ]
[; ;ff.c: 2447: return FR_INVALID_OBJECT;
"2447
[e ) -> . `E67 9 `E67 ]
[e $UE 309  ]
[e :U 310 ]
[; ;ff.c: 2449: ;
[; ;ff.c: 2451: return FR_OK;
"2451
[e ) -> . `E67 0 `E67 ]
[e $UE 309  ]
[; ;ff.c: 2452: }
"2452
[e :UE 309 ]
}
"2468
[v _Tfs `*S1 ~T0 @X0 1 e ]
[; ;ff.c: 2468: FATFS *Tfs;
"2469
[v _Tvol `*i ~T0 @X0 1 e ]
[; ;ff.c: 2469: int *Tvol;
"2470
[v _Tres `*E67 ~T0 @X0 1 e ]
[; ;ff.c: 2470: FRESULT *Tres;
"2471
[v _Trp `*uc ~T0 @X0 1 e ]
[; ;ff.c: 2471: TCHAR *Trp;
"2474
[v _AB1 `uc ~T0 @X0 1 e ]
[v _AB2 `uc ~T0 @X0 1 e ]
[v _AB3 `uc ~T0 @X0 1 e ]
[; ;ff.c: 2474: unsigned char AB1,AB2,AB3;
"2475
[v _f_mount `(E67 ~T0 @X0 1 ef3`*S1`*Cuc`uc ]
"2480
{
[; ;ff.c: 2475: FRESULT f_mount (
[; ;ff.c: 2476: FATFS* fs,
[; ;ff.c: 2477: const TCHAR* path,
[; ;ff.c: 2478: BYTE opt
[; ;ff.c: 2479: )
[; ;ff.c: 2480: {
[e :U _f_mount ]
"2476
[v _fs `*S1 ~T0 @X0 1 r1 ]
"2477
[v _path `*Cuc ~T0 @X0 1 r2 ]
"2478
[v _opt `uc ~T0 @X0 1 r3 ]
"2480
[f ]
"2481
[v _cfs `*S1 ~T0 @X0 1 a ]
"2482
[v _vol `i ~T0 @X0 1 a ]
"2483
[v _res `E67 ~T0 @X0 1 a ]
"2484
[v _rp `*Cuc ~T0 @X0 1 a ]
[; ;ff.c: 2481: FATFS *cfs;
[; ;ff.c: 2482: int vol;
[; ;ff.c: 2483: FRESULT res;
[; ;ff.c: 2484: const TCHAR *rp = path;
[e = _rp _path ]
[; ;ff.c: 2486: Tfs = cfs;
"2486
[e = _Tfs _cfs ]
[; ;ff.c: 2487: Tvol = &vol;
"2487
[e = _Tvol &U _vol ]
[; ;ff.c: 2488: Tres = &res;
"2488
[e = _Tres &U _res ]
[; ;ff.c: 2489: Trp = (TCHAR *)rp;
"2489
[e = _Trp -> _rp `*uc ]
[; ;ff.c: 2491: AB1 = 1;
"2491
[e = _AB1 -> -> 1 `i `uc ]
[; ;ff.c: 2492: AB2 = vol = get_ldnumber(&rp);
"2492
[e = _AB2 -> = _vol ( _get_ldnumber (1 &U _rp `uc ]
[; ;ff.c: 2493: if (vol < 0) return FR_INVALID_DRIVE;
"2493
[e $ ! < _vol -> 0 `i 312  ]
[e ) -> . `E67 11 `E67 ]
[e $UE 311  ]
[e :U 312 ]
[; ;ff.c: 2494: cfs = FatFs[vol];
"2494
[e = _cfs *U + &U _FatFs * -> -> _vol `ui `ux -> -> # *U &U _FatFs `ui `ux ]
[; ;ff.c: 2496: if (cfs) {
"2496
[e $ ! != _cfs -> -> 0 `i `*S1 313  ]
{
[; ;ff.c: 2497: AB3 = 1;
"2497
[e = _AB3 -> -> 1 `i `uc ]
[; ;ff.c: 2504: cfs->fs_type = 0;
"2504
[e = . *U _cfs 0 -> -> 0 `i `uc ]
"2505
}
[e :U 313 ]
[; ;ff.c: 2505: }
[; ;ff.c: 2507: if (fs) {
"2507
[e $ ! != _fs -> -> 0 `i `*S1 314  ]
{
[; ;ff.c: 2508: AB3 =2;
"2508
[e = _AB3 -> -> 2 `i `uc ]
[; ;ff.c: 2509: fs->fs_type = 0;
"2509
[e = . *U _fs 0 -> -> 0 `i `uc ]
"2513
}
[e :U 314 ]
[; ;ff.c: 2513: }
[; ;ff.c: 2514: FatFs[vol] = fs;
"2514
[e = *U + &U _FatFs * -> -> _vol `ui `ux -> -> # *U &U _FatFs `ui `ux _fs ]
[; ;ff.c: 2516: if (!fs || opt != 1) return FR_OK;
"2516
[e $ ! || ! != _fs -> -> 0 `i `*S1 != -> _opt `i -> 1 `i 315  ]
[e ) -> . `E67 0 `E67 ]
[e $UE 311  ]
[e :U 315 ]
[; ;ff.c: 2517: AB3 =5;
"2517
[e = _AB3 -> -> 5 `i `uc ]
[; ;ff.c: 2518: AB1 = res = find_volume(&fs, &path, 0);
"2518
[e = _AB1 -> = _res ( _find_volume (3 , , &U _fs &U _path -> -> 0 `i `uc `uc ]
[; ;ff.c: 2519: AB3 =6;
"2519
[e = _AB3 -> -> 6 `i `uc ]
[; ;ff.c: 2520: return res;
"2520
[e ) _res ]
[e $UE 311  ]
[; ;ff.c: 2521: }
"2521
[e :UE 311 ]
}
"2529
[v _abc `ui ~T0 @X0 1 e ]
[; ;ff.c: 2529: unsigned int abc;
"2532
[v _f_open `(E67 ~T0 @X0 1 ef3`*S2`*Cuc`uc ]
"2537
{
[; ;ff.c: 2532: FRESULT f_open (
[; ;ff.c: 2533: FIL* fp,
[; ;ff.c: 2534: const TCHAR* path,
[; ;ff.c: 2535: BYTE mode
[; ;ff.c: 2536: )
[; ;ff.c: 2537: {
[e :U _f_open ]
"2533
[v _fp `*S2 ~T0 @X0 1 r1 ]
"2534
[v _path `*Cuc ~T0 @X0 1 r2 ]
"2535
[v _mode `uc ~T0 @X0 1 r3 ]
"2537
[f ]
"2538
[v _res `E67 ~T0 @X0 1 a ]
"2539
[v _dj `S3 ~T0 @X0 1 a ]
"2540
[v _dir `*uc ~T0 @X0 1 a ]
"2541
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
"2543
[v _dw `ul ~T0 @X0 1 a ]
[v _cl `ul ~T0 @X0 1 a ]
[; ;ff.c: 2538: FRESULT res;
[; ;ff.c: 2539: DIR dj;
[; ;ff.c: 2540: BYTE *dir;
[; ;ff.c: 2541: BYTE sfn[12];
[; ;ff.c: 2543: DWORD dw, cl;
[; ;ff.c: 2546: abc = 12;
"2546
[e = _abc -> -> 12 `i `ui ]
[; ;ff.c: 2547: if (!fp) return FR_INVALID_OBJECT;
"2547
[e $ ! ! != _fp -> -> 0 `i `*S2 317  ]
[e ) -> . `E67 9 `E67 ]
[e $UE 316  ]
[e :U 317 ]
[; ;ff.c: 2548: fp->fs = 0;
"2548
[e = . *U _fp 0 -> -> 0 `i `*S1 ]
[; ;ff.c: 2549: abc++;
"2549
[e ++ _abc -> -> 1 `i `ui ]
[; ;ff.c: 2552: abc = 61;
"2552
[e = _abc -> -> 61 `i `ui ]
[; ;ff.c: 2553: mode &= 0x01 | 0x02 | 0x08 | 0x10 | 0x04;
"2553
[e =& _mode -> | | | | -> 1 `i -> 2 `i -> 8 `i -> 16 `i -> 4 `i `uc ]
[; ;ff.c: 2554: res = find_volume(&dj.fs, &path, (BYTE)(mode & ~0x01));
"2554
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> & -> _mode `i ~ -> 1 `i `uc ]
[; ;ff.c: 2561: abc++;
"2561
[e ++ _abc -> -> 1 `i `ui ]
[; ;ff.c: 2562: if (res == FR_OK) {
"2562
[e $ ! == -> _res `i -> . `E67 0 `i 318  ]
{
[; ;ff.c: 2563: abc = 96;
"2563
[e = _abc -> -> 96 `i `ui ]
[; ;ff.c: 2564: (dj).fn = sfn;
"2564
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 2565: res = follow_path(&dj, path);
"2565
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 2566: dir = dj.dir;
"2566
[e = _dir . _dj 6 ]
[; ;ff.c: 2568: if (res == FR_OK) {
"2568
[e $ ! == -> _res `i -> . `E67 0 `i 319  ]
{
[; ;ff.c: 2569: abc = 97;
"2569
[e = _abc -> -> 97 `i `ui ]
[; ;ff.c: 2570: if (!dir)
"2570
[e $ ! ! != _dir -> -> 0 `i `*uc 320  ]
[; ;ff.c: 2571: res = FR_INVALID_NAME;
"2571
[e = _res -> . `E67 6 `E67 ]
[e :U 320 ]
"2576
}
[e :U 319 ]
[; ;ff.c: 2576: }
[; ;ff.c: 2577: abc++;
"2577
[e ++ _abc -> -> 1 `i `ui ]
[; ;ff.c: 2579: if (mode & (0x08 | 0x10 | 0x04)) {
"2579
[e $ ! != & -> _mode `i | | -> 8 `i -> 16 `i -> 4 `i -> 0 `i 321  ]
{
[; ;ff.c: 2580: abc = 98;
"2580
[e = _abc -> -> 98 `i `ui ]
[; ;ff.c: 2581: if (res != FR_OK) { abc = 133;
"2581
[e $ ! != -> _res `i -> . `E67 0 `i 322  ]
{
[e = _abc -> -> 133 `i `ui ]
[; ;ff.c: 2582: if (res == FR_NO_FILE)
"2582
[e $ ! == -> _res `i -> . `E67 4 `i 323  ]
[; ;ff.c: 2586: res = dir_register(&dj);
"2586
[e = _res ( _dir_register (1 &U _dj ]
[e :U 323 ]
[; ;ff.c: 2588: mode |= 0x08;
"2588
[e =| _mode -> -> 8 `i `uc ]
[; ;ff.c: 2589: dir = dj.dir; abc = 157;
"2589
[e = _dir . _dj 6 ]
[e = _abc -> -> 157 `i `ui ]
"2590
}
[; ;ff.c: 2590: }
[e $U 324  ]
"2591
[e :U 322 ]
[; ;ff.c: 2591: else { abc = 134;
{
[e = _abc -> -> 134 `i `ui ]
[; ;ff.c: 2592: if (dir[11] & (0x01 | 0x10)) {
"2592
[e $ ! != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i | -> 1 `i -> 16 `i -> 0 `i 325  ]
{
[; ;ff.c: 2593: res = FR_DENIED;
"2593
[e = _res -> . `E67 7 `E67 ]
"2594
}
[; ;ff.c: 2594: } else {
[e $U 326  ]
[e :U 325 ]
{
[; ;ff.c: 2595: if (mode & 0x04)
"2595
[e $ ! != & -> _mode `i -> 4 `i -> 0 `i 327  ]
[; ;ff.c: 2596: res = FR_EXIST;
"2596
[e = _res -> . `E67 8 `E67 ]
[e :U 327 ]
"2597
}
[e :U 326 ]
"2598
}
[e :U 324 ]
[; ;ff.c: 2597: }
[; ;ff.c: 2598: }
[; ;ff.c: 2599: if (res == FR_OK && (mode & 0x08)) { abc = 136;
"2599
[e $ ! && == -> _res `i -> . `E67 0 `i != & -> _mode `i -> 8 `i -> 0 `i 328  ]
{
[e = _abc -> -> 136 `i `ui ]
[; ;ff.c: 2600: dw = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
"2600
[e = _dw | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
[; ;ff.c: 2601: *(BYTE*)(dir + 14)=(BYTE)(dw); *((BYTE*)(dir + 14)+1)=(BYTE)((WORD)(dw)>>8); *((BYTE*)(dir + 14)+2)=(BYTE)((DWORD)(dw)>>16); *((BYTE*)(dir + 14)+3)=(BYTE)((DWORD)(dw)>>24);
"2601
[e = *U + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x -> _dw `uc ]
[e = *U + + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _dw `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x `i `x -> >> _dw -> 16 `i `uc ]
[e = *U + + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 14 `i `x -> -> # *U _dir `i `x `i `x -> >> _dw -> 24 `i `uc ]
[; ;ff.c: 2602: *(BYTE*)(dir + 22)=(BYTE)(dw); *((BYTE*)(dir + 22)+1)=(BYTE)((WORD)(dw)>>8); *((BYTE*)(dir + 22)+2)=(BYTE)((DWORD)(dw)>>16); *((BYTE*)(dir + 22)+3)=(BYTE)((DWORD)(dw)>>24);
"2602
[e = *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x -> _dw `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _dw `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _dw -> 16 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _dw -> 24 `i `uc ]
[; ;ff.c: 2603: dir[11] = 0;
"2603
[e = *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> -> 0 `i `uc ]
[; ;ff.c: 2604: *(BYTE*)(dir + 28)=(BYTE)(0); *((BYTE*)(dir + 28)+1)=(BYTE)((WORD)(0)>>8); *((BYTE*)(dir + 28)+2)=(BYTE)((DWORD)(0)>>16); *((BYTE*)(dir + 28)+3)=(BYTE)((DWORD)(0)>>24);
"2604
[e = *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x -> -> 0 `i `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> -> 0 `i `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> 0 `i `ul -> 16 `i `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> 0 `i `ul -> 24 `i `uc ]
[; ;ff.c: 2605: cl = ld_clust(dj.fs, dir);
"2605
[e = _cl ( _ld_clust (2 , . _dj 0 -> _dir `*Cuc ]
[; ;ff.c: 2606: st_clust(dir, 0);
"2606
[e ( _st_clust (2 , _dir -> -> -> 0 `i `l `ul ]
[; ;ff.c: 2607: dj.fs->wflag = 1;
"2607
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 2608: if (cl) {
"2608
[e $ ! != _cl -> -> 0 `i `ul 329  ]
{
[; ;ff.c: 2609: dw = dj.fs->winsect;
"2609
[e = _dw . *U . _dj 0 17 ]
[; ;ff.c: 2610: res = remove_chain(dj.fs, cl);
"2610
[e = _res ( _remove_chain (2 , . _dj 0 _cl ]
[; ;ff.c: 2611: if (res == FR_OK) {
"2611
[e $ ! == -> _res `i -> . `E67 0 `i 330  ]
{
[; ;ff.c: 2612: dj.fs->last_clust = cl - 1;
"2612
[e = . *U . _dj 0 8 - _cl -> -> -> 1 `i `l `ul ]
[; ;ff.c: 2613: res = move_window(dj.fs, dw);
"2613
[e = _res ( _move_window (2 , . _dj 0 _dw ]
"2614
}
[e :U 330 ]
"2615
}
[e :U 329 ]
"2616
}
[e :U 328 ]
"2617
}
[; ;ff.c: 2614: }
[; ;ff.c: 2615: }
[; ;ff.c: 2616: }
[; ;ff.c: 2617: }
[e $U 331  ]
"2618
[e :U 321 ]
[; ;ff.c: 2618: else { abc = 99;
{
[e = _abc -> -> 99 `i `ui ]
[; ;ff.c: 2619: if (res == FR_OK) {
"2619
[e $ ! == -> _res `i -> . `E67 0 `i 332  ]
{
[; ;ff.c: 2620: if (dir[11] & 0x10) {
"2620
[e $ ! != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 16 `i -> 0 `i 333  ]
{
[; ;ff.c: 2621: res = FR_NO_FILE;
"2621
[e = _res -> . `E67 4 `E67 ]
"2622
}
[; ;ff.c: 2622: } else {
[e $U 334  ]
[e :U 333 ]
{
[; ;ff.c: 2623: if ((mode & 0x02) && (dir[11] & 0x01))
"2623
[e $ ! && != & -> _mode `i -> 2 `i -> 0 `i != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 1 `i -> 0 `i 335  ]
[; ;ff.c: 2624: res = FR_DENIED;
"2624
[e = _res -> . `E67 7 `E67 ]
[e :U 335 ]
"2625
}
[e :U 334 ]
"2626
}
[e :U 332 ]
"2627
}
[e :U 331 ]
[; ;ff.c: 2625: }
[; ;ff.c: 2626: }
[; ;ff.c: 2627: }
[; ;ff.c: 2628: if (res == FR_OK) { abc = 125;
"2628
[e $ ! == -> _res `i -> . `E67 0 `i 336  ]
{
[e = _abc -> -> 125 `i `ui ]
[; ;ff.c: 2629: if (mode & 0x08)
"2629
[e $ ! != & -> _mode `i -> 8 `i -> 0 `i 337  ]
[; ;ff.c: 2630: mode |= 0x20;
"2630
[e =| _mode -> -> 32 `i `uc ]
[e :U 337 ]
[; ;ff.c: 2631: fp->dir_sect = dj.fs->winsect;
"2631
[e = . *U _fp 9 . *U . _dj 0 17 ]
[; ;ff.c: 2632: fp->dir_ptr = dir;
"2632
[e = . *U _fp 10 _dir ]
"2637
}
[e :U 336 ]
[; ;ff.c: 2637: }
[; ;ff.c: 2651: ;
[; ;ff.c: 2653: if (res == FR_OK) { abc = 127;
"2653
[e $ ! == -> _res `i -> . `E67 0 `i 338  ]
{
[e = _abc -> -> 127 `i `ui ]
[; ;ff.c: 2654: fp->flag = mode;
"2654
[e = . *U _fp 2 _mode ]
[; ;ff.c: 2655: fp->err = 0;
"2655
[e = . *U _fp 3 -> -> 0 `i `uc ]
[; ;ff.c: 2656: fp->sclust = ld_clust(dj.fs, dir);
"2656
[e = . *U _fp 6 ( _ld_clust (2 , . _dj 0 -> _dir `*Cuc ]
[; ;ff.c: 2657: fp->fsize = (DWORD)(((DWORD)*((BYTE*)(dir + 28)+3)<<24)|((DWORD)*((BYTE*)(dir + 28)+2)<<16)|((WORD)*((BYTE*)(dir + 28)+1)<<8)|*(BYTE*)(dir + 28));
"2657
[e = . *U _fp 5 | | | << -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `ul -> 24 `i << -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `ul -> 16 `i -> << -> -> *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x `us `ui -> 8 `i `ul -> *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `ul ]
[; ;ff.c: 2658: fp->fptr = 0;
"2658
[e = . *U _fp 4 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 2659: fp->dsect = 0;
"2659
[e = . *U _fp 8 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 2661: fp->cltbl = 0;
"2661
[e = . *U _fp 11 -> -> 0 `i `*ul ]
[; ;ff.c: 2663: fp->fs = dj.fs;
"2663
[e = . *U _fp 0 . _dj 0 ]
[; ;ff.c: 2664: fp->id = fp->fs->id;
"2664
[e = . *U _fp 1 . *U . *U _fp 0 6 ]
"2665
}
[e :U 338 ]
"2666
}
[e :U 318 ]
[; ;ff.c: 2665: }
[; ;ff.c: 2666: }
[; ;ff.c: 2668: return res;
"2668
[e ) _res ]
[e $UE 316  ]
[; ;ff.c: 2669: }
"2669
[e :UE 316 ]
}
"2678
[v _f_read `(E67 ~T0 @X0 1 ef4`*S2`*v`ui`*ui ]
"2684
{
[; ;ff.c: 2678: FRESULT f_read (
[; ;ff.c: 2679: FIL* fp,
[; ;ff.c: 2680: void* buff,
[; ;ff.c: 2681: UINT btr,
[; ;ff.c: 2682: UINT* br
[; ;ff.c: 2683: )
[; ;ff.c: 2684: {
[e :U _f_read ]
"2679
[v _fp `*S2 ~T0 @X0 1 r1 ]
"2680
[v _buff `*v ~T0 @X0 1 r2 ]
"2681
[v _btr `ui ~T0 @X0 1 r3 ]
"2682
[v _br `*ui ~T0 @X0 1 r4 ]
"2684
[f ]
"2685
[v _res `E67 ~T0 @X0 1 a ]
"2686
[v _clst `ul ~T0 @X0 1 a ]
[v _sect `ul ~T0 @X0 1 a ]
[v _remain `ul ~T0 @X0 1 a ]
"2687
[v _rcnt `ui ~T0 @X0 1 a ]
[v _cc `ui ~T0 @X0 1 a ]
"2688
[v _csect `uc ~T0 @X0 1 a ]
[v _rbuff `*uc ~T0 @X0 1 a ]
[; ;ff.c: 2685: FRESULT res;
[; ;ff.c: 2686: DWORD clst, sect, remain;
[; ;ff.c: 2687: UINT rcnt, cc;
[; ;ff.c: 2688: BYTE csect, *rbuff = (BYTE*)buff;
[e = _rbuff -> _buff `*uc ]
[; ;ff.c: 2691: *br = 0;
"2691
[e = *U _br -> -> 0 `i `ui ]
[; ;ff.c: 2693: res = validate(fp);
"2693
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 2694: if (res != FR_OK) return res;
"2694
[e $ ! != -> _res `i -> . `E67 0 `i 340  ]
[e ) _res ]
[e $UE 339  ]
[e :U 340 ]
[; ;ff.c: 2695: if (fp->err)
"2695
[e $ ! != -> . *U _fp 3 `i -> -> -> 0 `i `uc `i 341  ]
[; ;ff.c: 2696: return (FRESULT)fp->err;
"2696
[e ) -> . *U _fp 3 `E67 ]
[e $UE 339  ]
[e :U 341 ]
[; ;ff.c: 2697: if (!(fp->flag & 0x01))
"2697
[e $ ! ! != & -> . *U _fp 2 `i -> 1 `i -> 0 `i 342  ]
[; ;ff.c: 2698: return FR_DENIED;
"2698
[e ) -> . `E67 7 `E67 ]
[e $UE 339  ]
[e :U 342 ]
[; ;ff.c: 2699: remain = fp->fsize - fp->fptr;
"2699
[e = _remain - . *U _fp 5 . *U _fp 4 ]
[; ;ff.c: 2700: if (btr > remain) btr = (UINT)remain;
"2700
[e $ ! > -> _btr `ul _remain 343  ]
[e = _btr -> _remain `ui ]
[e :U 343 ]
[; ;ff.c: 2702: for ( ; btr;
"2702
{
[; ;ff.c: 2703: rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
[e $U 347  ]
"2703
[e :U 344 ]
{
[; ;ff.c: 2704: if ((fp->fptr % ((UINT)512)) == 0) {
"2704
[e $ ! == % . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> -> 0 `i `l `ul 348  ]
{
[; ;ff.c: 2705: csect = (BYTE)(fp->fptr / ((UINT)512) & (fp->fs->csize - 1));
"2705
[e = _csect -> & / . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> - -> . *U . *U _fp 0 2 `i -> 1 `i `l `ul `uc ]
[; ;ff.c: 2706: if (!csect) {
"2706
[e $ ! ! != -> _csect `i -> -> -> 0 `i `uc `i 349  ]
{
[; ;ff.c: 2707: if (fp->fptr == 0) {
"2707
[e $ ! == . *U _fp 4 -> -> -> 0 `i `l `ul 350  ]
{
[; ;ff.c: 2708: clst = fp->sclust;
"2708
[e = _clst . *U _fp 6 ]
"2709
}
[; ;ff.c: 2709: } else {
[e $U 351  ]
[e :U 350 ]
{
[; ;ff.c: 2711: if (fp->cltbl)
"2711
[e $ ! != . *U _fp 11 -> -> 0 `i `*ul 352  ]
[; ;ff.c: 2712: clst = clmt_clust(fp, fp->fptr);
"2712
[e = _clst ( _clmt_clust (2 , _fp . *U _fp 4 ]
[e $U 353  ]
"2713
[e :U 352 ]
[; ;ff.c: 2713: else
[; ;ff.c: 2715: clst = get_fat(fp->fs, fp->clust);
"2715
[e = _clst ( _get_fat (2 , . *U _fp 0 . *U _fp 7 ]
[e :U 353 ]
"2716
}
[e :U 351 ]
[; ;ff.c: 2716: }
[; ;ff.c: 2717: if (clst < 2) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"2717
[e $ ! < _clst -> -> -> 2 `i `l `ul 354  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 339  ]
}
[e :U 354 ]
[; ;ff.c: 2718: if (clst == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2718
[e $ ! == _clst -> -1 `ul 355  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 339  ]
}
[e :U 355 ]
[; ;ff.c: 2719: fp->clust = clst;
"2719
[e = . *U _fp 7 _clst ]
"2720
}
[e :U 349 ]
[; ;ff.c: 2720: }
[; ;ff.c: 2721: sect = clust2sect(fp->fs, fp->clust);
"2721
[e = _sect ( _clust2sect (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 2722: if (!sect) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"2722
[e $ ! ! != _sect -> -> 0 `i `ul 356  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 339  ]
}
[e :U 356 ]
[; ;ff.c: 2723: sect += csect;
"2723
[e =+ _sect -> _csect `ul ]
[; ;ff.c: 2724: cc = btr / ((UINT)512);
"2724
[e = _cc / _btr -> -> 512 `i `ui ]
[; ;ff.c: 2725: if (cc) {
"2725
[e $ ! != _cc -> -> 0 `i `ui 357  ]
{
[; ;ff.c: 2726: if (csect + cc > fp->fs->csize)
"2726
[e $ ! > + -> _csect `ui _cc -> . *U . *U _fp 0 2 `ui 358  ]
[; ;ff.c: 2727: cc = fp->fs->csize - csect;
"2727
[e = _cc -> - -> . *U . *U _fp 0 2 `i -> _csect `i `ui ]
[e :U 358 ]
[; ;ff.c: 2728: if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
"2728
[e $ ! != -> ( _disk_read (4 , , , . *U . *U _fp 0 1 _rbuff _sect _cc `i -> . `E198 0 `i 359  ]
[; ;ff.c: 2729: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2729
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 339  ]
}
[e :U 359 ]
[; ;ff.c: 2732: if (fp->fs->wflag && fp->fs->winsect - sect < cc)
"2732
[e $ ! && != -> . *U . *U _fp 0 4 `i -> -> -> 0 `i `uc `i < - . *U . *U _fp 0 17 _sect -> _cc `ul 360  ]
[; ;ff.c: 2733: mem_cpy(rbuff + ((fp->fs->winsect - sect) * ((UINT)512)), fp->fs->win, ((UINT)512));
"2733
[e ( _mem_cpy (3 , , -> + _rbuff * -> * - . *U . *U _fp 0 17 _sect -> -> -> 512 `i `ui `ul `ux -> -> # *U _rbuff `ui `ux `*v -> &U . *U . *U _fp 0 18 `*Cv -> -> 512 `i `ui ]
[e :U 360 ]
[; ;ff.c: 2739: rcnt = ((UINT)512) * cc;
"2739
[e = _rcnt * -> -> 512 `i `ui _cc ]
[; ;ff.c: 2740: continue;
"2740
[e $U 346  ]
"2741
}
[e :U 357 ]
[; ;ff.c: 2741: }
[; ;ff.c: 2755: fp->dsect = sect;
"2755
[e = . *U _fp 8 _sect ]
"2756
}
[e :U 348 ]
[; ;ff.c: 2756: }
[; ;ff.c: 2757: rcnt = ((UINT)512) - ((UINT)fp->fptr % ((UINT)512));
"2757
[e = _rcnt - -> -> 512 `i `ui % -> . *U _fp 4 `ui -> -> 512 `i `ui ]
[; ;ff.c: 2758: if (rcnt > btr) rcnt = btr;
"2758
[e $ ! > _rcnt _btr 361  ]
[e = _rcnt _btr ]
[e :U 361 ]
[; ;ff.c: 2760: if (move_window(fp->fs, fp->dsect) != FR_OK)
"2760
[e $ ! != -> ( _move_window (2 , . *U _fp 0 . *U _fp 8 `i -> . `E67 0 `i 362  ]
[; ;ff.c: 2761: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2761
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 339  ]
}
[e :U 362 ]
[; ;ff.c: 2762: mem_cpy(rbuff, &fp->fs->win[fp->fptr % ((UINT)512)], rcnt);
"2762
[e ( _mem_cpy (3 , , -> _rbuff `*v -> &U *U + &U . *U . *U _fp 0 18 * -> % . *U _fp 4 -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U . *U _fp 0 18 `ui `ux `*Cv _rcnt ]
"2766
}
"2703
[e :U 346 ]
[e ; ; ; =+ _rbuff * -> _rcnt `ux -> -> # *U _rbuff `ui `ux =+ . *U _fp 4 -> _rcnt `ul =+ *U _br _rcnt =- _btr _rcnt ]
"2702
[e :U 347 ]
[e $ != _btr -> -> 0 `i `ui 344  ]
[e :U 345 ]
"2766
}
[; ;ff.c: 2766: }
[; ;ff.c: 2768: return FR_OK;
"2768
[e ) -> . `E67 0 `E67 ]
[e $UE 339  ]
[; ;ff.c: 2769: }
"2769
[e :UE 339 ]
}
"2779
[v _f_write `(E67 ~T0 @X0 1 ef4`*S2`*Cv`ui`*ui ]
"2785
{
[; ;ff.c: 2779: FRESULT f_write (
[; ;ff.c: 2780: FIL* fp,
[; ;ff.c: 2781: const void *buff,
[; ;ff.c: 2782: UINT btw,
[; ;ff.c: 2783: UINT* bw
[; ;ff.c: 2784: )
[; ;ff.c: 2785: {
[e :U _f_write ]
"2780
[v _fp `*S2 ~T0 @X0 1 r1 ]
"2781
[v _buff `*Cv ~T0 @X0 1 r2 ]
"2782
[v _btw `ui ~T0 @X0 1 r3 ]
"2783
[v _bw `*ui ~T0 @X0 1 r4 ]
"2785
[f ]
"2786
[v _res `E67 ~T0 @X0 1 a ]
"2787
[v _clst `ul ~T0 @X0 1 a ]
[v _sect `ul ~T0 @X0 1 a ]
"2788
[v _wcnt `ui ~T0 @X0 1 a ]
[v _cc `ui ~T0 @X0 1 a ]
"2789
[v _wbuff `*Cuc ~T0 @X0 1 a ]
[; ;ff.c: 2786: FRESULT res;
[; ;ff.c: 2787: DWORD clst, sect;
[; ;ff.c: 2788: UINT wcnt, cc;
[; ;ff.c: 2789: const BYTE *wbuff = (const BYTE*)buff;
[e = _wbuff -> _buff `*Cuc ]
"2790
[v _csect `uc ~T0 @X0 1 a ]
[; ;ff.c: 2790: BYTE csect;
[; ;ff.c: 2793: *bw = 0;
"2793
[e = *U _bw -> -> 0 `i `ui ]
[; ;ff.c: 2795: res = validate(fp);
"2795
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 2796: if (res != FR_OK) return res;
"2796
[e $ ! != -> _res `i -> . `E67 0 `i 364  ]
[e ) _res ]
[e $UE 363  ]
[e :U 364 ]
[; ;ff.c: 2797: if (fp->err)
"2797
[e $ ! != -> . *U _fp 3 `i -> -> -> 0 `i `uc `i 365  ]
[; ;ff.c: 2798: return (FRESULT)fp->err;
"2798
[e ) -> . *U _fp 3 `E67 ]
[e $UE 363  ]
[e :U 365 ]
[; ;ff.c: 2799: if (!(fp->flag & 0x02))
"2799
[e $ ! ! != & -> . *U _fp 2 `i -> 2 `i -> 0 `i 366  ]
[; ;ff.c: 2800: return FR_DENIED;
"2800
[e ) -> . `E67 7 `E67 ]
[e $UE 363  ]
[e :U 366 ]
[; ;ff.c: 2801: if (fp->fptr + btw < fp->fptr) btw = 0;
"2801
[e $ ! < + . *U _fp 4 -> _btw `ul . *U _fp 4 367  ]
[e = _btw -> -> 0 `i `ui ]
[e :U 367 ]
[; ;ff.c: 2803: for ( ; btw;
"2803
{
[; ;ff.c: 2804: wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
[e $U 371  ]
"2804
[e :U 368 ]
{
[; ;ff.c: 2805: if ((fp->fptr % ((UINT)512)) == 0) {
"2805
[e $ ! == % . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> -> 0 `i `l `ul 372  ]
{
[; ;ff.c: 2806: csect = (BYTE)(fp->fptr / ((UINT)512) & (fp->fs->csize - 1));
"2806
[e = _csect -> & / . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> - -> . *U . *U _fp 0 2 `i -> 1 `i `l `ul `uc ]
[; ;ff.c: 2807: if (!csect) {
"2807
[e $ ! ! != -> _csect `i -> -> -> 0 `i `uc `i 373  ]
{
[; ;ff.c: 2808: if (fp->fptr == 0) {
"2808
[e $ ! == . *U _fp 4 -> -> -> 0 `i `l `ul 374  ]
{
[; ;ff.c: 2809: clst = fp->sclust;
"2809
[e = _clst . *U _fp 6 ]
[; ;ff.c: 2810: if (clst == 0)
"2810
[e $ ! == _clst -> -> -> 0 `i `l `ul 375  ]
[; ;ff.c: 2811: clst = create_chain(fp->fs, 0);
"2811
[e = _clst ( _create_chain (2 , . *U _fp 0 -> -> -> 0 `i `l `ul ]
[e :U 375 ]
"2812
}
[; ;ff.c: 2812: } else {
[e $U 376  ]
[e :U 374 ]
{
[; ;ff.c: 2814: if (fp->cltbl)
"2814
[e $ ! != . *U _fp 11 -> -> 0 `i `*ul 377  ]
[; ;ff.c: 2815: clst = clmt_clust(fp, fp->fptr);
"2815
[e = _clst ( _clmt_clust (2 , _fp . *U _fp 4 ]
[e $U 378  ]
"2816
[e :U 377 ]
[; ;ff.c: 2816: else
[; ;ff.c: 2818: clst = create_chain(fp->fs, fp->clust);
"2818
[e = _clst ( _create_chain (2 , . *U _fp 0 . *U _fp 7 ]
[e :U 378 ]
"2819
}
[e :U 376 ]
[; ;ff.c: 2819: }
[; ;ff.c: 2820: if (clst == 0) break;
"2820
[e $ ! == _clst -> -> -> 0 `i `l `ul 379  ]
[e $U 369  ]
[e :U 379 ]
[; ;ff.c: 2821: if (clst == 1) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"2821
[e $ ! == _clst -> -> -> 1 `i `l `ul 380  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 363  ]
}
[e :U 380 ]
[; ;ff.c: 2822: if (clst == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2822
[e $ ! == _clst -> -1 `ul 381  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 363  ]
}
[e :U 381 ]
[; ;ff.c: 2823: fp->clust = clst;
"2823
[e = . *U _fp 7 _clst ]
[; ;ff.c: 2824: if (fp->sclust == 0) fp->sclust = clst;
"2824
[e $ ! == . *U _fp 6 -> -> -> 0 `i `l `ul 382  ]
[e = . *U _fp 6 _clst ]
[e :U 382 ]
"2825
}
[e :U 373 ]
[; ;ff.c: 2825: }
[; ;ff.c: 2827: if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))
"2827
[e $ ! && == . *U . *U _fp 0 17 . *U _fp 8 != -> ( _sync_window (1 . *U _fp 0 `i -> -> -> 0 `i `E67 `i 383  ]
[; ;ff.c: 2828: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2828
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 363  ]
}
[e :U 383 ]
[; ;ff.c: 2836: sect = clust2sect(fp->fs, fp->clust);
"2836
[e = _sect ( _clust2sect (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 2837: if (!sect) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"2837
[e $ ! ! != _sect -> -> 0 `i `ul 384  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 363  ]
}
[e :U 384 ]
[; ;ff.c: 2838: sect += csect;
"2838
[e =+ _sect -> _csect `ul ]
[; ;ff.c: 2839: cc = btw / ((UINT)512);
"2839
[e = _cc / _btw -> -> 512 `i `ui ]
[; ;ff.c: 2840: if (cc) {
"2840
[e $ ! != _cc -> -> 0 `i `ui 385  ]
{
[; ;ff.c: 2841: if (csect + cc > fp->fs->csize)
"2841
[e $ ! > + -> _csect `ui _cc -> . *U . *U _fp 0 2 `ui 386  ]
[; ;ff.c: 2842: cc = fp->fs->csize - csect;
"2842
[e = _cc -> - -> . *U . *U _fp 0 2 `i -> _csect `i `ui ]
[e :U 386 ]
[; ;ff.c: 2843: if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
"2843
[e $ ! != -> ( _disk_write (4 , , , . *U . *U _fp 0 1 _wbuff _sect _cc `i -> . `E198 0 `i 387  ]
[; ;ff.c: 2844: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2844
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 363  ]
}
[e :U 387 ]
[; ;ff.c: 2847: if (fp->fs->winsect - sect < cc) {
"2847
[e $ ! < - . *U . *U _fp 0 17 _sect -> _cc `ul 388  ]
{
[; ;ff.c: 2848: mem_cpy(fp->fs->win, wbuff + ((fp->fs->winsect - sect) * ((UINT)512)), ((UINT)512));
"2848
[e ( _mem_cpy (3 , , -> &U . *U . *U _fp 0 18 `*v -> + _wbuff * -> * - . *U . *U _fp 0 17 _sect -> -> -> 512 `i `ui `ul `ux -> -> # *U _wbuff `ui `ux `*Cv -> -> 512 `i `ui ]
[; ;ff.c: 2849: fp->fs->wflag = 0;
"2849
[e = . *U . *U _fp 0 4 -> -> 0 `i `uc ]
"2850
}
[e :U 388 ]
[; ;ff.c: 2850: }
[; ;ff.c: 2858: wcnt = ((UINT)512) * cc;
"2858
[e = _wcnt * -> -> 512 `i `ui _cc ]
[; ;ff.c: 2859: continue;
"2859
[e $U 370  ]
"2860
}
[e :U 385 ]
[; ;ff.c: 2860: }
[; ;ff.c: 2862: if (fp->fptr >= fp->fsize) {
"2862
[e $ ! >= . *U _fp 4 . *U _fp 5 389  ]
{
[; ;ff.c: 2863: if (sync_window(fp->fs)) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2863
[e $ ! != -> ( _sync_window (1 . *U _fp 0 `i -> -> -> 0 `i `E67 `i 390  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 363  ]
}
[e :U 390 ]
[; ;ff.c: 2864: fp->fs->winsect = sect;
"2864
[e = . *U . *U _fp 0 17 _sect ]
"2865
}
[e :U 389 ]
[; ;ff.c: 2865: }
[; ;ff.c: 2873: fp->dsect = sect;
"2873
[e = . *U _fp 8 _sect ]
"2874
}
[e :U 372 ]
[; ;ff.c: 2874: }
[; ;ff.c: 2875: wcnt = ((UINT)512) - ((UINT)fp->fptr % ((UINT)512));
"2875
[e = _wcnt - -> -> 512 `i `ui % -> . *U _fp 4 `ui -> -> 512 `i `ui ]
[; ;ff.c: 2876: if (wcnt > btw) wcnt = btw;
"2876
[e $ ! > _wcnt _btw 391  ]
[e = _wcnt _btw ]
[e :U 391 ]
[; ;ff.c: 2878: if (move_window(fp->fs, fp->dsect) != FR_OK)
"2878
[e $ ! != -> ( _move_window (2 , . *U _fp 0 . *U _fp 8 `i -> . `E67 0 `i 392  ]
[; ;ff.c: 2879: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"2879
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 363  ]
}
[e :U 392 ]
[; ;ff.c: 2880: mem_cpy(&fp->fs->win[fp->fptr % ((UINT)512)], wbuff, wcnt);
"2880
[e ( _mem_cpy (3 , , -> &U *U + &U . *U . *U _fp 0 18 * -> % . *U _fp 4 -> -> -> 512 `i `ui `ul `ux -> -> # *U &U . *U . *U _fp 0 18 `ui `ux `*v -> _wbuff `*Cv _wcnt ]
[; ;ff.c: 2881: fp->fs->wflag = 1;
"2881
[e = . *U . *U _fp 0 4 -> -> 1 `i `uc ]
"2886
}
"2804
[e :U 370 ]
[e ; ; ; =+ _wbuff * -> _wcnt `ux -> -> # *U _wbuff `ui `ux =+ . *U _fp 4 -> _wcnt `ul =+ *U _bw _wcnt =- _btw _wcnt ]
"2803
[e :U 371 ]
[e $ != _btw -> -> 0 `i `ui 368  ]
[e :U 369 ]
"2886
}
[; ;ff.c: 2886: }
[; ;ff.c: 2888: if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;
"2888
[e $ ! > . *U _fp 4 . *U _fp 5 393  ]
[e = . *U _fp 5 . *U _fp 4 ]
[e :U 393 ]
[; ;ff.c: 2889: fp->flag |= 0x20;
"2889
[e =| . *U _fp 2 -> -> 32 `i `uc ]
[; ;ff.c: 2891: return FR_OK;
"2891
[e ) -> . `E67 0 `E67 ]
[e $UE 363  ]
[; ;ff.c: 2892: }
"2892
[e :UE 363 ]
}
"2901
[v _f_sync `(E67 ~T0 @X0 1 ef1`*S2 ]
"2904
{
[; ;ff.c: 2901: FRESULT f_sync (
[; ;ff.c: 2902: FIL* fp
[; ;ff.c: 2903: )
[; ;ff.c: 2904: {
[e :U _f_sync ]
"2902
[v _fp `*S2 ~T0 @X0 1 r1 ]
"2904
[f ]
"2905
[v _res `E67 ~T0 @X0 1 a ]
"2906
[v _tm `ul ~T0 @X0 1 a ]
"2907
[v _dir `*uc ~T0 @X0 1 a ]
[; ;ff.c: 2905: FRESULT res;
[; ;ff.c: 2906: DWORD tm;
[; ;ff.c: 2907: BYTE *dir;
[; ;ff.c: 2910: res = validate(fp);
"2910
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 2911: if (res == FR_OK) {
"2911
[e $ ! == -> _res `i -> . `E67 0 `i 395  ]
{
[; ;ff.c: 2912: if (fp->flag & 0x20) {
"2912
[e $ ! != & -> . *U _fp 2 `i -> 32 `i -> 0 `i 396  ]
{
[; ;ff.c: 2921: res = move_window(fp->fs, fp->dir_sect);
"2921
[e = _res ( _move_window (2 , . *U _fp 0 . *U _fp 9 ]
[; ;ff.c: 2922: if (res == FR_OK) {
"2922
[e $ ! == -> _res `i -> . `E67 0 `i 397  ]
{
[; ;ff.c: 2923: dir = fp->dir_ptr;
"2923
[e = _dir . *U _fp 10 ]
[; ;ff.c: 2924: dir[11] |= 0x20;
"2924
[e =| *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> -> 32 `i `uc ]
[; ;ff.c: 2925: *(BYTE*)(dir + 28)=(BYTE)(fp->fsize); *((BYTE*)(dir + 28)+1)=(BYTE)((WORD)(fp->fsize)>>8); *((BYTE*)(dir + 28)+2)=(BYTE)((DWORD)(fp->fsize)>>16); *((BYTE*)(dir + 28)+3)=(BYTE)((DWORD)(fp->fsize)>>24);
"2925
[e = *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x -> . *U _fp 5 `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> . *U _fp 5 `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> . *U _fp 5 -> 16 `i `uc ]
[e = *U + + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 28 `i `x -> -> # *U _dir `i `x `i `x -> >> . *U _fp 5 -> 24 `i `uc ]
[; ;ff.c: 2926: st_clust(dir, fp->sclust);
"2926
[e ( _st_clust (2 , _dir . *U _fp 6 ]
[; ;ff.c: 2927: tm = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
"2927
[e = _tm | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
[; ;ff.c: 2928: *(BYTE*)(dir + 22)=(BYTE)(tm); *((BYTE*)(dir + 22)+1)=(BYTE)((WORD)(tm)>>8); *((BYTE*)(dir + 22)+2)=(BYTE)((DWORD)(tm)>>16); *((BYTE*)(dir + 22)+3)=(BYTE)((DWORD)(tm)>>24);
"2928
[e = *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x -> _tm `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _tm `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 16 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 24 `i `uc ]
[; ;ff.c: 2929: *(BYTE*)(dir + 18)=(BYTE)(0); *((BYTE*)(dir + 18)+1)=(BYTE)((WORD)(0)>>8);
"2929
[e = *U + _dir * -> -> 18 `i `x -> -> # *U _dir `i `x -> -> 0 `i `uc ]
[e = *U + + _dir * -> -> 18 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 18 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> -> 0 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 2930: fp->flag &= ~0x20;
"2930
[e =& . *U _fp 2 -> ~ -> 32 `i `uc ]
[; ;ff.c: 2931: fp->fs->wflag = 1;
"2931
[e = . *U . *U _fp 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 2932: res = sync_fs(fp->fs);
"2932
[e = _res ( _sync_fs (1 . *U _fp 0 ]
"2933
}
[e :U 397 ]
"2934
}
[e :U 396 ]
"2935
}
[e :U 395 ]
[; ;ff.c: 2933: }
[; ;ff.c: 2934: }
[; ;ff.c: 2935: }
[; ;ff.c: 2937: return res;
"2937
[e ) _res ]
[e $UE 394  ]
[; ;ff.c: 2938: }
"2938
[e :UE 394 ]
}
"2949
[v _f_close `(E67 ~T0 @X0 1 ef1`*S2 ]
"2952
{
[; ;ff.c: 2949: FRESULT f_close (
[; ;ff.c: 2950: FIL *fp
[; ;ff.c: 2951: )
[; ;ff.c: 2952: {
[e :U _f_close ]
"2950
[v _fp `*S2 ~T0 @X0 1 r1 ]
"2952
[f ]
"2953
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 2953: FRESULT res;
[; ;ff.c: 2957: res = f_sync(fp);
"2957
[e = _res ( _f_sync (1 _fp ]
[; ;ff.c: 2958: if (res == FR_OK)
"2958
[e $ ! == -> _res `i -> . `E67 0 `i 399  ]
[; ;ff.c: 2960: {
"2960
{
[; ;ff.c: 2961: res = validate(fp);
"2961
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 2962: if (res == FR_OK) {
"2962
[e $ ! == -> _res `i -> . `E67 0 `i 400  ]
{
[; ;ff.c: 2970: fp->fs = 0;
"2970
[e = . *U _fp 0 -> -> 0 `i `*S1 ]
"2974
}
[e :U 400 ]
"2975
}
[e :U 399 ]
[; ;ff.c: 2974: }
[; ;ff.c: 2975: }
[; ;ff.c: 2976: return res;
"2976
[e ) _res ]
[e $UE 398  ]
[; ;ff.c: 2977: }
"2977
[e :UE 398 ]
}
"2988
[v _f_chdrive `(E67 ~T0 @X0 1 ef1`*Cuc ]
"2991
{
[; ;ff.c: 2988: FRESULT f_chdrive (
[; ;ff.c: 2989: const TCHAR* path
[; ;ff.c: 2990: )
[; ;ff.c: 2991: {
[e :U _f_chdrive ]
"2989
[v _path `*Cuc ~T0 @X0 1 r1 ]
"2991
[f ]
"2992
[v _vol `i ~T0 @X0 1 a ]
[; ;ff.c: 2992: int vol;
[; ;ff.c: 2995: vol = get_ldnumber(&path);
"2995
[e = _vol ( _get_ldnumber (1 &U _path ]
[; ;ff.c: 2996: if (vol < 0) return FR_INVALID_DRIVE;
"2996
[e $ ! < _vol -> 0 `i 402  ]
[e ) -> . `E67 11 `E67 ]
[e $UE 401  ]
[e :U 402 ]
[; ;ff.c: 2998: CurrVol = (BYTE)vol;
"2998
[e = _CurrVol -> _vol `uc ]
[; ;ff.c: 3000: return FR_OK;
"3000
[e ) -> . `E67 0 `E67 ]
[e $UE 401  ]
[; ;ff.c: 3001: }
"3001
[e :UE 401 ]
}
"3005
[v _f_chdir `(E67 ~T0 @X0 1 ef1`*Cuc ]
"3008
{
[; ;ff.c: 3005: FRESULT f_chdir (
[; ;ff.c: 3006: const TCHAR* path
[; ;ff.c: 3007: )
[; ;ff.c: 3008: {
[e :U _f_chdir ]
"3006
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3008
[f ]
"3009
[v _res `E67 ~T0 @X0 1 a ]
"3010
[v _dj `S3 ~T0 @X0 1 a ]
"3011
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3009: FRESULT res;
[; ;ff.c: 3010: DIR dj;
[; ;ff.c: 3011: BYTE sfn[12];
[; ;ff.c: 3015: res = find_volume(&dj.fs, &path, 0);
"3015
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 0 `i `uc ]
[; ;ff.c: 3016: if (res == FR_OK) {
"3016
[e $ ! == -> _res `i -> . `E67 0 `i 404  ]
{
[; ;ff.c: 3017: (dj).fn = sfn;
"3017
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3018: res = follow_path(&dj, path);
"3018
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3019: ;
[; ;ff.c: 3020: if (res == FR_OK) {
"3020
[e $ ! == -> _res `i -> . `E67 0 `i 405  ]
{
[; ;ff.c: 3021: if (!dj.dir) {
"3021
[e $ ! ! != . _dj 6 -> -> 0 `i `*uc 406  ]
{
[; ;ff.c: 3022: dj.fs->cdir = dj.sclust;
"3022
[e = . *U . _dj 0 10 . _dj 3 ]
"3023
}
[; ;ff.c: 3023: } else {
[e $U 407  ]
[e :U 406 ]
{
[; ;ff.c: 3024: if (dj.dir[11] & 0x10)
"3024
[e $ ! != & -> *U + . _dj 6 * -> -> 11 `i `x -> -> # *U . _dj 6 `i `x `i -> 16 `i -> 0 `i 408  ]
[; ;ff.c: 3025: dj.fs->cdir = ld_clust(dj.fs, dj.dir);
"3025
[e = . *U . _dj 0 10 ( _ld_clust (2 , . _dj 0 -> . _dj 6 `*Cuc ]
[e $U 409  ]
"3026
[e :U 408 ]
[; ;ff.c: 3026: else
[; ;ff.c: 3027: res = FR_NO_PATH;
"3027
[e = _res -> . `E67 5 `E67 ]
[e :U 409 ]
"3028
}
[e :U 407 ]
"3029
}
[e :U 405 ]
[; ;ff.c: 3028: }
[; ;ff.c: 3029: }
[; ;ff.c: 3030: if (res == FR_NO_FILE) res = FR_NO_PATH;
"3030
[e $ ! == -> _res `i -> . `E67 4 `i 410  ]
[e = _res -> . `E67 5 `E67 ]
[e :U 410 ]
"3031
}
[e :U 404 ]
[; ;ff.c: 3031: }
[; ;ff.c: 3033: return res;
"3033
[e ) _res ]
[e $UE 403  ]
[; ;ff.c: 3034: }
"3034
[e :UE 403 ]
}
"3038
[v _f_getcwd `(E67 ~T0 @X0 1 ef2`*uc`ui ]
"3042
{
[; ;ff.c: 3038: FRESULT f_getcwd (
[; ;ff.c: 3039: TCHAR* buff,
[; ;ff.c: 3040: UINT len
[; ;ff.c: 3041: )
[; ;ff.c: 3042: {
[e :U _f_getcwd ]
"3039
[v _buff `*uc ~T0 @X0 1 r1 ]
"3040
[v _len `ui ~T0 @X0 1 r2 ]
"3042
[f ]
"3043
[v _res `E67 ~T0 @X0 1 a ]
"3044
[v _dj `S3 ~T0 @X0 1 a ]
"3045
[v _i `ui ~T0 @X0 1 a ]
[v _n `ui ~T0 @X0 1 a ]
"3046
[v _ccl `ul ~T0 @X0 1 a ]
"3047
[v _tp `*uc ~T0 @X0 1 a ]
"3048
[v _fno `S4 ~T0 @X0 1 a ]
"3049
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3043: FRESULT res;
[; ;ff.c: 3044: DIR dj;
[; ;ff.c: 3045: UINT i, n;
[; ;ff.c: 3046: DWORD ccl;
[; ;ff.c: 3047: TCHAR *tp;
[; ;ff.c: 3048: FILINFO fno;
[; ;ff.c: 3049: BYTE sfn[12];
[; ;ff.c: 3052: *buff = 0;
"3052
[e = *U _buff -> -> 0 `i `uc ]
[; ;ff.c: 3054: res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);
"3054
[e = _res ( _find_volume (3 , , &U . _dj 0 -> &U _buff `**Cuc -> -> 0 `i `uc ]
[; ;ff.c: 3055: if (res == FR_OK) {
"3055
[e $ ! == -> _res `i -> . `E67 0 `i 412  ]
{
[; ;ff.c: 3056: (dj).fn = sfn;
"3056
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3057: i = len;
"3057
[e = _i _len ]
[; ;ff.c: 3058: dj.sclust = dj.fs->cdir;
"3058
[e = . _dj 3 . *U . _dj 0 10 ]
[; ;ff.c: 3059: while ((ccl = dj.sclust) != 0) {
"3059
[e $U 413  ]
[e :U 414 ]
{
[; ;ff.c: 3060: res = dir_sdi(&dj, 1);
"3060
[e = _res ( _dir_sdi (2 , &U _dj -> -> 1 `i `ui ]
[; ;ff.c: 3061: if (res != FR_OK) break;
"3061
[e $ ! != -> _res `i -> . `E67 0 `i 416  ]
[e $U 415  ]
[e :U 416 ]
[; ;ff.c: 3062: res = dir_read(&dj, 0);
"3062
[e = _res ( _dir_read (2 , &U _dj -> 0 `i ]
[; ;ff.c: 3063: if (res != FR_OK) break;
"3063
[e $ ! != -> _res `i -> . `E67 0 `i 417  ]
[e $U 415  ]
[e :U 417 ]
[; ;ff.c: 3064: dj.sclust = ld_clust(dj.fs, dj.dir);
"3064
[e = . _dj 3 ( _ld_clust (2 , . _dj 0 -> . _dj 6 `*Cuc ]
[; ;ff.c: 3065: res = dir_sdi(&dj, 0);
"3065
[e = _res ( _dir_sdi (2 , &U _dj -> -> 0 `i `ui ]
[; ;ff.c: 3066: if (res != FR_OK) break;
"3066
[e $ ! != -> _res `i -> . `E67 0 `i 418  ]
[e $U 415  ]
[e :U 418 ]
[; ;ff.c: 3067: do {
"3067
[e :U 421 ]
{
[; ;ff.c: 3068: res = dir_read(&dj, 0);
"3068
[e = _res ( _dir_read (2 , &U _dj -> 0 `i ]
[; ;ff.c: 3069: if (res != FR_OK) break;
"3069
[e $ ! != -> _res `i -> . `E67 0 `i 422  ]
[e $U 420  ]
[e :U 422 ]
[; ;ff.c: 3070: if (ccl == ld_clust(dj.fs, dj.dir)) break;
"3070
[e $ ! == _ccl ( _ld_clust (2 , . _dj 0 -> . _dj 6 `*Cuc 423  ]
[e $U 420  ]
[e :U 423 ]
[; ;ff.c: 3071: res = dir_next(&dj, 0);
"3071
[e = _res ( _dir_next (2 , &U _dj -> 0 `i ]
"3072
}
[; ;ff.c: 3072: } while (res == FR_OK);
[e $ == -> _res `i -> . `E67 0 `i 421  ]
[e :U 420 ]
[; ;ff.c: 3073: if (res == FR_NO_FILE) res = FR_INT_ERR;
"3073
[e $ ! == -> _res `i -> . `E67 4 `i 424  ]
[e = _res -> . `E67 2 `E67 ]
[e :U 424 ]
[; ;ff.c: 3074: if (res != FR_OK) break;
"3074
[e $ ! != -> _res `i -> . `E67 0 `i 425  ]
[e $U 415  ]
[e :U 425 ]
[; ;ff.c: 3079: get_fileinfo(&dj, &fno);
"3079
[e ( _get_fileinfo (2 , &U _dj &U _fno ]
[; ;ff.c: 3080: tp = fno.fname;
"3080
[e = _tp &U . _fno 4 ]
[; ;ff.c: 3084: for (n = 0; tp[n]; n++) ;
"3084
{
[e = _n -> -> 0 `i `ui ]
[e $U 429  ]
[e :U 426 ]
[e ++ _n -> -> 1 `i `ui ]
[e :U 429 ]
[e $ != -> *U + _tp * -> _n `ux -> -> # *U _tp `ui `ux `i -> -> -> 0 `i `uc `i 426  ]
[e :U 427 ]
}
[; ;ff.c: 3085: if (i < n + 3) {
"3085
[e $ ! < _i + _n -> -> 3 `i `ui 430  ]
{
[; ;ff.c: 3086: res = FR_NOT_ENOUGH_CORE; break;
"3086
[e = _res -> . `E67 17 `E67 ]
[e $U 415  ]
"3087
}
[e :U 430 ]
[; ;ff.c: 3087: }
[; ;ff.c: 3088: while (n) buff[--i] = tp[--n];
"3088
[e $U 431  ]
[e :U 432 ]
[e = *U + _buff * -> =- _i -> -> 1 `i `ui `ux -> -> # *U _buff `ui `ux *U + _tp * -> =- _n -> -> 1 `i `ui `ux -> -> # *U _tp `ui `ux ]
[e :U 431 ]
[e $ != _n -> -> 0 `i `ui 432  ]
[e :U 433 ]
[; ;ff.c: 3089: buff[--i] = '/';
"3089
[e = *U + _buff * -> =- _i -> -> 1 `i `ui `ux -> -> # *U _buff `ui `ux -> -> 47 `ui `uc ]
"3090
}
[e :U 413 ]
"3059
[e $ != = _ccl . _dj 3 -> -> -> 0 `i `l `ul 414  ]
[e :U 415 ]
[; ;ff.c: 3090: }
[; ;ff.c: 3091: tp = buff;
"3091
[e = _tp _buff ]
[; ;ff.c: 3092: if (res == FR_OK) {
"3092
[e $ ! == -> _res `i -> . `E67 0 `i 434  ]
{
[; ;ff.c: 3094: *tp++ = '0' + CurrVol;
"3094
[e = *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x -> + -> 48 `ui -> _CurrVol `ui `uc ]
[; ;ff.c: 3095: *tp++ = ':';
"3095
[e = *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x -> -> 58 `ui `uc ]
[; ;ff.c: 3097: if (i == len) {
"3097
[e $ ! == _i _len 435  ]
{
[; ;ff.c: 3098: *tp++ = '/';
"3098
[e = *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x -> -> 47 `ui `uc ]
"3099
}
[; ;ff.c: 3099: } else {
[e $U 436  ]
[e :U 435 ]
{
[; ;ff.c: 3100: do
"3100
[e :U 439 ]
[; ;ff.c: 3101: *tp++ = buff[i++];
"3101
[e = *U ++ _tp * -> -> 1 `i `x -> -> # *U _tp `i `x *U + _buff * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _buff `ui `ux ]
[; ;ff.c: 3102: while (i < len);
"3102
[e $ < _i _len 439  ]
[e :U 438 ]
"3103
}
[e :U 436 ]
"3104
}
[e :U 434 ]
[; ;ff.c: 3103: }
[; ;ff.c: 3104: }
[; ;ff.c: 3105: *tp = 0;
"3105
[e = *U _tp -> -> 0 `i `uc ]
[; ;ff.c: 3106: ;
"3107
}
[e :U 412 ]
[; ;ff.c: 3107: }
[; ;ff.c: 3109: return res;
"3109
[e ) _res ]
[e $UE 411  ]
[; ;ff.c: 3110: }
"3110
[e :UE 411 ]
}
"3121
[v _f_lseek `(E67 ~T0 @X0 1 ef2`*S2`ul ]
"3125
{
[; ;ff.c: 3121: FRESULT f_lseek (
[; ;ff.c: 3122: FIL* fp,
[; ;ff.c: 3123: DWORD ofs
[; ;ff.c: 3124: )
[; ;ff.c: 3125: {
[e :U _f_lseek ]
"3122
[v _fp `*S2 ~T0 @X0 1 r1 ]
"3123
[v _ofs `ul ~T0 @X0 1 r2 ]
"3125
[f ]
"3126
[v _res `E67 ~T0 @X0 1 a ]
"3127
[v _clst `ul ~T0 @X0 1 a ]
[v _bcs `ul ~T0 @X0 1 a ]
[v _nsect `ul ~T0 @X0 1 a ]
[v _ifptr `ul ~T0 @X0 1 a ]
"3129
[v _cl `ul ~T0 @X0 1 a ]
[v _pcl `ul ~T0 @X0 1 a ]
[v _ncl `ul ~T0 @X0 1 a ]
[v _tcl `ul ~T0 @X0 1 a ]
[v _dsc `ul ~T0 @X0 1 a ]
[v _tlen `ul ~T0 @X0 1 a ]
[v _ulen `ul ~T0 @X0 1 a ]
[v _tbl `*ul ~T0 @X0 1 a ]
[; ;ff.c: 3126: FRESULT res;
[; ;ff.c: 3127: DWORD clst, bcs, nsect, ifptr;
[; ;ff.c: 3129: DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
[; ;ff.c: 3133: res = validate(fp);
"3133
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 3134: if (res != FR_OK) return res;
"3134
[e $ ! != -> _res `i -> . `E67 0 `i 441  ]
[e ) _res ]
[e $UE 440  ]
[e :U 441 ]
[; ;ff.c: 3135: if (fp->err)
"3135
[e $ ! != -> . *U _fp 3 `i -> -> -> 0 `i `uc `i 442  ]
[; ;ff.c: 3136: return (FRESULT)fp->err;
"3136
[e ) -> . *U _fp 3 `E67 ]
[e $UE 440  ]
[e :U 442 ]
[; ;ff.c: 3139: if (fp->cltbl) {
"3139
[e $ ! != . *U _fp 11 -> -> 0 `i `*ul 443  ]
{
[; ;ff.c: 3140: if (ofs == 0xFFFFFFFF) {
"3140
[e $ ! == _ofs -> -1 `ul 444  ]
{
[; ;ff.c: 3141: tbl = fp->cltbl;
"3141
[e = _tbl . *U _fp 11 ]
[; ;ff.c: 3142: tlen = *tbl++; ulen = 2;
"3142
[e = _tlen *U ++ _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x ]
[e = _ulen -> -> -> 2 `i `l `ul ]
[; ;ff.c: 3143: cl = fp->sclust;
"3143
[e = _cl . *U _fp 6 ]
[; ;ff.c: 3144: if (cl) {
"3144
[e $ ! != _cl -> -> 0 `i `ul 445  ]
{
[; ;ff.c: 3145: do {
"3145
[e :U 448 ]
{
[; ;ff.c: 3147: tcl = cl; ncl = 0; ulen += 2;
"3147
[e = _tcl _cl ]
[e = _ncl -> -> -> 0 `i `l `ul ]
[e =+ _ulen -> -> -> 2 `i `l `ul ]
[; ;ff.c: 3148: do {
"3148
[e :U 451 ]
{
[; ;ff.c: 3149: pcl = cl; ncl++;
"3149
[e = _pcl _cl ]
[e ++ _ncl -> -> -> 1 `i `l `ul ]
[; ;ff.c: 3150: cl = get_fat(fp->fs, cl);
"3150
[e = _cl ( _get_fat (2 , . *U _fp 0 _cl ]
[; ;ff.c: 3151: if (cl <= 1) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"3151
[e $ ! <= _cl -> -> -> 1 `i `l `ul 452  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 440  ]
}
[e :U 452 ]
[; ;ff.c: 3152: if (cl == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"3152
[e $ ! == _cl -> -1 `ul 453  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 440  ]
}
[e :U 453 ]
"3153
}
[; ;ff.c: 3153: } while (cl == pcl + 1);
[e $ == _cl + _pcl -> -> -> 1 `i `l `ul 451  ]
[e :U 450 ]
[; ;ff.c: 3154: if (ulen <= tlen) {
"3154
[e $ ! <= _ulen _tlen 454  ]
{
[; ;ff.c: 3155: *tbl++ = ncl; *tbl++ = tcl;
"3155
[e = *U ++ _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x _ncl ]
[e = *U ++ _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x _tcl ]
"3156
}
[e :U 454 ]
"3157
}
[; ;ff.c: 3156: }
[; ;ff.c: 3157: } while (cl < fp->fs->n_fatent);
[e $ < _cl . *U . *U _fp 0 11 448  ]
[e :U 447 ]
"3158
}
[e :U 445 ]
[; ;ff.c: 3158: }
[; ;ff.c: 3159: *fp->cltbl = ulen;
"3159
[e = *U . *U _fp 11 _ulen ]
[; ;ff.c: 3160: if (ulen <= tlen)
"3160
[e $ ! <= _ulen _tlen 455  ]
[; ;ff.c: 3161: *tbl = 0;
"3161
[e = *U _tbl -> -> -> 0 `i `l `ul ]
[e $U 456  ]
"3162
[e :U 455 ]
[; ;ff.c: 3162: else
[; ;ff.c: 3163: res = FR_NOT_ENOUGH_CORE;
"3163
[e = _res -> . `E67 17 `E67 ]
[e :U 456 ]
"3165
}
[; ;ff.c: 3165: } else {
[e $U 457  ]
[e :U 444 ]
{
[; ;ff.c: 3166: if (ofs > fp->fsize)
"3166
[e $ ! > _ofs . *U _fp 5 458  ]
[; ;ff.c: 3167: ofs = fp->fsize;
"3167
[e = _ofs . *U _fp 5 ]
[e :U 458 ]
[; ;ff.c: 3168: fp->fptr = ofs;
"3168
[e = . *U _fp 4 _ofs ]
[; ;ff.c: 3169: if (ofs) {
"3169
[e $ ! != _ofs -> -> 0 `i `ul 459  ]
{
[; ;ff.c: 3170: fp->clust = clmt_clust(fp, ofs - 1);
"3170
[e = . *U _fp 7 ( _clmt_clust (2 , _fp - _ofs -> -> -> 1 `i `l `ul ]
[; ;ff.c: 3171: dsc = clust2sect(fp->fs, fp->clust);
"3171
[e = _dsc ( _clust2sect (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 3172: if (!dsc) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"3172
[e $ ! ! != _dsc -> -> 0 `i `ul 460  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 440  ]
}
[e :U 460 ]
[; ;ff.c: 3173: dsc += (ofs - 1) / ((UINT)512) & (fp->fs->csize - 1);
"3173
[e =+ _dsc & / - _ofs -> -> -> 1 `i `l `ul -> -> -> 512 `i `ui `ul -> -> - -> . *U . *U _fp 0 2 `i -> 1 `i `l `ul ]
[; ;ff.c: 3174: if (fp->fptr % ((UINT)512) && dsc != fp->dsect) {
"3174
[e $ ! && != % . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> 0 `i `ul != _dsc . *U _fp 8 461  ]
{
[; ;ff.c: 3186: fp->dsect = dsc;
"3186
[e = . *U _fp 8 _dsc ]
"3187
}
[e :U 461 ]
"3188
}
[e :U 459 ]
"3189
}
[e :U 457 ]
"3190
}
[; ;ff.c: 3187: }
[; ;ff.c: 3188: }
[; ;ff.c: 3189: }
[; ;ff.c: 3190: } else
[e $U 462  ]
[e :U 443 ]
[; ;ff.c: 3194: {
"3194
{
[; ;ff.c: 3195: if (ofs > fp->fsize
[; ;ff.c: 3197: && !(fp->flag & 0x02)
[; ;ff.c: 3199: ) ofs = fp->fsize;
"3199
[e $ ! && > _ofs . *U _fp 5 ! != & -> . *U _fp 2 `i -> 2 `i -> 0 `i 463  ]
[e = _ofs . *U _fp 5 ]
[e :U 463 ]
[; ;ff.c: 3201: ifptr = fp->fptr;
"3201
[e = _ifptr . *U _fp 4 ]
[; ;ff.c: 3202: fp->fptr = nsect = 0;
"3202
[e = . *U _fp 4 = _nsect -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3203: if (ofs) {
"3203
[e $ ! != _ofs -> -> 0 `i `ul 464  ]
{
[; ;ff.c: 3204: bcs = (DWORD)fp->fs->csize * ((UINT)512);
"3204
[e = _bcs * -> . *U . *U _fp 0 2 `ul -> -> -> 512 `i `ui `ul ]
[; ;ff.c: 3205: if (ifptr > 0 &&
[; ;ff.c: 3206: (ofs - 1) / bcs >= (ifptr - 1) / bcs) {
"3206
[e $ ! && > _ifptr -> -> -> 0 `i `l `ul >= / - _ofs -> -> -> 1 `i `l `ul _bcs / - _ifptr -> -> -> 1 `i `l `ul _bcs 465  ]
{
[; ;ff.c: 3207: fp->fptr = (ifptr - 1) & ~(bcs - 1);
"3207
[e = . *U _fp 4 & - _ifptr -> -> -> 1 `i `l `ul ~ - _bcs -> -> -> 1 `i `l `ul ]
[; ;ff.c: 3208: ofs -= fp->fptr;
"3208
[e =- _ofs . *U _fp 4 ]
[; ;ff.c: 3209: clst = fp->clust;
"3209
[e = _clst . *U _fp 7 ]
"3210
}
[; ;ff.c: 3210: } else {
[e $U 466  ]
[e :U 465 ]
{
[; ;ff.c: 3211: clst = fp->sclust;
"3211
[e = _clst . *U _fp 6 ]
[; ;ff.c: 3213: if (clst == 0) {
"3213
[e $ ! == _clst -> -> -> 0 `i `l `ul 467  ]
{
[; ;ff.c: 3214: clst = create_chain(fp->fs, 0);
"3214
[e = _clst ( _create_chain (2 , . *U _fp 0 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3215: if (clst == 1) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"3215
[e $ ! == _clst -> -> -> 1 `i `l `ul 468  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 440  ]
}
[e :U 468 ]
[; ;ff.c: 3216: if (clst == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"3216
[e $ ! == _clst -> -1 `ul 469  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 440  ]
}
[e :U 469 ]
[; ;ff.c: 3217: fp->sclust = clst;
"3217
[e = . *U _fp 6 _clst ]
"3218
}
[e :U 467 ]
[; ;ff.c: 3218: }
[; ;ff.c: 3220: fp->clust = clst;
"3220
[e = . *U _fp 7 _clst ]
"3221
}
[e :U 466 ]
[; ;ff.c: 3221: }
[; ;ff.c: 3222: if (clst != 0) {
"3222
[e $ ! != _clst -> -> -> 0 `i `l `ul 470  ]
{
[; ;ff.c: 3223: while (ofs > bcs) {
"3223
[e $U 471  ]
[e :U 472 ]
{
[; ;ff.c: 3225: if (fp->flag & 0x02) {
"3225
[e $ ! != & -> . *U _fp 2 `i -> 2 `i -> 0 `i 474  ]
{
[; ;ff.c: 3226: clst = create_chain(fp->fs, clst);
"3226
[e = _clst ( _create_chain (2 , . *U _fp 0 _clst ]
[; ;ff.c: 3227: if (clst == 0) {
"3227
[e $ ! == _clst -> -> -> 0 `i `l `ul 475  ]
{
[; ;ff.c: 3228: ofs = bcs; break;
"3228
[e = _ofs _bcs ]
[e $U 473  ]
"3229
}
[e :U 475 ]
"3230
}
[; ;ff.c: 3229: }
[; ;ff.c: 3230: } else
[e $U 476  ]
[e :U 474 ]
[; ;ff.c: 3232: clst = get_fat(fp->fs, clst);
"3232
[e = _clst ( _get_fat (2 , . *U _fp 0 _clst ]
[e :U 476 ]
[; ;ff.c: 3233: if (clst == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"3233
[e $ ! == _clst -> -1 `ul 477  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 440  ]
}
[e :U 477 ]
[; ;ff.c: 3234: if (clst <= 1 || clst >= fp->fs->n_fatent) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"3234
[e $ ! || <= _clst -> -> -> 1 `i `l `ul >= _clst . *U . *U _fp 0 11 478  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 440  ]
}
[e :U 478 ]
[; ;ff.c: 3235: fp->clust = clst;
"3235
[e = . *U _fp 7 _clst ]
[; ;ff.c: 3236: fp->fptr += bcs;
"3236
[e =+ . *U _fp 4 _bcs ]
[; ;ff.c: 3237: ofs -= bcs;
"3237
[e =- _ofs _bcs ]
"3238
}
[e :U 471 ]
"3223
[e $ > _ofs _bcs 472  ]
[e :U 473 ]
[; ;ff.c: 3238: }
[; ;ff.c: 3239: fp->fptr += ofs;
"3239
[e =+ . *U _fp 4 _ofs ]
[; ;ff.c: 3240: if (ofs % ((UINT)512)) {
"3240
[e $ ! != % _ofs -> -> -> 512 `i `ui `ul -> -> 0 `i `ul 479  ]
{
[; ;ff.c: 3241: nsect = clust2sect(fp->fs, clst);
"3241
[e = _nsect ( _clust2sect (2 , . *U _fp 0 _clst ]
[; ;ff.c: 3242: if (!nsect) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"3242
[e $ ! ! != _nsect -> -> 0 `i `ul 480  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 440  ]
}
[e :U 480 ]
[; ;ff.c: 3243: nsect += ofs / ((UINT)512);
"3243
[e =+ _nsect / _ofs -> -> -> 512 `i `ui `ul ]
"3244
}
[e :U 479 ]
"3245
}
[e :U 470 ]
"3246
}
[e :U 464 ]
[; ;ff.c: 3244: }
[; ;ff.c: 3245: }
[; ;ff.c: 3246: }
[; ;ff.c: 3247: if (fp->fptr % ((UINT)512) && nsect != fp->dsect) {
"3247
[e $ ! && != % . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> 0 `i `ul != _nsect . *U _fp 8 481  ]
{
[; ;ff.c: 3259: fp->dsect = nsect;
"3259
[e = . *U _fp 8 _nsect ]
"3260
}
[e :U 481 ]
[; ;ff.c: 3260: }
[; ;ff.c: 3262: if (fp->fptr > fp->fsize) {
"3262
[e $ ! > . *U _fp 4 . *U _fp 5 482  ]
{
[; ;ff.c: 3263: fp->fsize = fp->fptr;
"3263
[e = . *U _fp 5 . *U _fp 4 ]
[; ;ff.c: 3264: fp->flag |= 0x20;
"3264
[e =| . *U _fp 2 -> -> 32 `i `uc ]
"3265
}
[e :U 482 ]
"3267
}
[e :U 462 ]
[; ;ff.c: 3265: }
[; ;ff.c: 3267: }
[; ;ff.c: 3269: return res;
"3269
[e ) _res ]
[e $UE 440  ]
[; ;ff.c: 3270: }
"3270
[e :UE 440 ]
}
"3279
[v _f_opendir `(E67 ~T0 @X0 1 ef2`*S3`*Cuc ]
"3283
{
[; ;ff.c: 3279: FRESULT f_opendir (
[; ;ff.c: 3280: DIR* dp,
[; ;ff.c: 3281: const TCHAR* path
[; ;ff.c: 3282: )
[; ;ff.c: 3283: {
[e :U _f_opendir ]
"3280
[v _dp `*S3 ~T0 @X0 1 r1 ]
"3281
[v _path `*Cuc ~T0 @X0 1 r2 ]
"3283
[f ]
"3284
[v _res `E67 ~T0 @X0 1 a ]
"3285
[v _fs `*S1 ~T0 @X0 1 a ]
"3286
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3284: FRESULT res;
[; ;ff.c: 3285: FATFS* fs;
[; ;ff.c: 3286: BYTE sfn[12];
[; ;ff.c: 3289: if (!dp) return FR_INVALID_OBJECT;
"3289
[e $ ! ! != _dp -> -> 0 `i `*S3 484  ]
[e ) -> . `E67 9 `E67 ]
[e $UE 483  ]
[e :U 484 ]
[; ;ff.c: 3292: res = find_volume(&fs, &path, 0);
"3292
[e = _res ( _find_volume (3 , , &U _fs &U _path -> -> 0 `i `uc ]
[; ;ff.c: 3293: if (res == FR_OK) {
"3293
[e $ ! == -> _res `i -> . `E67 0 `i 485  ]
{
[; ;ff.c: 3294: dp->fs = fs;
"3294
[e = . *U _dp 0 _fs ]
[; ;ff.c: 3295: (*dp).fn = sfn;
"3295
[e = . *U _dp 7 &U _sfn ]
[; ;ff.c: 3296: res = follow_path(dp, path);
"3296
[e = _res ( _follow_path (2 , _dp _path ]
[; ;ff.c: 3297: ;
[; ;ff.c: 3298: if (res == FR_OK) {
"3298
[e $ ! == -> _res `i -> . `E67 0 `i 486  ]
{
[; ;ff.c: 3299: if (dp->dir) {
"3299
[e $ ! != . *U _dp 6 -> -> 0 `i `*uc 487  ]
{
[; ;ff.c: 3300: if (dp->dir[11] & 0x10)
"3300
[e $ ! != & -> *U + . *U _dp 6 * -> -> 11 `i `x -> -> # *U . *U _dp 6 `i `x `i -> 16 `i -> 0 `i 488  ]
[; ;ff.c: 3301: dp->sclust = ld_clust(fs, dp->dir);
"3301
[e = . *U _dp 3 ( _ld_clust (2 , _fs -> . *U _dp 6 `*Cuc ]
[e $U 489  ]
"3302
[e :U 488 ]
[; ;ff.c: 3302: else
[; ;ff.c: 3303: res = FR_NO_PATH;
"3303
[e = _res -> . `E67 5 `E67 ]
[e :U 489 ]
"3304
}
[e :U 487 ]
[; ;ff.c: 3304: }
[; ;ff.c: 3305: if (res == FR_OK) {
"3305
[e $ ! == -> _res `i -> . `E67 0 `i 490  ]
{
[; ;ff.c: 3306: dp->id = fs->id;
"3306
[e = . *U _dp 1 . *U _fs 6 ]
[; ;ff.c: 3307: res = dir_sdi(dp, 0);
"3307
[e = _res ( _dir_sdi (2 , _dp -> -> 0 `i `ui ]
"3319
}
[e :U 490 ]
"3320
}
[e :U 486 ]
[; ;ff.c: 3319: }
[; ;ff.c: 3320: }
[; ;ff.c: 3321: if (res == FR_NO_FILE) res = FR_NO_PATH;
"3321
[e $ ! == -> _res `i -> . `E67 4 `i 491  ]
[e = _res -> . `E67 5 `E67 ]
[e :U 491 ]
"3322
}
[e :U 485 ]
[; ;ff.c: 3322: }
[; ;ff.c: 3323: if (res != FR_OK) dp->fs = 0;
"3323
[e $ ! != -> _res `i -> . `E67 0 `i 492  ]
[e = . *U _dp 0 -> -> 0 `i `*S1 ]
[e :U 492 ]
[; ;ff.c: 3325: return res;
"3325
[e ) _res ]
[e $UE 483  ]
[; ;ff.c: 3326: }
"3326
[e :UE 483 ]
}
"3335
[v _f_closedir `(E67 ~T0 @X0 1 ef1`*S3 ]
"3338
{
[; ;ff.c: 3335: FRESULT f_closedir (
[; ;ff.c: 3336: DIR *dp
[; ;ff.c: 3337: )
[; ;ff.c: 3338: {
[e :U _f_closedir ]
"3336
[v _dp `*S3 ~T0 @X0 1 r1 ]
"3338
[f ]
"3339
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 3339: FRESULT res;
[; ;ff.c: 3342: res = validate(dp);
"3342
[e = _res ( _validate (1 -> _dp `*v ]
[; ;ff.c: 3343: if (res == FR_OK) {
"3343
[e $ ! == -> _res `i -> . `E67 0 `i 494  ]
{
[; ;ff.c: 3352: dp->fs = 0;
"3352
[e = . *U _dp 0 -> -> 0 `i `*S1 ]
"3356
}
[e :U 494 ]
[; ;ff.c: 3356: }
[; ;ff.c: 3357: return res;
"3357
[e ) _res ]
[e $UE 493  ]
[; ;ff.c: 3358: }
"3358
[e :UE 493 ]
}
"3367
[v _f_readdir `(E67 ~T0 @X0 1 ef2`*S3`*S4 ]
"3371
{
[; ;ff.c: 3367: FRESULT f_readdir (
[; ;ff.c: 3368: DIR* dp,
[; ;ff.c: 3369: FILINFO* fno
[; ;ff.c: 3370: )
[; ;ff.c: 3371: {
[e :U _f_readdir ]
"3368
[v _dp `*S3 ~T0 @X0 1 r1 ]
"3369
[v _fno `*S4 ~T0 @X0 1 r2 ]
"3371
[f ]
"3372
[v _res `E67 ~T0 @X0 1 a ]
"3373
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3372: FRESULT res;
[; ;ff.c: 3373: BYTE sfn[12];
[; ;ff.c: 3376: res = validate(dp);
"3376
[e = _res ( _validate (1 -> _dp `*v ]
[; ;ff.c: 3377: if (res == FR_OK) {
"3377
[e $ ! == -> _res `i -> . `E67 0 `i 496  ]
{
[; ;ff.c: 3378: if (!fno) {
"3378
[e $ ! ! != _fno -> -> 0 `i `*S4 497  ]
{
[; ;ff.c: 3379: res = dir_sdi(dp, 0);
"3379
[e = _res ( _dir_sdi (2 , _dp -> -> 0 `i `ui ]
"3380
}
[; ;ff.c: 3380: } else {
[e $U 498  ]
[e :U 497 ]
{
[; ;ff.c: 3381: (*dp).fn = sfn;
"3381
[e = . *U _dp 7 &U _sfn ]
[; ;ff.c: 3382: res = dir_read(dp, 0);
"3382
[e = _res ( _dir_read (2 , _dp -> 0 `i ]
[; ;ff.c: 3383: if (res == FR_NO_FILE) {
"3383
[e $ ! == -> _res `i -> . `E67 4 `i 499  ]
{
[; ;ff.c: 3384: dp->sect = 0;
"3384
[e = . *U _dp 5 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3385: res = FR_OK;
"3385
[e = _res -> . `E67 0 `E67 ]
"3386
}
[e :U 499 ]
[; ;ff.c: 3386: }
[; ;ff.c: 3387: if (res == FR_OK) {
"3387
[e $ ! == -> _res `i -> . `E67 0 `i 500  ]
{
[; ;ff.c: 3388: get_fileinfo(dp, fno);
"3388
[e ( _get_fileinfo (2 , _dp _fno ]
[; ;ff.c: 3389: res = dir_next(dp, 0);
"3389
[e = _res ( _dir_next (2 , _dp -> 0 `i ]
[; ;ff.c: 3390: if (res == FR_NO_FILE) {
"3390
[e $ ! == -> _res `i -> . `E67 4 `i 501  ]
{
[; ;ff.c: 3391: dp->sect = 0;
"3391
[e = . *U _dp 5 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3392: res = FR_OK;
"3392
[e = _res -> . `E67 0 `E67 ]
"3393
}
[e :U 501 ]
"3394
}
[e :U 500 ]
[; ;ff.c: 3393: }
[; ;ff.c: 3394: }
[; ;ff.c: 3395: ;
"3396
}
[e :U 498 ]
"3397
}
[e :U 496 ]
[; ;ff.c: 3396: }
[; ;ff.c: 3397: }
[; ;ff.c: 3399: return res;
"3399
[e ) _res ]
[e $UE 495  ]
[; ;ff.c: 3400: }
"3400
[e :UE 495 ]
}
"3409
[v _f_findnext `(E67 ~T0 @X0 1 ef2`*S3`*S4 ]
"3413
{
[; ;ff.c: 3409: FRESULT f_findnext (
[; ;ff.c: 3410: DIR* dp,
[; ;ff.c: 3411: FILINFO* fno
[; ;ff.c: 3412: )
[; ;ff.c: 3413: {
[e :U _f_findnext ]
"3410
[v _dp `*S3 ~T0 @X0 1 r1 ]
"3411
[v _fno `*S4 ~T0 @X0 1 r2 ]
"3413
[f ]
"3414
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 3414: FRESULT res;
[; ;ff.c: 3417: for (;;) {
"3417
{
[e :U 503 ]
{
[; ;ff.c: 3418: res = f_readdir(dp, fno);
"3418
[e = _res ( _f_readdir (2 , _dp _fno ]
[; ;ff.c: 3419: if (res != FR_OK || !fno || !fno->fname[0]) break;
"3419
[e $ ! || || != -> _res `i -> . `E67 0 `i ! != _fno -> -> 0 `i `*S4 ! != -> *U + &U . *U _fno 4 * -> -> -> 0 `i `ui `ux -> -> # *U &U . *U _fno 4 `ui `ux `i -> -> -> 0 `i `uc `i 506  ]
[e $U 504  ]
[e :U 506 ]
[; ;ff.c: 3423: if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;
"3423
[e $ ! != ( _pattern_matching (4 , , , . *U _dp 8 -> &U . *U _fno 4 `*Cuc -> 0 `i -> 0 `i -> 0 `i 507  ]
[e $U 504  ]
[e :U 507 ]
"3424
}
[; ;ff.c: 3424: }
[e $U 503  ]
[e :U 504 ]
}
[; ;ff.c: 3425: return res;
"3425
[e ) _res ]
[e $UE 502  ]
[; ;ff.c: 3427: }
"3427
[e :UE 502 ]
}
"3435
[v _f_findfirst `(E67 ~T0 @X0 1 ef4`*S3`*S4`*Cuc`*Cuc ]
"3441
{
[; ;ff.c: 3435: FRESULT f_findfirst (
[; ;ff.c: 3436: DIR* dp,
[; ;ff.c: 3437: FILINFO* fno,
[; ;ff.c: 3438: const TCHAR* path,
[; ;ff.c: 3439: const TCHAR* pattern
[; ;ff.c: 3440: )
[; ;ff.c: 3441: {
[e :U _f_findfirst ]
"3436
[v _dp `*S3 ~T0 @X0 1 r1 ]
"3437
[v _fno `*S4 ~T0 @X0 1 r2 ]
"3438
[v _path `*Cuc ~T0 @X0 1 r3 ]
"3439
[v _pattern `*Cuc ~T0 @X0 1 r4 ]
"3441
[f ]
"3442
[v _res `E67 ~T0 @X0 1 a ]
[; ;ff.c: 3442: FRESULT res;
[; ;ff.c: 3445: dp->pat = pattern;
"3445
[e = . *U _dp 8 _pattern ]
[; ;ff.c: 3446: res = f_opendir(dp, path);
"3446
[e = _res ( _f_opendir (2 , _dp _path ]
[; ;ff.c: 3447: if (res == FR_OK)
"3447
[e $ ! == -> _res `i -> . `E67 0 `i 509  ]
[; ;ff.c: 3448: res = f_findnext(dp, fno);
"3448
[e = _res ( _f_findnext (2 , _dp _fno ]
[e :U 509 ]
[; ;ff.c: 3449: return res;
"3449
[e ) _res ]
[e $UE 508  ]
[; ;ff.c: 3450: }
"3450
[e :UE 508 ]
}
"3461
[v _f_stat `(E67 ~T0 @X0 1 ef2`*Cuc`*S4 ]
"3465
{
[; ;ff.c: 3461: FRESULT f_stat (
[; ;ff.c: 3462: const TCHAR* path,
[; ;ff.c: 3463: FILINFO* fno
[; ;ff.c: 3464: )
[; ;ff.c: 3465: {
[e :U _f_stat ]
"3462
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3463
[v _fno `*S4 ~T0 @X0 1 r2 ]
"3465
[f ]
"3466
[v _res `E67 ~T0 @X0 1 a ]
"3467
[v _dj `S3 ~T0 @X0 1 a ]
"3468
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3466: FRESULT res;
[; ;ff.c: 3467: DIR dj;
[; ;ff.c: 3468: BYTE sfn[12];
[; ;ff.c: 3472: res = find_volume(&dj.fs, &path, 0);
"3472
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 0 `i `uc ]
[; ;ff.c: 3473: if (res == FR_OK) {
"3473
[e $ ! == -> _res `i -> . `E67 0 `i 511  ]
{
[; ;ff.c: 3474: (dj).fn = sfn;
"3474
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3475: res = follow_path(&dj, path);
"3475
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3476: if (res == FR_OK) {
"3476
[e $ ! == -> _res `i -> . `E67 0 `i 512  ]
{
[; ;ff.c: 3477: if (dj.dir) {
"3477
[e $ ! != . _dj 6 -> -> 0 `i `*uc 513  ]
{
[; ;ff.c: 3478: if (fno) get_fileinfo(&dj, fno);
"3478
[e $ ! != _fno -> -> 0 `i `*S4 514  ]
[e ( _get_fileinfo (2 , &U _dj _fno ]
[e :U 514 ]
"3479
}
[; ;ff.c: 3479: } else {
[e $U 515  ]
[e :U 513 ]
{
[; ;ff.c: 3480: res = FR_INVALID_NAME;
"3480
[e = _res -> . `E67 6 `E67 ]
"3481
}
[e :U 515 ]
"3482
}
[e :U 512 ]
[; ;ff.c: 3481: }
[; ;ff.c: 3482: }
[; ;ff.c: 3483: ;
"3484
}
[e :U 511 ]
[; ;ff.c: 3484: }
[; ;ff.c: 3486: return res;
"3486
[e ) _res ]
[e $UE 510  ]
[; ;ff.c: 3487: }
"3487
[e :UE 510 ]
}
"3496
[v _f_getfree `(E67 ~T0 @X0 1 ef3`*Cuc`*ul`**S1 ]
"3501
{
[; ;ff.c: 3496: FRESULT f_getfree (
[; ;ff.c: 3497: const TCHAR* path,
[; ;ff.c: 3498: DWORD* nclst,
[; ;ff.c: 3499: FATFS** fatfs
[; ;ff.c: 3500: )
[; ;ff.c: 3501: {
[e :U _f_getfree ]
"3497
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3498
[v _nclst `*ul ~T0 @X0 1 r2 ]
"3499
[v _fatfs `**S1 ~T0 @X0 1 r3 ]
"3501
[f ]
"3502
[v _res `E67 ~T0 @X0 1 a ]
"3503
[v _fs `*S1 ~T0 @X0 1 a ]
"3504
[v _nfree `ul ~T0 @X0 1 a ]
[v _clst `ul ~T0 @X0 1 a ]
[v _sect `ul ~T0 @X0 1 a ]
[v _stat `ul ~T0 @X0 1 a ]
"3505
[v _i `ui ~T0 @X0 1 a ]
"3506
[v _fat `uc ~T0 @X0 1 a ]
[v _p `*uc ~T0 @X0 1 a ]
[; ;ff.c: 3502: FRESULT res;
[; ;ff.c: 3503: FATFS *fs;
[; ;ff.c: 3504: DWORD nfree, clst, sect, stat;
[; ;ff.c: 3505: UINT i;
[; ;ff.c: 3506: BYTE fat, *p;
[; ;ff.c: 3510: res = find_volume(fatfs, &path, 0);
"3510
[e = _res ( _find_volume (3 , , _fatfs &U _path -> -> 0 `i `uc ]
[; ;ff.c: 3511: fs = *fatfs;
"3511
[e = _fs *U _fatfs ]
[; ;ff.c: 3512: if (res == FR_OK) {
"3512
[e $ ! == -> _res `i -> . `E67 0 `i 517  ]
{
[; ;ff.c: 3514: if (fs->free_clust <= fs->n_fatent - 2) {
"3514
[e $ ! <= . *U _fs 9 - . *U _fs 11 -> -> -> 2 `i `l `ul 518  ]
{
[; ;ff.c: 3515: *nclst = fs->free_clust;
"3515
[e = *U _nclst . *U _fs 9 ]
"3516
}
[; ;ff.c: 3516: } else {
[e $U 519  ]
[e :U 518 ]
{
[; ;ff.c: 3518: fat = fs->fs_type;
"3518
[e = _fat . *U _fs 0 ]
[; ;ff.c: 3519: nfree = 0;
"3519
[e = _nfree -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3520: if (fat == 1) {
"3520
[e $ ! == -> _fat `i -> 1 `i 520  ]
{
[; ;ff.c: 3521: clst = 2;
"3521
[e = _clst -> -> -> 2 `i `l `ul ]
[; ;ff.c: 3522: do {
"3522
[e :U 523 ]
{
[; ;ff.c: 3523: stat = get_fat(fs, clst);
"3523
[e = _stat ( _get_fat (2 , _fs _clst ]
[; ;ff.c: 3524: if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
"3524
[e $ ! == _stat -> -1 `ul 524  ]
{
[e = _res -> . `E67 1 `E67 ]
[e $U 522  ]
}
[e :U 524 ]
[; ;ff.c: 3525: if (stat == 1) { res = FR_INT_ERR; break; }
"3525
[e $ ! == _stat -> -> -> 1 `i `l `ul 525  ]
{
[e = _res -> . `E67 2 `E67 ]
[e $U 522  ]
}
[e :U 525 ]
[; ;ff.c: 3526: if (stat == 0) nfree++;
"3526
[e $ ! == _stat -> -> -> 0 `i `l `ul 526  ]
[e ++ _nfree -> -> -> 1 `i `l `ul ]
[e :U 526 ]
"3527
}
[; ;ff.c: 3527: } while (++clst < fs->n_fatent);
[e $ < =+ _clst -> -> -> 1 `i `l `ul . *U _fs 11 523  ]
[e :U 522 ]
"3528
}
[; ;ff.c: 3528: } else {
[e $U 527  ]
[e :U 520 ]
{
[; ;ff.c: 3529: clst = fs->n_fatent; sect = fs->fatbase;
"3529
[e = _clst . *U _fs 11 ]
[e = _sect . *U _fs 14 ]
[; ;ff.c: 3530: i = 0; p = 0;
"3530
[e = _i -> -> 0 `i `ui ]
[e = _p -> -> 0 `i `*uc ]
[; ;ff.c: 3531: do {
"3531
[e :U 530 ]
{
[; ;ff.c: 3532: if (!i) {
"3532
[e $ ! ! != _i -> -> 0 `i `ui 531  ]
{
[; ;ff.c: 3533: res = move_window(fs, sect++);
"3533
[e = _res ( _move_window (2 , _fs ++ _sect -> -> -> 1 `i `l `ul ]
[; ;ff.c: 3534: if (res != FR_OK) break;
"3534
[e $ ! != -> _res `i -> . `E67 0 `i 532  ]
[e $U 529  ]
[e :U 532 ]
[; ;ff.c: 3535: p = fs->win;
"3535
[e = _p &U . *U _fs 18 ]
[; ;ff.c: 3536: i = ((UINT)512);
"3536
[e = _i -> -> 512 `i `ui ]
"3537
}
[e :U 531 ]
[; ;ff.c: 3537: }
[; ;ff.c: 3538: if (fat == 2) {
"3538
[e $ ! == -> _fat `i -> 2 `i 533  ]
{
[; ;ff.c: 3539: if ((WORD)(((WORD)*((BYTE*)(p)+1)<<8)|(WORD)*(BYTE*)(p)) == 0) nfree++;
"3539
[e $ ! == -> -> | << -> -> *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x `us `ui -> 8 `i -> -> *U _p `us `ui `us `ui -> -> 0 `i `ui 534  ]
[e ++ _nfree -> -> -> 1 `i `l `ul ]
[e :U 534 ]
[; ;ff.c: 3540: p += 2; i -= 2;
"3540
[e =+ _p * -> -> 2 `i `x -> -> # *U _p `i `x ]
[e =- _i -> -> 2 `i `ui ]
"3541
}
[; ;ff.c: 3541: } else {
[e $U 535  ]
[e :U 533 ]
{
[; ;ff.c: 3542: if (((DWORD)(((DWORD)*((BYTE*)(p)+3)<<24)|((DWORD)*((BYTE*)(p)+2)<<16)|((WORD)*((BYTE*)(p)+1)<<8)|*(BYTE*)(p)) & 0x0FFFFFFF) == 0) nfree++;
"3542
[e $ ! == & | | | << -> *U + _p * -> -> 3 `i `x -> -> # *U _p `i `x `ul -> 24 `i << -> *U + _p * -> -> 2 `i `x -> -> # *U _p `i `x `ul -> 16 `i -> << -> -> *U + _p * -> -> 1 `i `x -> -> # *U _p `i `x `us `ui -> 8 `i `ul -> *U _p `ul -> -> 268435455 `l `ul -> -> -> 0 `i `l `ul 536  ]
[e ++ _nfree -> -> -> 1 `i `l `ul ]
[e :U 536 ]
[; ;ff.c: 3543: p += 4; i -= 4;
"3543
[e =+ _p * -> -> 4 `i `x -> -> # *U _p `i `x ]
[e =- _i -> -> 4 `i `ui ]
"3544
}
[e :U 535 ]
"3545
}
[; ;ff.c: 3544: }
[; ;ff.c: 3545: } while (--clst);
[e $ != =- _clst -> -> -> 1 `i `l `ul -> -> 0 `i `ul 530  ]
[e :U 529 ]
"3546
}
[e :U 527 ]
[; ;ff.c: 3546: }
[; ;ff.c: 3547: fs->free_clust = nfree;
"3547
[e = . *U _fs 9 _nfree ]
[; ;ff.c: 3548: fs->fsi_flag |= 1;
"3548
[e =| . *U _fs 5 -> -> 1 `i `uc ]
[; ;ff.c: 3549: *nclst = nfree;
"3549
[e = *U _nclst _nfree ]
"3550
}
[e :U 519 ]
"3551
}
[e :U 517 ]
[; ;ff.c: 3550: }
[; ;ff.c: 3551: }
[; ;ff.c: 3552: return res;
"3552
[e ) _res ]
[e $UE 516  ]
[; ;ff.c: 3553: }
"3553
[e :UE 516 ]
}
"3562
[v _f_truncate `(E67 ~T0 @X0 1 ef1`*S2 ]
"3565
{
[; ;ff.c: 3562: FRESULT f_truncate (
[; ;ff.c: 3563: FIL* fp
[; ;ff.c: 3564: )
[; ;ff.c: 3565: {
[e :U _f_truncate ]
"3563
[v _fp `*S2 ~T0 @X0 1 r1 ]
"3565
[f ]
"3566
[v _res `E67 ~T0 @X0 1 a ]
"3567
[v _ncl `ul ~T0 @X0 1 a ]
[; ;ff.c: 3566: FRESULT res;
[; ;ff.c: 3567: DWORD ncl;
[; ;ff.c: 3570: res = validate(fp);
"3570
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 3571: if (res == FR_OK) {
"3571
[e $ ! == -> _res `i -> . `E67 0 `i 538  ]
{
[; ;ff.c: 3572: if (fp->err) {
"3572
[e $ ! != -> . *U _fp 3 `i -> -> -> 0 `i `uc `i 539  ]
{
[; ;ff.c: 3573: res = (FRESULT)fp->err;
"3573
[e = _res -> . *U _fp 3 `E67 ]
"3574
}
[; ;ff.c: 3574: } else {
[e $U 540  ]
[e :U 539 ]
{
[; ;ff.c: 3575: if (!(fp->flag & 0x02))
"3575
[e $ ! ! != & -> . *U _fp 2 `i -> 2 `i -> 0 `i 541  ]
[; ;ff.c: 3576: res = FR_DENIED;
"3576
[e = _res -> . `E67 7 `E67 ]
[e :U 541 ]
"3577
}
[e :U 540 ]
"3578
}
[e :U 538 ]
[; ;ff.c: 3577: }
[; ;ff.c: 3578: }
[; ;ff.c: 3579: if (res == FR_OK) {
"3579
[e $ ! == -> _res `i -> . `E67 0 `i 542  ]
{
[; ;ff.c: 3580: if (fp->fsize > fp->fptr) {
"3580
[e $ ! > . *U _fp 5 . *U _fp 4 543  ]
{
[; ;ff.c: 3581: fp->fsize = fp->fptr;
"3581
[e = . *U _fp 5 . *U _fp 4 ]
[; ;ff.c: 3582: fp->flag |= 0x20;
"3582
[e =| . *U _fp 2 -> -> 32 `i `uc ]
[; ;ff.c: 3583: if (fp->fptr == 0) {
"3583
[e $ ! == . *U _fp 4 -> -> -> 0 `i `l `ul 544  ]
{
[; ;ff.c: 3584: res = remove_chain(fp->fs, fp->sclust);
"3584
[e = _res ( _remove_chain (2 , . *U _fp 0 . *U _fp 6 ]
[; ;ff.c: 3585: fp->sclust = 0;
"3585
[e = . *U _fp 6 -> -> -> 0 `i `l `ul ]
"3586
}
[; ;ff.c: 3586: } else {
[e $U 545  ]
[e :U 544 ]
{
[; ;ff.c: 3587: ncl = get_fat(fp->fs, fp->clust);
"3587
[e = _ncl ( _get_fat (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 3588: res = FR_OK;
"3588
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 3589: if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
"3589
[e $ ! == _ncl -> -1 `ul 546  ]
[e = _res -> . `E67 1 `E67 ]
[e :U 546 ]
[; ;ff.c: 3590: if (ncl == 1) res = FR_INT_ERR;
"3590
[e $ ! == _ncl -> -> -> 1 `i `l `ul 547  ]
[e = _res -> . `E67 2 `E67 ]
[e :U 547 ]
[; ;ff.c: 3591: if (res == FR_OK && ncl < fp->fs->n_fatent) {
"3591
[e $ ! && == -> _res `i -> . `E67 0 `i < _ncl . *U . *U _fp 0 11 548  ]
{
[; ;ff.c: 3592: res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
"3592
[e = _res ( _put_fat (3 , , . *U _fp 0 . *U _fp 7 -> -> 268435455 `l `ul ]
[; ;ff.c: 3593: if (res == FR_OK) res = remove_chain(fp->fs, ncl);
"3593
[e $ ! == -> _res `i -> . `E67 0 `i 549  ]
[e = _res ( _remove_chain (2 , . *U _fp 0 _ncl ]
[e :U 549 ]
"3594
}
[e :U 548 ]
"3595
}
[e :U 545 ]
"3604
}
[e :U 543 ]
[; ;ff.c: 3594: }
[; ;ff.c: 3595: }
[; ;ff.c: 3604: }
[; ;ff.c: 3605: if (res != FR_OK) fp->err = (FRESULT)res;
"3605
[e $ ! != -> _res `i -> . `E67 0 `i 550  ]
[e = . *U _fp 3 -> _res `uc ]
[e :U 550 ]
"3606
}
[e :U 542 ]
[; ;ff.c: 3606: }
[; ;ff.c: 3608: return res;
"3608
[e ) _res ]
[e $UE 537  ]
[; ;ff.c: 3609: }
"3609
[e :UE 537 ]
}
"3618
[v _f_unlink `(E67 ~T0 @X0 1 ef1`*Cuc ]
"3621
{
[; ;ff.c: 3618: FRESULT f_unlink (
[; ;ff.c: 3619: const TCHAR* path
[; ;ff.c: 3620: )
[; ;ff.c: 3621: {
[e :U _f_unlink ]
"3619
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3621
[f ]
"3622
[v _res `E67 ~T0 @X0 1 a ]
"3623
[v _dj `S3 ~T0 @X0 1 a ]
[v _sdj `S3 ~T0 @X0 1 a ]
"3624
[v _dir `*uc ~T0 @X0 1 a ]
"3625
[v _dclst `ul ~T0 @X0 1 a ]
[; ;ff.c: 3622: FRESULT res;
[; ;ff.c: 3623: DIR dj, sdj;
[; ;ff.c: 3624: BYTE *dir;
[; ;ff.c: 3625: DWORD dclst = 0;
[e = _dclst -> -> -> 0 `i `l `ul ]
"3626
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3626: BYTE sfn[12];
[; ;ff.c: 3630: res = find_volume(&dj.fs, &path, 1);
"3630
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 1 `i `uc ]
[; ;ff.c: 3631: if (res == FR_OK) {
"3631
[e $ ! == -> _res `i -> . `E67 0 `i 552  ]
{
[; ;ff.c: 3632: (dj).fn = sfn;
"3632
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3633: res = follow_path(&dj, path);
"3633
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3634: if (2 && res == FR_OK && (dj.fn[11] & 0x20))
"3634
[e $ ! && && != -> 2 `i -> 0 `i == -> _res `i -> . `E67 0 `i != & -> *U + . _dj 7 * -> -> 11 `i `x -> -> # *U . _dj 7 `i `x `i -> 32 `i -> 0 `i 553  ]
[; ;ff.c: 3635: res = FR_INVALID_NAME;
"3635
[e = _res -> . `E67 6 `E67 ]
[e :U 553 ]
[; ;ff.c: 3639: if (res == FR_OK) {
"3639
[e $ ! == -> _res `i -> . `E67 0 `i 554  ]
{
[; ;ff.c: 3640: dir = dj.dir;
"3640
[e = _dir . _dj 6 ]
[; ;ff.c: 3641: if (!dir) {
"3641
[e $ ! ! != _dir -> -> 0 `i `*uc 555  ]
{
[; ;ff.c: 3642: res = FR_INVALID_NAME;
"3642
[e = _res -> . `E67 6 `E67 ]
"3643
}
[; ;ff.c: 3643: } else {
[e $U 556  ]
[e :U 555 ]
{
[; ;ff.c: 3644: if (dir[11] & 0x01)
"3644
[e $ ! != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 1 `i -> 0 `i 557  ]
[; ;ff.c: 3645: res = FR_DENIED;
"3645
[e = _res -> . `E67 7 `E67 ]
[e :U 557 ]
"3646
}
[e :U 556 ]
[; ;ff.c: 3646: }
[; ;ff.c: 3647: if (res == FR_OK) {
"3647
[e $ ! == -> _res `i -> . `E67 0 `i 558  ]
{
[; ;ff.c: 3648: dclst = ld_clust(dj.fs, dir);
"3648
[e = _dclst ( _ld_clust (2 , . _dj 0 -> _dir `*Cuc ]
[; ;ff.c: 3649: if (dclst && (dir[11] & 0x10)) {
"3649
[e $ ! && != _dclst -> -> 0 `i `ul != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 16 `i -> 0 `i 559  ]
{
[; ;ff.c: 3651: if (dclst == dj.fs->cdir) {
"3651
[e $ ! == _dclst . *U . _dj 0 10 560  ]
{
[; ;ff.c: 3652: res = FR_DENIED;
"3652
[e = _res -> . `E67 7 `E67 ]
"3653
}
[; ;ff.c: 3653: } else
[e $U 561  ]
[e :U 560 ]
[; ;ff.c: 3655: {
"3655
{
[; ;ff.c: 3656: mem_cpy(&sdj, &dj, sizeof (DIR));
"3656
[e ( _mem_cpy (3 , , -> &U _sdj `*v -> &U _dj `*Cv -> # `S3 `ui ]
[; ;ff.c: 3657: sdj.sclust = dclst;
"3657
[e = . _sdj 3 _dclst ]
[; ;ff.c: 3658: res = dir_sdi(&sdj, 2);
"3658
[e = _res ( _dir_sdi (2 , &U _sdj -> -> 2 `i `ui ]
[; ;ff.c: 3659: if (res == FR_OK) {
"3659
[e $ ! == -> _res `i -> . `E67 0 `i 562  ]
{
[; ;ff.c: 3660: res = dir_read(&sdj, 0);
"3660
[e = _res ( _dir_read (2 , &U _sdj -> 0 `i ]
[; ;ff.c: 3661: if (res == FR_OK) res = FR_DENIED;
"3661
[e $ ! == -> _res `i -> . `E67 0 `i 563  ]
[e = _res -> . `E67 7 `E67 ]
[e :U 563 ]
[; ;ff.c: 3662: if (res == FR_NO_FILE) res = FR_OK;
"3662
[e $ ! == -> _res `i -> . `E67 4 `i 564  ]
[e = _res -> . `E67 0 `E67 ]
[e :U 564 ]
"3663
}
[e :U 562 ]
"3664
}
[e :U 561 ]
"3665
}
[e :U 559 ]
"3666
}
[e :U 558 ]
[; ;ff.c: 3663: }
[; ;ff.c: 3664: }
[; ;ff.c: 3665: }
[; ;ff.c: 3666: }
[; ;ff.c: 3667: if (res == FR_OK) {
"3667
[e $ ! == -> _res `i -> . `E67 0 `i 565  ]
{
[; ;ff.c: 3668: res = dir_remove(&dj);
"3668
[e = _res ( _dir_remove (1 &U _dj ]
[; ;ff.c: 3669: if (res == FR_OK && dclst)
"3669
[e $ ! && == -> _res `i -> . `E67 0 `i != _dclst -> -> 0 `i `ul 566  ]
[; ;ff.c: 3670: res = remove_chain(dj.fs, dclst);
"3670
[e = _res ( _remove_chain (2 , . _dj 0 _dclst ]
[e :U 566 ]
[; ;ff.c: 3671: if (res == FR_OK) res = sync_fs(dj.fs);
"3671
[e $ ! == -> _res `i -> . `E67 0 `i 567  ]
[e = _res ( _sync_fs (1 . _dj 0 ]
[e :U 567 ]
"3672
}
[e :U 565 ]
"3673
}
[e :U 554 ]
[; ;ff.c: 3672: }
[; ;ff.c: 3673: }
[; ;ff.c: 3674: ;
"3675
}
[e :U 552 ]
[; ;ff.c: 3675: }
[; ;ff.c: 3677: return res;
"3677
[e ) _res ]
[e $UE 551  ]
[; ;ff.c: 3678: }
"3678
[e :UE 551 ]
}
"3687
[v _f_mkdir `(E67 ~T0 @X0 1 ef1`*Cuc ]
"3690
{
[; ;ff.c: 3687: FRESULT f_mkdir (
[; ;ff.c: 3688: const TCHAR* path
[; ;ff.c: 3689: )
[; ;ff.c: 3690: {
[e :U _f_mkdir ]
"3688
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3690
[f ]
"3691
[v _res `E67 ~T0 @X0 1 a ]
"3692
[v _dj `S3 ~T0 @X0 1 a ]
"3693
[v _dir `*uc ~T0 @X0 1 a ]
[v _n `uc ~T0 @X0 1 a ]
"3694
[v _dsc `ul ~T0 @X0 1 a ]
[v _dcl `ul ~T0 @X0 1 a ]
[v _pcl `ul ~T0 @X0 1 a ]
[v _tm `ul ~T0 @X0 1 a ]
[; ;ff.c: 3691: FRESULT res;
[; ;ff.c: 3692: DIR dj;
[; ;ff.c: 3693: BYTE *dir, n;
[; ;ff.c: 3694: DWORD dsc, dcl, pcl, tm = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
[e = _tm | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
"3695
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3695: BYTE sfn[12];
[; ;ff.c: 3699: res = find_volume(&dj.fs, &path, 1);
"3699
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 1 `i `uc ]
[; ;ff.c: 3700: if (res == FR_OK) {
"3700
[e $ ! == -> _res `i -> . `E67 0 `i 569  ]
{
[; ;ff.c: 3701: (dj).fn = sfn;
"3701
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3702: res = follow_path(&dj, path);
"3702
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3703: if (res == FR_OK) res = FR_EXIST;
"3703
[e $ ! == -> _res `i -> . `E67 0 `i 570  ]
[e = _res -> . `E67 8 `E67 ]
[e :U 570 ]
[; ;ff.c: 3704: if (2 && res == FR_NO_FILE && (dj.fn[11] & 0x20))
"3704
[e $ ! && && != -> 2 `i -> 0 `i == -> _res `i -> . `E67 4 `i != & -> *U + . _dj 7 * -> -> 11 `i `x -> -> # *U . _dj 7 `i `x `i -> 32 `i -> 0 `i 571  ]
[; ;ff.c: 3705: res = FR_INVALID_NAME;
"3705
[e = _res -> . `E67 6 `E67 ]
[e :U 571 ]
[; ;ff.c: 3706: if (res == FR_NO_FILE) {
"3706
[e $ ! == -> _res `i -> . `E67 4 `i 572  ]
{
[; ;ff.c: 3707: dcl = create_chain(dj.fs, 0);
"3707
[e = _dcl ( _create_chain (2 , . _dj 0 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3708: res = FR_OK;
"3708
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 3709: if (dcl == 0) res = FR_DENIED;
"3709
[e $ ! == _dcl -> -> -> 0 `i `l `ul 573  ]
[e = _res -> . `E67 7 `E67 ]
[e :U 573 ]
[; ;ff.c: 3710: if (dcl == 1) res = FR_INT_ERR;
"3710
[e $ ! == _dcl -> -> -> 1 `i `l `ul 574  ]
[e = _res -> . `E67 2 `E67 ]
[e :U 574 ]
[; ;ff.c: 3711: if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
"3711
[e $ ! == _dcl -> -1 `ul 575  ]
[e = _res -> . `E67 1 `E67 ]
[e :U 575 ]
[; ;ff.c: 3712: if (res == FR_OK)
"3712
[e $ ! == -> _res `i -> . `E67 0 `i 576  ]
[; ;ff.c: 3713: res = sync_window(dj.fs);
"3713
[e = _res ( _sync_window (1 . _dj 0 ]
[e :U 576 ]
[; ;ff.c: 3714: if (res == FR_OK) {
"3714
[e $ ! == -> _res `i -> . `E67 0 `i 577  ]
{
[; ;ff.c: 3715: dsc = clust2sect(dj.fs, dcl);
"3715
[e = _dsc ( _clust2sect (2 , . _dj 0 _dcl ]
[; ;ff.c: 3716: dir = dj.fs->win;
"3716
[e = _dir &U . *U . _dj 0 18 ]
[; ;ff.c: 3717: mem_set(dir, 0, ((UINT)512));
"3717
[e ( _mem_set (3 , , -> _dir `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 3718: mem_set(dir + 0, ' ', 11);
"3718
[e ( _mem_set (3 , , -> + _dir * -> -> 0 `i `x -> -> # *U _dir `i `x `*v -> -> 32 `ui `i -> -> 11 `i `ui ]
[; ;ff.c: 3719: dir[0] = '.';
"3719
[e = *U + _dir * -> -> 0 `i `x -> -> # *U _dir `i `x -> -> 46 `ui `uc ]
[; ;ff.c: 3720: dir[11] = 0x10;
"3720
[e = *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> -> 16 `i `uc ]
[; ;ff.c: 3721: *(BYTE*)(dir + 22)=(BYTE)(tm); *((BYTE*)(dir + 22)+1)=(BYTE)((WORD)(tm)>>8); *((BYTE*)(dir + 22)+2)=(BYTE)((DWORD)(tm)>>16); *((BYTE*)(dir + 22)+3)=(BYTE)((DWORD)(tm)>>24);
"3721
[e = *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x -> _tm `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _tm `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 16 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 24 `i `uc ]
[; ;ff.c: 3722: st_clust(dir, dcl);
"3722
[e ( _st_clust (2 , _dir _dcl ]
[; ;ff.c: 3723: mem_cpy(dir + 32, dir, 32);
"3723
[e ( _mem_cpy (3 , , -> + _dir * -> -> 32 `i `x -> -> # *U _dir `i `x `*v -> _dir `*Cv -> -> 32 `i `ui ]
[; ;ff.c: 3724: dir[32 + 1] = '.'; pcl = dj.sclust;
"3724
[e = *U + _dir * -> + -> 32 `i -> 1 `i `x -> -> # *U _dir `i `x -> -> 46 `ui `uc ]
[e = _pcl . _dj 3 ]
[; ;ff.c: 3725: if (dj.fs->fs_type == 3 && pcl == dj.fs->dirbase)
"3725
[e $ ! && == -> . *U . _dj 0 0 `i -> 3 `i == _pcl . *U . _dj 0 15 578  ]
[; ;ff.c: 3726: pcl = 0;
"3726
[e = _pcl -> -> -> 0 `i `l `ul ]
[e :U 578 ]
[; ;ff.c: 3727: st_clust(dir + 32, pcl);
"3727
[e ( _st_clust (2 , + _dir * -> -> 32 `i `x -> -> # *U _dir `i `x _pcl ]
[; ;ff.c: 3728: for (n = dj.fs->csize; n; n--) {
"3728
{
[e = _n . *U . _dj 0 2 ]
[e $U 582  ]
[e :U 579 ]
{
[; ;ff.c: 3729: dj.fs->winsect = dsc++;
"3729
[e = . *U . _dj 0 17 ++ _dsc -> -> -> 1 `i `l `ul ]
[; ;ff.c: 3730: dj.fs->wflag = 1;
"3730
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 3731: res = sync_window(dj.fs);
"3731
[e = _res ( _sync_window (1 . _dj 0 ]
[; ;ff.c: 3732: if (res != FR_OK) break;
"3732
[e $ ! != -> _res `i -> . `E67 0 `i 583  ]
[e $U 580  ]
[e :U 583 ]
[; ;ff.c: 3733: mem_set(dir, 0, ((UINT)512));
"3733
[e ( _mem_set (3 , , -> _dir `*v -> 0 `i -> -> 512 `i `ui ]
"3734
}
"3728
[e -- _n -> -> 1 `i `uc ]
[e :U 582 ]
[e $ != -> _n `i -> -> -> 0 `i `uc `i 579  ]
[e :U 580 ]
"3734
}
"3735
}
[e :U 577 ]
[; ;ff.c: 3734: }
[; ;ff.c: 3735: }
[; ;ff.c: 3736: if (res == FR_OK) res = dir_register(&dj);
"3736
[e $ ! == -> _res `i -> . `E67 0 `i 584  ]
[e = _res ( _dir_register (1 &U _dj ]
[e :U 584 ]
[; ;ff.c: 3737: if (res != FR_OK) {
"3737
[e $ ! != -> _res `i -> . `E67 0 `i 585  ]
{
[; ;ff.c: 3738: remove_chain(dj.fs, dcl);
"3738
[e ( _remove_chain (2 , . _dj 0 _dcl ]
"3739
}
[; ;ff.c: 3739: } else {
[e $U 586  ]
[e :U 585 ]
{
[; ;ff.c: 3740: dir = dj.dir;
"3740
[e = _dir . _dj 6 ]
[; ;ff.c: 3741: dir[11] = 0x10;
"3741
[e = *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> -> 16 `i `uc ]
[; ;ff.c: 3742: *(BYTE*)(dir + 22)=(BYTE)(tm); *((BYTE*)(dir + 22)+1)=(BYTE)((WORD)(tm)>>8); *((BYTE*)(dir + 22)+2)=(BYTE)((DWORD)(tm)>>16); *((BYTE*)(dir + 22)+3)=(BYTE)((DWORD)(tm)>>24);
"3742
[e = *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x -> _tm `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> -> -> _tm `us `ui -> 8 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 2 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 16 `i `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 3 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> _tm -> 24 `i `uc ]
[; ;ff.c: 3743: st_clust(dir, dcl);
"3743
[e ( _st_clust (2 , _dir _dcl ]
[; ;ff.c: 3744: dj.fs->wflag = 1;
"3744
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 3745: res = sync_fs(dj.fs);
"3745
[e = _res ( _sync_fs (1 . _dj 0 ]
"3746
}
[e :U 586 ]
"3747
}
[e :U 572 ]
[; ;ff.c: 3746: }
[; ;ff.c: 3747: }
[; ;ff.c: 3748: ;
"3749
}
[e :U 569 ]
[; ;ff.c: 3749: }
[; ;ff.c: 3751: return res;
"3751
[e ) _res ]
[e $UE 568  ]
[; ;ff.c: 3752: }
"3752
[e :UE 568 ]
}
"3761
[v _f_chmod `(E67 ~T0 @X0 1 ef3`*Cuc`uc`uc ]
"3766
{
[; ;ff.c: 3761: FRESULT f_chmod (
[; ;ff.c: 3762: const TCHAR* path,
[; ;ff.c: 3763: BYTE attr,
[; ;ff.c: 3764: BYTE mask
[; ;ff.c: 3765: )
[; ;ff.c: 3766: {
[e :U _f_chmod ]
"3762
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3763
[v _attr `uc ~T0 @X0 1 r2 ]
"3764
[v _mask `uc ~T0 @X0 1 r3 ]
"3766
[f ]
"3767
[v _res `E67 ~T0 @X0 1 a ]
"3768
[v _dj `S3 ~T0 @X0 1 a ]
"3769
[v _dir `*uc ~T0 @X0 1 a ]
"3770
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3767: FRESULT res;
[; ;ff.c: 3768: DIR dj;
[; ;ff.c: 3769: BYTE *dir;
[; ;ff.c: 3770: BYTE sfn[12];
[; ;ff.c: 3773: res = find_volume(&dj.fs, &path, 1);
"3773
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 1 `i `uc ]
[; ;ff.c: 3774: if (res == FR_OK) {
"3774
[e $ ! == -> _res `i -> . `E67 0 `i 588  ]
{
[; ;ff.c: 3775: (dj).fn = sfn;
"3775
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3776: res = follow_path(&dj, path);
"3776
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3777: ;
[; ;ff.c: 3778: if (2 && res == FR_OK && (dj.fn[11] & 0x20))
"3778
[e $ ! && && != -> 2 `i -> 0 `i == -> _res `i -> . `E67 0 `i != & -> *U + . _dj 7 * -> -> 11 `i `x -> -> # *U . _dj 7 `i `x `i -> 32 `i -> 0 `i 589  ]
[; ;ff.c: 3779: res = FR_INVALID_NAME;
"3779
[e = _res -> . `E67 6 `E67 ]
[e :U 589 ]
[; ;ff.c: 3780: if (res == FR_OK) {
"3780
[e $ ! == -> _res `i -> . `E67 0 `i 590  ]
{
[; ;ff.c: 3781: dir = dj.dir;
"3781
[e = _dir . _dj 6 ]
[; ;ff.c: 3782: if (!dir) {
"3782
[e $ ! ! != _dir -> -> 0 `i `*uc 591  ]
{
[; ;ff.c: 3783: res = FR_INVALID_NAME;
"3783
[e = _res -> . `E67 6 `E67 ]
"3784
}
[; ;ff.c: 3784: } else {
[e $U 592  ]
[e :U 591 ]
{
[; ;ff.c: 3785: mask &= 0x01|0x02|0x04|0x20;
"3785
[e =& _mask -> | | | -> 1 `i -> 2 `i -> 4 `i -> 32 `i `uc ]
[; ;ff.c: 3786: dir[11] = (attr & mask) | (dir[11] & (BYTE)~mask);
"3786
[e = *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> | & -> _attr `i -> _mask `i & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> -> ~ -> _mask `i `uc `i `uc ]
[; ;ff.c: 3787: dj.fs->wflag = 1;
"3787
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 3788: res = sync_fs(dj.fs);
"3788
[e = _res ( _sync_fs (1 . _dj 0 ]
"3789
}
[e :U 592 ]
"3790
}
[e :U 590 ]
"3791
}
[e :U 588 ]
[; ;ff.c: 3789: }
[; ;ff.c: 3790: }
[; ;ff.c: 3791: }
[; ;ff.c: 3793: return res;
"3793
[e ) _res ]
[e $UE 587  ]
[; ;ff.c: 3794: }
"3794
[e :UE 587 ]
}
"3803
[v _f_rename `(E67 ~T0 @X0 1 ef2`*Cuc`*Cuc ]
"3807
{
[; ;ff.c: 3803: FRESULT f_rename (
[; ;ff.c: 3804: const TCHAR* path_old,
[; ;ff.c: 3805: const TCHAR* path_new
[; ;ff.c: 3806: )
[; ;ff.c: 3807: {
[e :U _f_rename ]
"3804
[v _path_old `*Cuc ~T0 @X0 1 r1 ]
"3805
[v _path_new `*Cuc ~T0 @X0 1 r2 ]
"3807
[f ]
"3808
[v _res `E67 ~T0 @X0 1 a ]
"3809
[v _djo `S3 ~T0 @X0 1 a ]
[v _djn `S3 ~T0 @X0 1 a ]
"3810
[v _buf `uc ~T0 @X0 -> 21 `i a ]
[v _dir `*uc ~T0 @X0 1 a ]
"3811
[v _dw `ul ~T0 @X0 1 a ]
"3812
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3808: FRESULT res;
[; ;ff.c: 3809: DIR djo, djn;
[; ;ff.c: 3810: BYTE buf[21], *dir;
[; ;ff.c: 3811: DWORD dw;
[; ;ff.c: 3812: BYTE sfn[12];
[; ;ff.c: 3816: res = find_volume(&djo.fs, &path_old, 1);
"3816
[e = _res ( _find_volume (3 , , &U . _djo 0 &U _path_old -> -> 1 `i `uc ]
[; ;ff.c: 3817: if (res == FR_OK) {
"3817
[e $ ! == -> _res `i -> . `E67 0 `i 594  ]
{
[; ;ff.c: 3818: djn.fs = djo.fs;
"3818
[e = . _djn 0 . _djo 0 ]
[; ;ff.c: 3819: (djo).fn = sfn;
"3819
[e = . _djo 7 &U _sfn ]
[; ;ff.c: 3820: res = follow_path(&djo, path_old);
"3820
[e = _res ( _follow_path (2 , &U _djo _path_old ]
[; ;ff.c: 3821: if (2 && res == FR_OK && (djo.fn[11] & 0x20))
"3821
[e $ ! && && != -> 2 `i -> 0 `i == -> _res `i -> . `E67 0 `i != & -> *U + . _djo 7 * -> -> 11 `i `x -> -> # *U . _djo 7 `i `x `i -> 32 `i -> 0 `i 595  ]
[; ;ff.c: 3822: res = FR_INVALID_NAME;
"3822
[e = _res -> . `E67 6 `E67 ]
[e :U 595 ]
[; ;ff.c: 3826: if (res == FR_OK) {
"3826
[e $ ! == -> _res `i -> . `E67 0 `i 596  ]
{
[; ;ff.c: 3827: if (!djo.dir) {
"3827
[e $ ! ! != . _djo 6 -> -> 0 `i `*uc 597  ]
{
[; ;ff.c: 3828: res = FR_NO_FILE;
"3828
[e = _res -> . `E67 4 `E67 ]
"3829
}
[; ;ff.c: 3829: } else {
[e $U 598  ]
[e :U 597 ]
{
[; ;ff.c: 3830: mem_cpy(buf, djo.dir + 11, 21);
"3830
[e ( _mem_cpy (3 , , -> &U _buf `*v -> + . _djo 6 * -> -> 11 `i `x -> -> # *U . _djo 6 `i `x `*Cv -> -> 21 `i `ui ]
[; ;ff.c: 3831: mem_cpy(&djn, &djo, sizeof (DIR));
"3831
[e ( _mem_cpy (3 , , -> &U _djn `*v -> &U _djo `*Cv -> # `S3 `ui ]
[; ;ff.c: 3832: if (get_ldnumber(&path_new) >= 0)
"3832
[e $ ! >= ( _get_ldnumber (1 &U _path_new -> 0 `i 599  ]
[; ;ff.c: 3833: res = follow_path(&djn, path_new);
"3833
[e = _res ( _follow_path (2 , &U _djn _path_new ]
[e $U 600  ]
"3834
[e :U 599 ]
[; ;ff.c: 3834: else
[; ;ff.c: 3835: res = FR_INVALID_DRIVE;
"3835
[e = _res -> . `E67 11 `E67 ]
[e :U 600 ]
[; ;ff.c: 3836: if (res == FR_OK) res = FR_EXIST;
"3836
[e $ ! == -> _res `i -> . `E67 0 `i 601  ]
[e = _res -> . `E67 8 `E67 ]
[e :U 601 ]
[; ;ff.c: 3837: if (res == FR_NO_FILE) {
"3837
[e $ ! == -> _res `i -> . `E67 4 `i 602  ]
{
[; ;ff.c: 3838: res = dir_register(&djn);
"3838
[e = _res ( _dir_register (1 &U _djn ]
[; ;ff.c: 3839: if (res == FR_OK) {
"3839
[e $ ! == -> _res `i -> . `E67 0 `i 603  ]
{
[; ;ff.c: 3841: dir = djn.dir;
"3841
[e = _dir . _djn 6 ]
[; ;ff.c: 3842: mem_cpy(dir + 13, buf + 2, 19);
"3842
[e ( _mem_cpy (3 , , -> + _dir * -> -> 13 `i `x -> -> # *U _dir `i `x `*v -> + &U _buf * -> -> 2 `i `x -> -> # *U &U _buf `i `x `*Cv -> -> 19 `i `ui ]
[; ;ff.c: 3843: dir[11] = buf[0] | 0x20;
"3843
[e = *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x -> | -> *U + &U _buf * -> -> -> 0 `i `ui `ux -> -> # *U &U _buf `ui `ux `i -> 32 `i `uc ]
[; ;ff.c: 3844: djo.fs->wflag = 1;
"3844
[e = . *U . _djo 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 3845: if ((dir[11] & 0x10) && djo.sclust != djn.sclust) {
"3845
[e $ ! && != & -> *U + _dir * -> -> 11 `i `x -> -> # *U _dir `i `x `i -> 16 `i -> 0 `i != . _djo 3 . _djn 3 604  ]
{
[; ;ff.c: 3846: dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
"3846
[e = _dw ( _clust2sect (2 , . _djo 0 ( _ld_clust (2 , . _djo 0 -> _dir `*Cuc ]
[; ;ff.c: 3847: if (!dw) {
"3847
[e $ ! ! != _dw -> -> 0 `i `ul 605  ]
{
[; ;ff.c: 3848: res = FR_INT_ERR;
"3848
[e = _res -> . `E67 2 `E67 ]
"3849
}
[; ;ff.c: 3849: } else {
[e $U 606  ]
[e :U 605 ]
{
[; ;ff.c: 3850: res = move_window(djo.fs, dw);
"3850
[e = _res ( _move_window (2 , . _djo 0 _dw ]
[; ;ff.c: 3851: dir = djo.fs->win + 32 * 1;
"3851
[e = _dir + &U . *U . _djo 0 18 * -> * -> 32 `i -> 1 `i `x -> -> # *U &U . *U . _djo 0 18 `i `x ]
[; ;ff.c: 3852: if (res == FR_OK && dir[1] == '.') {
"3852
[e $ ! && == -> _res `i -> . `E67 0 `i == -> *U + _dir * -> -> 1 `i `x -> -> # *U _dir `i `x `ui -> 46 `ui 607  ]
{
[; ;ff.c: 3853: st_clust(dir, djn.sclust);
"3853
[e ( _st_clust (2 , _dir . _djn 3 ]
[; ;ff.c: 3854: djo.fs->wflag = 1;
"3854
[e = . *U . _djo 0 4 -> -> 1 `i `uc ]
"3855
}
[e :U 607 ]
"3856
}
[e :U 606 ]
"3857
}
[e :U 604 ]
[; ;ff.c: 3855: }
[; ;ff.c: 3856: }
[; ;ff.c: 3857: }
[; ;ff.c: 3858: if (res == FR_OK) {
"3858
[e $ ! == -> _res `i -> . `E67 0 `i 608  ]
{
[; ;ff.c: 3859: res = dir_remove(&djo);
"3859
[e = _res ( _dir_remove (1 &U _djo ]
[; ;ff.c: 3860: if (res == FR_OK)
"3860
[e $ ! == -> _res `i -> . `E67 0 `i 609  ]
[; ;ff.c: 3861: res = sync_fs(djo.fs);
"3861
[e = _res ( _sync_fs (1 . _djo 0 ]
[e :U 609 ]
"3862
}
[e :U 608 ]
"3864
}
[e :U 603 ]
"3865
}
[e :U 602 ]
"3866
}
[e :U 598 ]
"3867
}
[e :U 596 ]
[; ;ff.c: 3862: }
[; ;ff.c: 3864: }
[; ;ff.c: 3865: }
[; ;ff.c: 3866: }
[; ;ff.c: 3867: }
[; ;ff.c: 3868: ;
"3869
}
[e :U 594 ]
[; ;ff.c: 3869: }
[; ;ff.c: 3871: return res;
"3871
[e ) _res ]
[e $UE 593  ]
[; ;ff.c: 3872: }
"3872
[e :UE 593 ]
}
"3881
[v _f_utime `(E67 ~T0 @X0 1 ef2`*Cuc`*CS4 ]
"3885
{
[; ;ff.c: 3881: FRESULT f_utime (
[; ;ff.c: 3882: const TCHAR* path,
[; ;ff.c: 3883: const FILINFO* fno
[; ;ff.c: 3884: )
[; ;ff.c: 3885: {
[e :U _f_utime ]
"3882
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3883
[v _fno `*CS4 ~T0 @X0 1 r2 ]
"3885
[f ]
"3886
[v _res `E67 ~T0 @X0 1 a ]
"3887
[v _dj `S3 ~T0 @X0 1 a ]
"3888
[v _dir `*uc ~T0 @X0 1 a ]
"3889
[v _sfn `uc ~T0 @X0 -> 12 `i a ]
[; ;ff.c: 3886: FRESULT res;
[; ;ff.c: 3887: DIR dj;
[; ;ff.c: 3888: BYTE *dir;
[; ;ff.c: 3889: BYTE sfn[12];
[; ;ff.c: 3893: res = find_volume(&dj.fs, &path, 1);
"3893
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 1 `i `uc ]
[; ;ff.c: 3894: if (res == FR_OK) {
"3894
[e $ ! == -> _res `i -> . `E67 0 `i 611  ]
{
[; ;ff.c: 3895: (dj).fn = sfn;
"3895
[e = . _dj 7 &U _sfn ]
[; ;ff.c: 3896: res = follow_path(&dj, path);
"3896
[e = _res ( _follow_path (2 , &U _dj _path ]
[; ;ff.c: 3897: ;
[; ;ff.c: 3898: if (2 && res == FR_OK && (dj.fn[11] & 0x20))
"3898
[e $ ! && && != -> 2 `i -> 0 `i == -> _res `i -> . `E67 0 `i != & -> *U + . _dj 7 * -> -> 11 `i `x -> -> # *U . _dj 7 `i `x `i -> 32 `i -> 0 `i 612  ]
[; ;ff.c: 3899: res = FR_INVALID_NAME;
"3899
[e = _res -> . `E67 6 `E67 ]
[e :U 612 ]
[; ;ff.c: 3900: if (res == FR_OK) {
"3900
[e $ ! == -> _res `i -> . `E67 0 `i 613  ]
{
[; ;ff.c: 3901: dir = dj.dir;
"3901
[e = _dir . _dj 6 ]
[; ;ff.c: 3902: if (!dir) {
"3902
[e $ ! ! != _dir -> -> 0 `i `*uc 614  ]
{
[; ;ff.c: 3903: res = FR_INVALID_NAME;
"3903
[e = _res -> . `E67 6 `E67 ]
"3904
}
[; ;ff.c: 3904: } else {
[e $U 615  ]
[e :U 614 ]
{
[; ;ff.c: 3905: *(BYTE*)(dir + 22)=(BYTE)(fno->ftime); *((BYTE*)(dir + 22)+1)=(BYTE)((WORD)(fno->ftime)>>8);
"3905
[e = *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x -> . *U _fno 2 `uc ]
[e = *U + + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 22 `i `x -> -> # *U _dir `i `x `i `x -> >> -> . *U _fno 2 `ui -> 8 `i `uc ]
[; ;ff.c: 3906: *(BYTE*)(dir + 24)=(BYTE)(fno->fdate); *((BYTE*)(dir + 24)+1)=(BYTE)((WORD)(fno->fdate)>>8);
"3906
[e = *U + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x -> . *U _fno 1 `uc ]
[e = *U + + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x * -> -> 1 `i `x -> -> # *U + _dir * -> -> 24 `i `x -> -> # *U _dir `i `x `i `x -> >> -> . *U _fno 1 `ui -> 8 `i `uc ]
[; ;ff.c: 3907: dj.fs->wflag = 1;
"3907
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 3908: res = sync_fs(dj.fs);
"3908
[e = _res ( _sync_fs (1 . _dj 0 ]
"3909
}
[e :U 615 ]
"3910
}
[e :U 613 ]
"3911
}
[e :U 611 ]
[; ;ff.c: 3909: }
[; ;ff.c: 3910: }
[; ;ff.c: 3911: }
[; ;ff.c: 3913: return res;
"3913
[e ) _res ]
[e $UE 610  ]
[; ;ff.c: 3914: }
"3914
[e :UE 610 ]
}
"3929
[v _f_getlabel `(E67 ~T0 @X0 1 ef3`*Cuc`*uc`*ul ]
"3934
{
[; ;ff.c: 3929: FRESULT f_getlabel (
[; ;ff.c: 3930: const TCHAR* path,
[; ;ff.c: 3931: TCHAR* label,
[; ;ff.c: 3932: DWORD* vsn
[; ;ff.c: 3933: )
[; ;ff.c: 3934: {
[e :U _f_getlabel ]
"3930
[v _path `*Cuc ~T0 @X0 1 r1 ]
"3931
[v _label `*uc ~T0 @X0 1 r2 ]
"3932
[v _vsn `*ul ~T0 @X0 1 r3 ]
"3934
[f ]
"3935
[v _res `E67 ~T0 @X0 1 a ]
"3936
[v _dj `S3 ~T0 @X0 1 a ]
"3937
[v _i `ui ~T0 @X0 1 a ]
[v _j `ui ~T0 @X0 1 a ]
[; ;ff.c: 3935: FRESULT res;
[; ;ff.c: 3936: DIR dj;
[; ;ff.c: 3937: UINT i, j;
[; ;ff.c: 3944: res = find_volume(&dj.fs, &path, 0);
"3944
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _path -> -> 0 `i `uc ]
[; ;ff.c: 3947: if (res == FR_OK && label) {
"3947
[e $ ! && == -> _res `i -> . `E67 0 `i != _label -> -> 0 `i `*uc 617  ]
{
[; ;ff.c: 3948: dj.sclust = 0;
"3948
[e = . _dj 3 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 3949: res = dir_sdi(&dj, 0);
"3949
[e = _res ( _dir_sdi (2 , &U _dj -> -> 0 `i `ui ]
[; ;ff.c: 3950: if (res == FR_OK) {
"3950
[e $ ! == -> _res `i -> . `E67 0 `i 618  ]
{
[; ;ff.c: 3951: res = dir_read(&dj, 1);
"3951
[e = _res ( _dir_read (2 , &U _dj -> 1 `i ]
[; ;ff.c: 3952: if (res == FR_OK) {
"3952
[e $ ! == -> _res `i -> . `E67 0 `i 619  ]
{
[; ;ff.c: 3962: mem_cpy(label, dj.dir, 11);
"3962
[e ( _mem_cpy (3 , , -> _label `*v -> . _dj 6 `*Cv -> -> 11 `i `ui ]
[; ;ff.c: 3964: j = 11;
"3964
[e = _j -> -> 11 `i `ui ]
[; ;ff.c: 3965: do {
"3965
[e :U 622 ]
{
[; ;ff.c: 3966: label[j] = 0;
"3966
[e = *U + _label * -> _j `ux -> -> # *U _label `ui `ux -> -> 0 `i `uc ]
[; ;ff.c: 3967: if (!j) break;
"3967
[e $ ! ! != _j -> -> 0 `i `ui 623  ]
[e $U 621  ]
[e :U 623 ]
"3968
}
[; ;ff.c: 3968: } while (label[--j] == ' ');
[e $ == -> *U + _label * -> =- _j -> -> 1 `i `ui `ux -> -> # *U _label `ui `ux `ui -> 32 `ui 622  ]
[e :U 621 ]
"3969
}
[e :U 619 ]
[; ;ff.c: 3969: }
[; ;ff.c: 3970: if (res == FR_NO_FILE) {
"3970
[e $ ! == -> _res `i -> . `E67 4 `i 624  ]
{
[; ;ff.c: 3971: label[0] = 0;
"3971
[e = *U + _label * -> -> 0 `i `x -> -> # *U _label `i `x -> -> 0 `i `uc ]
[; ;ff.c: 3972: res = FR_OK;
"3972
[e = _res -> . `E67 0 `E67 ]
"3973
}
[e :U 624 ]
"3974
}
[e :U 618 ]
"3975
}
[e :U 617 ]
[; ;ff.c: 3973: }
[; ;ff.c: 3974: }
[; ;ff.c: 3975: }
[; ;ff.c: 3978: if (res == FR_OK && vsn) {
"3978
[e $ ! && == -> _res `i -> . `E67 0 `i != _vsn -> -> 0 `i `*ul 625  ]
{
[; ;ff.c: 3979: res = move_window(dj.fs, dj.fs->volbase);
"3979
[e = _res ( _move_window (2 , . _dj 0 . *U . _dj 0 13 ]
[; ;ff.c: 3980: if (res == FR_OK) {
"3980
[e $ ! == -> _res `i -> . `E67 0 `i 626  ]
{
[; ;ff.c: 3981: i = dj.fs->fs_type == 3 ? 67 : 39;
"3981
[e = _i -> ? == -> . *U . _dj 0 0 `i -> 3 `i : -> 67 `i -> 39 `i `ui ]
[; ;ff.c: 3982: *vsn = (DWORD)(((DWORD)*((BYTE*)(&dj.fs->win[i])+3)<<24)|((DWORD)*((BYTE*)(&dj.fs->win[i])+2)<<16)|((WORD)*((BYTE*)(&dj.fs->win[i])+1)<<8)|*(BYTE*)(&dj.fs->win[i]));
"3982
[e = *U _vsn | | | << -> *U + &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux * -> -> 3 `i `x -> -> # *U &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux `i `x `ul -> 24 `i << -> *U + &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux * -> -> 2 `i `x -> -> # *U &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux `i `x `ul -> 16 `i -> << -> -> *U + &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux * -> -> 1 `i `x -> -> # *U &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux `i `x `us `ui -> 8 `i `ul -> *U &U *U + &U . *U . _dj 0 18 * -> _i `ux -> -> # *U &U . *U . _dj 0 18 `ui `ux `ul ]
"3983
}
[e :U 626 ]
"3984
}
[e :U 625 ]
[; ;ff.c: 3983: }
[; ;ff.c: 3984: }
[; ;ff.c: 3986: return res;
"3986
[e ) _res ]
[e $UE 616  ]
[; ;ff.c: 3987: }
"3987
[e :UE 616 ]
}
"3996
[v _f_setlabel `(E67 ~T0 @X0 1 ef1`*Cuc ]
"3999
{
[; ;ff.c: 3996: FRESULT f_setlabel (
[; ;ff.c: 3997: const TCHAR* label
[; ;ff.c: 3998: )
[; ;ff.c: 3999: {
[e :U _f_setlabel ]
"3997
[v _label `*Cuc ~T0 @X0 1 r1 ]
"3999
[f ]
"4000
[v _res `E67 ~T0 @X0 1 a ]
"4001
[v _dj `S3 ~T0 @X0 1 a ]
"4002
[v _vn `uc ~T0 @X0 -> 11 `i a ]
"4003
[v _i `ui ~T0 @X0 1 a ]
[v _j `ui ~T0 @X0 1 a ]
[v _sl `ui ~T0 @X0 1 a ]
"4004
[v _w `us ~T0 @X0 1 a ]
"4005
[v _tm `ul ~T0 @X0 1 a ]
[; ;ff.c: 4000: FRESULT res;
[; ;ff.c: 4001: DIR dj;
[; ;ff.c: 4002: BYTE vn[11];
[; ;ff.c: 4003: UINT i, j, sl;
[; ;ff.c: 4004: WCHAR w;
[; ;ff.c: 4005: DWORD tm;
[; ;ff.c: 4009: res = find_volume(&dj.fs, &label, 1);
"4009
[e = _res ( _find_volume (3 , , &U . _dj 0 &U _label -> -> 1 `i `uc ]
[; ;ff.c: 4010: if (res) return res;
"4010
[e $ ! != -> _res `i -> -> -> 0 `i `E67 `i 628  ]
[e ) _res ]
[e $UE 627  ]
[e :U 628 ]
[; ;ff.c: 4013: vn[0] = 0;
"4013
[e = *U + &U _vn * -> -> -> 0 `i `ui `ux -> -> # *U &U _vn `ui `ux -> -> 0 `i `uc ]
[; ;ff.c: 4014: for (sl = 0; label[sl]; sl++) ;
"4014
{
[e = _sl -> -> 0 `i `ui ]
[e $U 632  ]
[e :U 629 ]
[e ++ _sl -> -> 1 `i `ui ]
[e :U 632 ]
[e $ != -> *U + _label * -> _sl `ux -> -> # *U _label `ui `ux `i -> -> -> 0 `i `Cuc `i 629  ]
[e :U 630 ]
}
[; ;ff.c: 4015: for ( ; sl && label[sl - 1] == ' '; sl--) ;
"4015
{
[e $U 636  ]
[e :U 633 ]
[e -- _sl -> -> 1 `i `ui ]
[e :U 636 ]
[e $ && != _sl -> -> 0 `i `ui == -> *U + _label * -> - _sl -> -> 1 `i `ui `ux -> -> # *U _label `ui `ux `ui -> 32 `ui 633  ]
[e :U 634 ]
}
[; ;ff.c: 4016: if (sl) {
"4016
[e $ ! != _sl -> -> 0 `i `ui 637  ]
{
[; ;ff.c: 4017: i = j = 0;
"4017
[e = _i = _j -> -> 0 `i `ui ]
[; ;ff.c: 4018: do {
"4018
[e :U 640 ]
{
[; ;ff.c: 4022: w = (BYTE)label[i++];
"4022
[e = _w -> *U + _label * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _label `ui `ux `us ]
[; ;ff.c: 4023: if ((((BYTE)(w) >= 0x81 && (BYTE)(w) <= 0x9F) || ((BYTE)(w) >= 0xE0 && (BYTE)(w) <= 0xFC)))
"4023
[e $ ! || && >= -> -> _w `uc `i -> 129 `i <= -> -> _w `uc `i -> 159 `i && >= -> -> _w `uc `i -> 224 `i <= -> -> _w `uc `i -> 252 `i 641  ]
[; ;ff.c: 4024: w = (j < 10 && i < sl && (((BYTE)(label[i]) >= 0x40 && (BYTE)(label[i]) <= 0x7E) || ((BYTE)(label[i]) >= 0x80 && (BYTE)(label[i]) <= 0xFC))) ? w << 8 | (BYTE)label[i++] : 0;
"4024
[e = _w -> ? && && < _j -> -> 10 `i `ui < _i _sl || && >= -> *U + _label * -> _i `ux -> -> # *U _label `ui `ux `i -> 64 `i <= -> *U + _label * -> _i `ux -> -> # *U _label `ui `ux `i -> 126 `i && >= -> *U + _label * -> _i `ux -> -> # *U _label `ui `ux `i -> 128 `i <= -> *U + _label * -> _i `ux -> -> # *U _label `ui `ux `i -> 252 `i : | << -> _w `ui -> 8 `i -> *U + _label * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U _label `ui `ux `ui -> -> 0 `i `ui `us ]
[e :U 641 ]
[; ;ff.c: 4028: if ((((w)>='a')&&((w)<='z'))) w -= 0x20;
"4028
[e $ ! && >= -> _w `ui -> 97 `ui <= -> _w `ui -> 122 `ui 642  ]
[e =- _w -> -> 32 `i `us ]
[e :U 642 ]
[; ;ff.c: 4032: if (!0x81 && w >= 0x80) w = 0;
"4032
[e $ ! && ! != -> 129 `i -> 0 `i >= -> _w `ui -> -> 128 `i `ui 643  ]
[e = _w -> -> 0 `i `us ]
[e :U 643 ]
[; ;ff.c: 4036: if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11))
"4036
[e $ ! || || ! != -> _w `ui -> -> -> 0 `i `us `ui != ( _chk_chr (2 , :s 10C -> _w `i -> 0 `i >= _j -> ? >= -> _w `ui -> -> 256 `i `ui : -> 10 `i -> 11 `i `ui 644  ]
[; ;ff.c: 4037: return FR_INVALID_NAME;
"4037
[e ) -> . `E67 6 `E67 ]
[e $UE 627  ]
[e :U 644 ]
[; ;ff.c: 4038: if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
"4038
[e $ ! >= -> _w `ui -> -> 256 `i `ui 645  ]
[e = *U + &U _vn * -> ++ _j -> -> 1 `i `ui `ux -> -> # *U &U _vn `ui `ux -> >> -> _w `ui -> 8 `i `uc ]
[e :U 645 ]
[; ;ff.c: 4039: vn[j++] = (BYTE)w;
"4039
[e = *U + &U _vn * -> ++ _j -> -> 1 `i `ui `ux -> -> # *U &U _vn `ui `ux -> _w `uc ]
"4040
}
[; ;ff.c: 4040: } while (i < sl);
[e $ < _i _sl 640  ]
[e :U 639 ]
[; ;ff.c: 4041: while (j < 11) vn[j++] = ' ';
"4041
[e $U 646  ]
[e :U 647 ]
[e = *U + &U _vn * -> ++ _j -> -> 1 `i `ui `ux -> -> # *U &U _vn `ui `ux -> -> 32 `ui `uc ]
[e :U 646 ]
[e $ < _j -> -> 11 `i `ui 647  ]
[e :U 648 ]
[; ;ff.c: 4042: if (vn[0] == 0xE5) return FR_INVALID_NAME;
"4042
[e $ ! == -> *U + &U _vn * -> -> -> 0 `i `ui `ux -> -> # *U &U _vn `ui `ux `i -> 229 `i 649  ]
[e ) -> . `E67 6 `E67 ]
[e $UE 627  ]
[e :U 649 ]
"4043
}
[e :U 637 ]
[; ;ff.c: 4043: }
[; ;ff.c: 4046: dj.sclust = 0;
"4046
[e = . _dj 3 -> -> -> 0 `i `l `ul ]
[; ;ff.c: 4047: res = dir_sdi(&dj, 0);
"4047
[e = _res ( _dir_sdi (2 , &U _dj -> -> 0 `i `ui ]
[; ;ff.c: 4048: if (res == FR_OK) {
"4048
[e $ ! == -> _res `i -> . `E67 0 `i 650  ]
{
[; ;ff.c: 4049: res = dir_read(&dj, 1);
"4049
[e = _res ( _dir_read (2 , &U _dj -> 1 `i ]
[; ;ff.c: 4050: if (res == FR_OK) {
"4050
[e $ ! == -> _res `i -> . `E67 0 `i 651  ]
{
[; ;ff.c: 4051: if (vn[0]) {
"4051
[e $ ! != -> *U + &U _vn * -> -> -> 0 `i `ui `ux -> -> # *U &U _vn `ui `ux `i -> -> -> 0 `i `uc `i 652  ]
{
[; ;ff.c: 4052: mem_cpy(dj.dir, vn, 11);
"4052
[e ( _mem_cpy (3 , , -> . _dj 6 `*v -> &U _vn `*Cv -> -> 11 `i `ui ]
[; ;ff.c: 4053: tm = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
"4053
[e = _tm | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
[; ;ff.c: 4054: *(BYTE*)(dj.dir + 22)=(BYTE)(tm); *((BYTE*)(dj.dir + 22)+1)=(BYTE)((WORD)(tm)>>8); *((BYTE*)(dj.dir + 22)+2)=(BYTE)((DWORD)(tm)>>16); *((BYTE*)(dj.dir + 22)+3)=(BYTE)((DWORD)(tm)>>24);
"4054
[e = *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x -> _tm `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 1 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> -> -> _tm `us `ui -> 8 `i `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 2 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> _tm -> 16 `i `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 3 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> _tm -> 24 `i `uc ]
"4055
}
[; ;ff.c: 4055: } else {
[e $U 653  ]
[e :U 652 ]
{
[; ;ff.c: 4056: dj.dir[0] = 0xE5;
"4056
[e = *U + . _dj 6 * -> -> 0 `i `x -> -> # *U . _dj 6 `i `x -> -> 229 `i `uc ]
"4057
}
[e :U 653 ]
[; ;ff.c: 4057: }
[; ;ff.c: 4058: dj.fs->wflag = 1;
"4058
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 4059: res = sync_fs(dj.fs);
"4059
[e = _res ( _sync_fs (1 . _dj 0 ]
"4060
}
[; ;ff.c: 4060: } else {
[e $U 654  ]
[e :U 651 ]
{
[; ;ff.c: 4061: if (res == FR_NO_FILE) {
"4061
[e $ ! == -> _res `i -> . `E67 4 `i 655  ]
{
[; ;ff.c: 4062: res = FR_OK;
"4062
[e = _res -> . `E67 0 `E67 ]
[; ;ff.c: 4063: if (vn[0]) {
"4063
[e $ ! != -> *U + &U _vn * -> -> -> 0 `i `ui `ux -> -> # *U &U _vn `ui `ux `i -> -> -> 0 `i `uc `i 656  ]
{
[; ;ff.c: 4064: res = dir_alloc(&dj, 1);
"4064
[e = _res ( _dir_alloc (2 , &U _dj -> -> 1 `i `ui ]
[; ;ff.c: 4065: if (res == FR_OK) {
"4065
[e $ ! == -> _res `i -> . `E67 0 `i 657  ]
{
[; ;ff.c: 4066: mem_set(dj.dir, 0, 32);
"4066
[e ( _mem_set (3 , , -> . _dj 6 `*v -> 0 `i -> -> 32 `i `ui ]
[; ;ff.c: 4067: mem_cpy(dj.dir, vn, 11);
"4067
[e ( _mem_cpy (3 , , -> . _dj 6 `*v -> &U _vn `*Cv -> -> 11 `i `ui ]
[; ;ff.c: 4068: dj.dir[11] = 0x08;
"4068
[e = *U + . _dj 6 * -> -> 11 `i `x -> -> # *U . _dj 6 `i `x -> -> 8 `i `uc ]
[; ;ff.c: 4069: tm = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
"4069
[e = _tm | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
[; ;ff.c: 4070: *(BYTE*)(dj.dir + 22)=(BYTE)(tm); *((BYTE*)(dj.dir + 22)+1)=(BYTE)((WORD)(tm)>>8); *((BYTE*)(dj.dir + 22)+2)=(BYTE)((DWORD)(tm)>>16); *((BYTE*)(dj.dir + 22)+3)=(BYTE)((DWORD)(tm)>>24);
"4070
[e = *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x -> _tm `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 1 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> -> -> _tm `us `ui -> 8 `i `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 2 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> _tm -> 16 `i `uc ]
[e = *U + + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x * -> -> 3 `i `x -> -> # *U + . _dj 6 * -> -> 22 `i `x -> -> # *U . _dj 6 `i `x `i `x -> >> _tm -> 24 `i `uc ]
[; ;ff.c: 4071: dj.fs->wflag = 1;
"4071
[e = . *U . _dj 0 4 -> -> 1 `i `uc ]
[; ;ff.c: 4072: res = sync_fs(dj.fs);
"4072
[e = _res ( _sync_fs (1 . _dj 0 ]
"4073
}
[e :U 657 ]
"4074
}
[e :U 656 ]
"4075
}
[e :U 655 ]
"4076
}
[e :U 654 ]
"4077
}
[e :U 650 ]
[; ;ff.c: 4073: }
[; ;ff.c: 4074: }
[; ;ff.c: 4075: }
[; ;ff.c: 4076: }
[; ;ff.c: 4077: }
[; ;ff.c: 4079: return res;
"4079
[e ) _res ]
[e $UE 627  ]
[; ;ff.c: 4080: }
"4080
[e :UE 627 ]
}
"4092
[v _f_forward `(E67 ~T0 @X0 1 ef4`*S2`*F108`ui`*ui ]
"4098
{
[; ;ff.c: 4092: FRESULT f_forward (
[; ;ff.c: 4093: FIL* fp,
[; ;ff.c: 4094: UINT (*func)(const BYTE*,UINT),
[; ;ff.c: 4095: UINT btf,
[; ;ff.c: 4096: UINT* bf
[; ;ff.c: 4097: )
[; ;ff.c: 4098: {
[e :U _f_forward ]
"4093
[v _fp `*S2 ~T0 @X0 1 r1 ]
[v F1160 `(ui ~T0 @X0 0 tf2`*Cuc`ui ]
"4094
[v _func `*F1160 ~T0 @X0 1 r2 ]
"4095
[v _btf `ui ~T0 @X0 1 r3 ]
"4096
[v _bf `*ui ~T0 @X0 1 r4 ]
"4098
[f ]
"4099
[v _res `E67 ~T0 @X0 1 a ]
"4100
[v _remain `ul ~T0 @X0 1 a ]
[v _clst `ul ~T0 @X0 1 a ]
[v _sect `ul ~T0 @X0 1 a ]
"4101
[v _rcnt `ui ~T0 @X0 1 a ]
"4102
[v _csect `uc ~T0 @X0 1 a ]
[; ;ff.c: 4099: FRESULT res;
[; ;ff.c: 4100: DWORD remain, clst, sect;
[; ;ff.c: 4101: UINT rcnt;
[; ;ff.c: 4102: BYTE csect;
[; ;ff.c: 4105: *bf = 0;
"4105
[e = *U _bf -> -> 0 `i `ui ]
[; ;ff.c: 4107: res = validate(fp);
"4107
[e = _res ( _validate (1 -> _fp `*v ]
[; ;ff.c: 4108: if (res != FR_OK) return res;
"4108
[e $ ! != -> _res `i -> . `E67 0 `i 659  ]
[e ) _res ]
[e $UE 658  ]
[e :U 659 ]
[; ;ff.c: 4109: if (fp->err)
"4109
[e $ ! != -> . *U _fp 3 `i -> -> -> 0 `i `uc `i 660  ]
[; ;ff.c: 4110: return (FRESULT)fp->err;
"4110
[e ) -> . *U _fp 3 `E67 ]
[e $UE 658  ]
[e :U 660 ]
[; ;ff.c: 4111: if (!(fp->flag & 0x01))
"4111
[e $ ! ! != & -> . *U _fp 2 `i -> 1 `i -> 0 `i 661  ]
[; ;ff.c: 4112: return FR_DENIED;
"4112
[e ) -> . `E67 7 `E67 ]
[e $UE 658  ]
[e :U 661 ]
[; ;ff.c: 4114: remain = fp->fsize - fp->fptr;
"4114
[e = _remain - . *U _fp 5 . *U _fp 4 ]
[; ;ff.c: 4115: if (btf > remain) btf = (UINT)remain;
"4115
[e $ ! > -> _btf `ul _remain 662  ]
[e = _btf -> _remain `ui ]
[e :U 662 ]
[; ;ff.c: 4117: for ( ; btf && (*func)(0, 0);
"4117
{
[; ;ff.c: 4118: fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
[e $U 666  ]
"4118
[e :U 663 ]
{
[; ;ff.c: 4119: csect = (BYTE)(fp->fptr / ((UINT)512) & (fp->fs->csize - 1));
"4119
[e = _csect -> & / . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> - -> . *U . *U _fp 0 2 `i -> 1 `i `l `ul `uc ]
[; ;ff.c: 4120: if ((fp->fptr % ((UINT)512)) == 0) {
"4120
[e $ ! == % . *U _fp 4 -> -> -> 512 `i `ui `ul -> -> -> 0 `i `l `ul 667  ]
{
[; ;ff.c: 4121: if (!csect) {
"4121
[e $ ! ! != -> _csect `i -> -> -> 0 `i `uc `i 668  ]
{
[; ;ff.c: 4122: clst = (fp->fptr == 0) ?
[; ;ff.c: 4123: fp->sclust : get_fat(fp->fs, fp->clust);
"4123
[e = _clst ? == . *U _fp 4 -> -> -> 0 `i `l `ul : . *U _fp 6 ( _get_fat (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 4124: if (clst <= 1) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"4124
[e $ ! <= _clst -> -> -> 1 `i `l `ul 669  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 658  ]
}
[e :U 669 ]
[; ;ff.c: 4125: if (clst == 0xFFFFFFFF) { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"4125
[e $ ! == _clst -> -1 `ul 670  ]
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 658  ]
}
[e :U 670 ]
[; ;ff.c: 4126: fp->clust = clst;
"4126
[e = . *U _fp 7 _clst ]
"4127
}
[e :U 668 ]
"4128
}
[e :U 667 ]
[; ;ff.c: 4127: }
[; ;ff.c: 4128: }
[; ;ff.c: 4129: sect = clust2sect(fp->fs, fp->clust);
"4129
[e = _sect ( _clust2sect (2 , . *U _fp 0 . *U _fp 7 ]
[; ;ff.c: 4130: if (!sect) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"4130
[e $ ! ! != _sect -> -> 0 `i `ul 671  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 658  ]
}
[e :U 671 ]
[; ;ff.c: 4131: sect += csect;
"4131
[e =+ _sect -> _csect `ul ]
[; ;ff.c: 4132: if (move_window(fp->fs, sect) != FR_OK)
"4132
[e $ ! != -> ( _move_window (2 , . *U _fp 0 _sect `i -> . `E67 0 `i 672  ]
[; ;ff.c: 4133: { fp->err = (BYTE)(FR_DISK_ERR); return FR_DISK_ERR; };
"4133
{
[e = . *U _fp 3 -> . `E67 1 `uc ]
[e ) -> . `E67 1 `E67 ]
[e $UE 658  ]
}
[e :U 672 ]
[; ;ff.c: 4134: fp->dsect = sect;
"4134
[e = . *U _fp 8 _sect ]
[; ;ff.c: 4135: rcnt = ((UINT)512) - (WORD)(fp->fptr % ((UINT)512));
"4135
[e = _rcnt - -> -> 512 `i `ui -> -> % . *U _fp 4 -> -> -> 512 `i `ui `ul `us `ui ]
[; ;ff.c: 4136: if (rcnt > btf) rcnt = btf;
"4136
[e $ ! > _rcnt _btf 673  ]
[e = _rcnt _btf ]
[e :U 673 ]
[; ;ff.c: 4137: rcnt = (*func)(&fp->fs->win[(WORD)fp->fptr % ((UINT)512)], rcnt);
"4137
[e = _rcnt ( *U _func (2 , -> &U *U + &U . *U . *U _fp 0 18 * -> % -> -> . *U _fp 4 `us `ui -> -> 512 `i `ui `ux -> -> # *U &U . *U . *U _fp 0 18 `ui `ux `*Cuc _rcnt ]
[; ;ff.c: 4138: if (!rcnt) { fp->err = (BYTE)(FR_INT_ERR); return FR_INT_ERR; };
"4138
[e $ ! ! != _rcnt -> -> 0 `i `ui 674  ]
{
[e = . *U _fp 3 -> . `E67 2 `uc ]
[e ) -> . `E67 2 `E67 ]
[e $UE 658  ]
}
[e :U 674 ]
"4139
}
"4118
[e ; ; =+ . *U _fp 4 -> _rcnt `ul =+ *U _bf _rcnt =- _btf _rcnt ]
"4117
[e :U 666 ]
[e $ && != _btf -> -> 0 `i `ui != ( *U _func (2 , -> -> 0 `i `*Cuc -> -> 0 `i `ui -> -> 0 `i `ui 663  ]
[e :U 664 ]
"4139
}
[; ;ff.c: 4139: }
[; ;ff.c: 4141: return FR_OK;
"4141
[e ) -> . `E67 0 `E67 ]
[e $UE 658  ]
[; ;ff.c: 4142: }
"4142
[e :UE 658 ]
}
"4155
[v _f_mkfs `(E67 ~T0 @X0 1 ef3`*Cuc`uc`ui ]
"4160
{
[; ;ff.c: 4155: FRESULT f_mkfs (
[; ;ff.c: 4156: const TCHAR* path,
[; ;ff.c: 4157: BYTE sfd,
[; ;ff.c: 4158: UINT au
[; ;ff.c: 4159: )
[; ;ff.c: 4160: {
[e :U _f_mkfs ]
"4156
[v _path `*Cuc ~T0 @X0 1 r1 ]
"4157
[v _sfd `uc ~T0 @X0 1 r2 ]
"4158
[v _au `ui ~T0 @X0 1 r3 ]
"4160
[f ]
"4161
[v F1189 `Cus ~T0 @X0 -> 0 `x s vst ]
[i F1189
:U ..
-> -> 1024 `i `us
-> -> 512 `i `us
-> -> 256 `i `us
-> -> 128 `i `us
-> -> 64 `i `us
-> -> 32 `i `us
-> -> 16 `i `us
-> -> 8 `i `us
-> -> 4 `i `us
-> -> 2 `i `us
-> -> 0 `i `us
..
]
"4162
[v F1190 `Cus ~T0 @X0 -> 0 `x s cst ]
[i F1190
:U ..
-> -> 32768 `l `us
-> -> 16384 `i `us
-> -> 8192 `i `us
-> -> 4096 `i `us
-> -> 2048 `i `us
-> -> 16384 `i `us
-> -> 8192 `i `us
-> -> 4096 `i `us
-> -> 2048 `i `us
-> -> 1024 `i `us
-> -> 512 `i `us
..
]
"4163
[v _vol `i ~T0 @X0 1 a ]
"4164
[v _fmt `uc ~T0 @X0 1 a ]
[v _md `uc ~T0 @X0 1 a ]
[v _sys `uc ~T0 @X0 1 a ]
[v _tbl `*uc ~T0 @X0 1 a ]
[v _pdrv `uc ~T0 @X0 1 a ]
[v _part `uc ~T0 @X0 1 a ]
"4165
[v _n_clst `ul ~T0 @X0 1 a ]
[v _vs `ul ~T0 @X0 1 a ]
[v _n `ul ~T0 @X0 1 a ]
[v _wsect `ul ~T0 @X0 1 a ]
"4166
[v _i `ui ~T0 @X0 1 a ]
"4167
[v _b_vol `ul ~T0 @X0 1 a ]
[v _b_fat `ul ~T0 @X0 1 a ]
[v _b_dir `ul ~T0 @X0 1 a ]
[v _b_data `ul ~T0 @X0 1 a ]
"4168
[v _n_vol `ul ~T0 @X0 1 a ]
[v _n_rsv `ul ~T0 @X0 1 a ]
[v _n_fat `ul ~T0 @X0 1 a ]
[v _n_dir `ul ~T0 @X0 1 a ]
"4169
[v _fs `*S1 ~T0 @X0 1 a ]
"4170
[v _stat `uc ~T0 @X0 1 a ]
"4172
[v _eb `ul ~T0 @X0 -> 2 `i a ]
[; ;ff.c: 4161: static const WORD vst[] = { 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 0};
[; ;ff.c: 4162: static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
[; ;ff.c: 4163: int vol;
[; ;ff.c: 4164: BYTE fmt, md, sys, *tbl, pdrv, part;
[; ;ff.c: 4165: DWORD n_clst, vs, n, wsect;
[; ;ff.c: 4166: UINT i;
[; ;ff.c: 4167: DWORD b_vol, b_fat, b_dir, b_data;
[; ;ff.c: 4168: DWORD n_vol, n_rsv, n_fat, n_dir;
[; ;ff.c: 4169: FATFS *fs;
[; ;ff.c: 4170: DSTATUS stat;
[; ;ff.c: 4172: DWORD eb[2];
[; ;ff.c: 4177: if (sfd > 1) return FR_INVALID_PARAMETER;
"4177
[e $ ! > -> _sfd `i -> 1 `i 676  ]
[e ) -> . `E67 19 `E67 ]
[e $UE 675  ]
[e :U 676 ]
[; ;ff.c: 4178: vol = get_ldnumber(&path);
"4178
[e = _vol ( _get_ldnumber (1 &U _path ]
[; ;ff.c: 4179: if (vol < 0) return FR_INVALID_DRIVE;
"4179
[e $ ! < _vol -> 0 `i 677  ]
[e ) -> . `E67 11 `E67 ]
[e $UE 675  ]
[e :U 677 ]
[; ;ff.c: 4180: fs = FatFs[vol];
"4180
[e = _fs *U + &U _FatFs * -> -> _vol `ui `ux -> -> # *U &U _FatFs `ui `ux ]
[; ;ff.c: 4181: if (!fs) return FR_NOT_ENABLED;
"4181
[e $ ! ! != _fs -> -> 0 `i `*S1 678  ]
[e ) -> . `E67 12 `E67 ]
[e $UE 675  ]
[e :U 678 ]
[; ;ff.c: 4182: fs->fs_type = 0;
"4182
[e = . *U _fs 0 -> -> 0 `i `uc ]
[; ;ff.c: 4183: pdrv = (BYTE)(vol);
"4183
[e = _pdrv -> _vol `uc ]
[; ;ff.c: 4184: part = 0;
"4184
[e = _part -> -> 0 `i `uc ]
[; ;ff.c: 4187: stat = disk_initialize(pdrv);
"4187
[e = _stat ( _disk_initialize (1 _pdrv ]
[; ;ff.c: 4188: if (stat & 0x01) return FR_NOT_READY;
"4188
[e $ ! != & -> _stat `i -> 1 `i -> 0 `i 679  ]
[e ) -> . `E67 3 `E67 ]
[e $UE 675  ]
[e :U 679 ]
[; ;ff.c: 4189: if (stat & 0x04) return FR_WRITE_PROTECTED;
"4189
[e $ ! != & -> _stat `i -> 4 `i -> 0 `i 680  ]
[e ) -> . `E67 10 `E67 ]
[e $UE 675  ]
[e :U 680 ]
[; ;ff.c: 4194: if (0 && part) {
"4194
[e $ ! && != -> 0 `i -> 0 `i != -> _part `i -> -> -> 0 `i `uc `i 681  ]
{
[; ;ff.c: 4196: if (disk_read(pdrv, fs->win, 0, 1) != RES_OK) return FR_DISK_ERR;
"4196
[e $ ! != -> ( _disk_read (4 , , , _pdrv &U . *U _fs 18 -> -> -> 0 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 682  ]
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 682 ]
[; ;ff.c: 4197: if ((WORD)(((WORD)*((BYTE*)(fs->win + 510)+1)<<8)|(WORD)*(BYTE*)(fs->win + 510)) != 0xAA55) return FR_MKFS_ABORTED;
"4197
[e $ ! != -> -> | << -> -> *U + + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x `us `ui -> 8 `i -> -> *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `us `ui `us `ui -> 43605 `ui 683  ]
[e ) -> . `E67 14 `E67 ]
[e $UE 675  ]
[e :U 683 ]
[; ;ff.c: 4198: tbl = &fs->win[446 + (part - 1) * 16];
"4198
[e = _tbl &U *U + &U . *U _fs 18 * -> -> + -> 446 `i * - -> _part `i -> 1 `i -> 16 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 4199: if (!tbl[4]) return FR_MKFS_ABORTED;
"4199
[e $ ! ! != -> *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x `i -> -> -> 0 `i `uc `i 684  ]
[e ) -> . `E67 14 `E67 ]
[e $UE 675  ]
[e :U 684 ]
[; ;ff.c: 4200: b_vol = (DWORD)(((DWORD)*((BYTE*)(tbl + 8)+3)<<24)|((DWORD)*((BYTE*)(tbl + 8)+2)<<16)|((WORD)*((BYTE*)(tbl + 8)+1)<<8)|*(BYTE*)(tbl + 8));
"4200
[e = _b_vol | | | << -> *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x `ul -> 24 `i << -> *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x `ul -> 16 `i -> << -> -> *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x `us `ui -> 8 `i `ul -> *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `ul ]
[; ;ff.c: 4201: n_vol = (DWORD)(((DWORD)*((BYTE*)(tbl + 12)+3)<<24)|((DWORD)*((BYTE*)(tbl + 12)+2)<<16)|((WORD)*((BYTE*)(tbl + 12)+1)<<8)|*(BYTE*)(tbl + 12));
"4201
[e = _n_vol | | | << -> *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x `ul -> 24 `i << -> *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x `ul -> 16 `i -> << -> -> *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x `us `ui -> 8 `i `ul -> *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `ul ]
"4202
}
[; ;ff.c: 4202: } else {
[e $U 685  ]
[e :U 681 ]
{
[; ;ff.c: 4204: if (disk_ioctl(pdrv, 1, &n_vol) != RES_OK || n_vol < 128)
"4204
[e $ ! || != -> ( _disk_ioctl (3 , , _pdrv -> -> 1 `i `uc -> &U _n_vol `*v `i -> . `E198 0 `i < _n_vol -> -> -> 128 `i `l `ul 686  ]
[; ;ff.c: 4205: return FR_DISK_ERR;
"4205
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 686 ]
[; ;ff.c: 4206: b_vol = (sfd) ? 0 : 63;
"4206
[e = _b_vol -> -> ? != -> _sfd `i -> -> -> 0 `i `uc `i : -> 0 `i -> 63 `i `l `ul ]
[; ;ff.c: 4207: n_vol -= b_vol;
"4207
[e =- _n_vol _b_vol ]
"4208
}
[e :U 685 ]
[; ;ff.c: 4208: }
[; ;ff.c: 4210: if (au & (au - 1)) au = 0;
"4210
[e $ ! != & _au - _au -> -> 1 `i `ui -> -> 0 `i `ui 687  ]
[e = _au -> -> 0 `i `ui ]
[e :U 687 ]
[; ;ff.c: 4211: if (!au) {
"4211
[e $ ! ! != _au -> -> 0 `i `ui 688  ]
{
[; ;ff.c: 4212: vs = n_vol / (2000 / (((UINT)512) / 512));
"4212
[e = _vs / _n_vol -> / -> -> 2000 `i `ui / -> -> 512 `i `ui -> -> 512 `i `ui `ul ]
[; ;ff.c: 4213: for (i = 0; vs < vst[i]; i++) ;
"4213
{
[e = _i -> -> 0 `i `ui ]
[e $U 692  ]
[e :U 689 ]
[e ++ _i -> -> 1 `i `ui ]
[e :U 692 ]
[e $ < _vs -> *U + &U F1189 * -> _i `ux -> -> # *U &U F1189 `ui `ux `ul 689  ]
[e :U 690 ]
}
[; ;ff.c: 4214: au = cst[i];
"4214
[e = _au -> *U + &U F1190 * -> _i `ux -> -> # *U &U F1190 `ui `ux `ui ]
"4215
}
[e :U 688 ]
[; ;ff.c: 4215: }
[; ;ff.c: 4216: if (au >= 512) au /= ((UINT)512);
"4216
[e $ ! >= _au -> -> 512 `i `ui 693  ]
[e =/ _au -> -> -> 512 `i `ui `ui ]
[e :U 693 ]
[; ;ff.c: 4217: if (!au) au = 1;
"4217
[e $ ! ! != _au -> -> 0 `i `ui 694  ]
[e = _au -> -> 1 `i `ui ]
[e :U 694 ]
[; ;ff.c: 4218: if (au > 128) au = 128;
"4218
[e $ ! > _au -> -> 128 `i `ui 695  ]
[e = _au -> -> 128 `i `ui ]
[e :U 695 ]
[; ;ff.c: 4221: n_clst = n_vol / au;
"4221
[e = _n_clst / _n_vol -> _au `ul ]
[; ;ff.c: 4222: fmt = 1;
"4222
[e = _fmt -> -> 1 `i `uc ]
[; ;ff.c: 4223: if (n_clst >= 4086U) fmt = 2;
"4223
[e $ ! >= _n_clst -> -> 4086 `ui `ul 696  ]
[e = _fmt -> -> 2 `i `uc ]
[e :U 696 ]
[; ;ff.c: 4224: if (n_clst >= 65526U) fmt = 3;
"4224
[e $ ! >= _n_clst -> -> 65526 `ui `ul 697  ]
[e = _fmt -> -> 3 `i `uc ]
[e :U 697 ]
[; ;ff.c: 4227: if (fmt == 3) {
"4227
[e $ ! == -> _fmt `i -> 3 `i 698  ]
{
[; ;ff.c: 4228: n_fat = ((n_clst * 4) + 8 + ((UINT)512) - 1) / ((UINT)512);
"4228
[e = _n_fat / - + + * _n_clst -> -> -> 4 `i `l `ul -> -> -> 8 `i `l `ul -> -> -> 512 `i `ui `ul -> -> -> 1 `i `l `ul -> -> -> 512 `i `ui `ul ]
[; ;ff.c: 4229: n_rsv = 32;
"4229
[e = _n_rsv -> -> -> 32 `i `l `ul ]
[; ;ff.c: 4230: n_dir = 0;
"4230
[e = _n_dir -> -> -> 0 `i `l `ul ]
"4231
}
[; ;ff.c: 4231: } else {
[e $U 699  ]
[e :U 698 ]
{
[; ;ff.c: 4232: n_fat = (fmt == 1) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
"4232
[e = _n_fat ? == -> _fmt `i -> 1 `i : + / + * _n_clst -> -> -> 3 `i `l `ul -> -> -> 1 `i `l `ul -> -> -> 2 `i `l `ul -> -> -> 3 `i `l `ul + * _n_clst -> -> -> 2 `i `l `ul -> -> -> 4 `i `l `ul ]
[; ;ff.c: 4233: n_fat = (n_fat + ((UINT)512) - 1) / ((UINT)512);
"4233
[e = _n_fat / - + _n_fat -> -> -> 512 `i `ui `ul -> -> -> 1 `i `l `ul -> -> -> 512 `i `ui `ul ]
[; ;ff.c: 4234: n_rsv = 1;
"4234
[e = _n_rsv -> -> -> 1 `i `l `ul ]
[; ;ff.c: 4235: n_dir = (DWORD)512 * 32 / ((UINT)512);
"4235
[e = _n_dir / * -> -> 512 `i `ul -> -> -> 32 `i `l `ul -> -> -> 512 `i `ui `ul ]
"4236
}
[e :U 699 ]
[; ;ff.c: 4236: }
[; ;ff.c: 4237: b_fat = b_vol + n_rsv;
"4237
[e = _b_fat + _b_vol _n_rsv ]
[; ;ff.c: 4238: b_dir = b_fat + n_fat * 1;
"4238
[e = _b_dir + _b_fat * _n_fat -> -> -> 1 `i `l `ul ]
[; ;ff.c: 4239: b_data = b_dir + n_dir;
"4239
[e = _b_data + _b_dir _n_dir ]
[; ;ff.c: 4240: if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;
"4240
[e $ ! < _n_vol - + _b_data -> _au `ul _b_vol 700  ]
[e ) -> . `E67 14 `E67 ]
[e $UE 675  ]
[e :U 700 ]
[; ;ff.c: 4243: if (disk_ioctl(pdrv, 3, &n) != RES_OK || !n || n > 32768) n = 1;
"4243
[e $ ! || || != -> ( _disk_ioctl (3 , , _pdrv -> -> 3 `i `uc -> &U _n `*v `i -> . `E198 0 `i ! != _n -> -> 0 `i `ul > _n -> -> 32768 `l `ul 701  ]
[e = _n -> -> -> 1 `i `l `ul ]
[e :U 701 ]
[; ;ff.c: 4244: n = (b_data + n - 1) & ~(n - 1);
"4244
[e = _n & - + _b_data _n -> -> -> 1 `i `l `ul ~ - _n -> -> -> 1 `i `l `ul ]
[; ;ff.c: 4245: n = (n - b_data) / 1;
"4245
[e = _n / - _n _b_data -> -> -> 1 `i `l `ul ]
[; ;ff.c: 4246: if (fmt == 3) {
"4246
[e $ ! == -> _fmt `i -> 3 `i 702  ]
{
[; ;ff.c: 4247: n_rsv += n;
"4247
[e =+ _n_rsv _n ]
[; ;ff.c: 4248: b_fat += n;
"4248
[e =+ _b_fat _n ]
"4249
}
[; ;ff.c: 4249: } else {
[e $U 703  ]
[e :U 702 ]
{
[; ;ff.c: 4250: n_fat += n;
"4250
[e =+ _n_fat _n ]
"4251
}
[e :U 703 ]
[; ;ff.c: 4251: }
[; ;ff.c: 4254: n_clst = (n_vol - n_rsv - n_fat * 1 - n_dir) / au;
"4254
[e = _n_clst / - - - _n_vol _n_rsv * _n_fat -> -> -> 1 `i `l `ul _n_dir -> _au `ul ]
[; ;ff.c: 4255: if ( (fmt == 2 && n_clst < 4086U)
[; ;ff.c: 4256: || (fmt == 3 && n_clst < 65526U))
"4256
[e $ ! || && == -> _fmt `i -> 2 `i < _n_clst -> -> 4086 `ui `ul && == -> _fmt `i -> 3 `i < _n_clst -> -> 65526 `ui `ul 704  ]
[; ;ff.c: 4257: return FR_MKFS_ABORTED;
"4257
[e ) -> . `E67 14 `E67 ]
[e $UE 675  ]
[e :U 704 ]
[; ;ff.c: 4260: if (fmt == 3) {
"4260
[e $ ! == -> _fmt `i -> 3 `i 705  ]
{
[; ;ff.c: 4261: sys = 0x0C;
"4261
[e = _sys -> -> 12 `i `uc ]
"4262
}
[; ;ff.c: 4262: } else {
[e $U 706  ]
[e :U 705 ]
{
[; ;ff.c: 4263: if (fmt == 1 && n_vol < 0x10000) {
"4263
[e $ ! && == -> _fmt `i -> 1 `i < _n_vol -> -> 65536 `l `ul 707  ]
{
[; ;ff.c: 4264: sys = 0x01;
"4264
[e = _sys -> -> 1 `i `uc ]
"4265
}
[; ;ff.c: 4265: } else {
[e $U 708  ]
[e :U 707 ]
{
[; ;ff.c: 4266: sys = (n_vol < 0x10000) ? 0x04 : 0x06;
"4266
[e = _sys -> ? < _n_vol -> -> 65536 `l `ul : -> 4 `i -> 6 `i `uc ]
"4267
}
[e :U 708 ]
"4268
}
[e :U 706 ]
[; ;ff.c: 4267: }
[; ;ff.c: 4268: }
[; ;ff.c: 4270: if (0 && part) {
"4270
[e $ ! && != -> 0 `i -> 0 `i != -> _part `i -> -> -> 0 `i `uc `i 709  ]
{
[; ;ff.c: 4272: tbl = &fs->win[446 + (part - 1) * 16];
"4272
[e = _tbl &U *U + &U . *U _fs 18 * -> -> + -> 446 `i * - -> _part `i -> 1 `i -> 16 `i `ui `ux -> -> # *U &U . *U _fs 18 `ui `ux ]
[; ;ff.c: 4273: tbl[4] = sys;
"4273
[e = *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x _sys ]
[; ;ff.c: 4274: if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)
"4274
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> &U . *U _fs 18 `*Cuc -> -> -> 0 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 710  ]
[; ;ff.c: 4275: return FR_DISK_ERR;
"4275
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 710 ]
[; ;ff.c: 4276: md = 0xF8;
"4276
[e = _md -> -> 248 `i `uc ]
"4277
}
[; ;ff.c: 4277: } else {
[e $U 711  ]
[e :U 709 ]
{
[; ;ff.c: 4278: if (sfd) {
"4278
[e $ ! != -> _sfd `i -> -> -> 0 `i `uc `i 712  ]
{
[; ;ff.c: 4279: md = 0xF0;
"4279
[e = _md -> -> 240 `i `uc ]
"4280
}
[; ;ff.c: 4280: } else {
[e $U 713  ]
[e :U 712 ]
{
[; ;ff.c: 4281: mem_set(fs->win, 0, ((UINT)512));
"4281
[e ( _mem_set (3 , , -> &U . *U _fs 18 `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 4282: tbl = fs->win + 446;
"4282
[e = _tbl + &U . *U _fs 18 * -> -> 446 `i `x -> -> # *U &U . *U _fs 18 `i `x ]
[; ;ff.c: 4283: tbl[1] = 1;
"4283
[e = *U + _tbl * -> -> 1 `i `x -> -> # *U _tbl `i `x -> -> 1 `i `uc ]
[; ;ff.c: 4284: tbl[2] = 1;
"4284
[e = *U + _tbl * -> -> 2 `i `x -> -> # *U _tbl `i `x -> -> 1 `i `uc ]
[; ;ff.c: 4285: tbl[3] = 0;
"4285
[e = *U + _tbl * -> -> 3 `i `x -> -> # *U _tbl `i `x -> -> 0 `i `uc ]
[; ;ff.c: 4286: tbl[4] = sys;
"4286
[e = *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x _sys ]
[; ;ff.c: 4287: tbl[5] = 254;
"4287
[e = *U + _tbl * -> -> 5 `i `x -> -> # *U _tbl `i `x -> -> 254 `i `uc ]
[; ;ff.c: 4288: n = (b_vol + n_vol) / 63 / 255;
"4288
[e = _n / / + _b_vol _n_vol -> -> -> 63 `i `l `ul -> -> -> 255 `i `l `ul ]
[; ;ff.c: 4289: tbl[6] = (BYTE)(n >> 2 | 63);
"4289
[e = *U + _tbl * -> -> 6 `i `x -> -> # *U _tbl `i `x -> | >> _n -> 2 `i -> -> -> 63 `i `l `ul `uc ]
[; ;ff.c: 4290: tbl[7] = (BYTE)n;
"4290
[e = *U + _tbl * -> -> 7 `i `x -> -> # *U _tbl `i `x -> _n `uc ]
[; ;ff.c: 4291: *(BYTE*)(tbl + 8)=(BYTE)(63); *((BYTE*)(tbl + 8)+1)=(BYTE)((WORD)(63)>>8); *((BYTE*)(tbl + 8)+2)=(BYTE)((DWORD)(63)>>16); *((BYTE*)(tbl + 8)+3)=(BYTE)((DWORD)(63)>>24);
"4291
[e = *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x -> -> 63 `i `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 63 `i `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 63 `i `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 63 `i `ul -> 24 `i `uc ]
[; ;ff.c: 4292: *(BYTE*)(tbl + 12)=(BYTE)(n_vol); *((BYTE*)(tbl + 12)+1)=(BYTE)((WORD)(n_vol)>>8); *((BYTE*)(tbl + 12)+2)=(BYTE)((DWORD)(n_vol)>>16); *((BYTE*)(tbl + 12)+3)=(BYTE)((DWORD)(n_vol)>>24);
"4292
[e = *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x -> _n_vol `uc ]
[e = *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_vol `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_vol -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 12 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_vol -> 24 `i `uc ]
[; ;ff.c: 4293: *(BYTE*)(fs->win + 510)=(BYTE)(0xAA55); *((BYTE*)(fs->win + 510)+1)=(BYTE)((WORD)(0xAA55)>>8);
"4293
[e = *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x -> -> 43605 `ui `uc ]
[e = *U + + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x * -> -> 1 `i `x -> -> # *U + &U . *U _fs 18 * -> -> 510 `i `x -> -> # *U &U . *U _fs 18 `i `x `i `x -> >> -> -> -> 43605 `ui `us `ui -> 8 `i `uc ]
[; ;ff.c: 4294: if (disk_write(pdrv, fs->win, 0, 1) != RES_OK)
"4294
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> &U . *U _fs 18 `*Cuc -> -> -> 0 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 714  ]
[; ;ff.c: 4295: return FR_DISK_ERR;
"4295
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 714 ]
[; ;ff.c: 4296: md = 0xF8;
"4296
[e = _md -> -> 248 `i `uc ]
"4297
}
[e :U 713 ]
"4298
}
[e :U 711 ]
[; ;ff.c: 4297: }
[; ;ff.c: 4298: }
[; ;ff.c: 4301: tbl = fs->win;
"4301
[e = _tbl &U . *U _fs 18 ]
[; ;ff.c: 4302: mem_set(tbl, 0, ((UINT)512));
"4302
[e ( _mem_set (3 , , -> _tbl `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 4303: mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);
"4303
[e ( _mem_cpy (3 , , -> _tbl `*v -> :s 11C `*Cv -> -> 11 `i `ui ]
[; ;ff.c: 4304: i = ((UINT)512);
"4304
[e = _i -> -> 512 `i `ui ]
[; ;ff.c: 4305: *(BYTE*)(tbl + 11)=(BYTE)(i); *((BYTE*)(tbl + 11)+1)=(BYTE)((WORD)(i)>>8);
"4305
[e = *U + _tbl * -> -> 11 `i `x -> -> # *U _tbl `i `x -> _i `uc ]
[e = *U + + _tbl * -> -> 11 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 11 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4306: tbl[13] = (BYTE)au;
"4306
[e = *U + _tbl * -> -> 13 `i `x -> -> # *U _tbl `i `x -> _au `uc ]
[; ;ff.c: 4307: *(BYTE*)(tbl + 14)=(BYTE)(n_rsv); *((BYTE*)(tbl + 14)+1)=(BYTE)((WORD)(n_rsv)>>8);
"4307
[e = *U + _tbl * -> -> 14 `i `x -> -> # *U _tbl `i `x -> _n_rsv `uc ]
[e = *U + + _tbl * -> -> 14 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 14 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_rsv `us `ui -> 8 `i `uc ]
[; ;ff.c: 4308: tbl[16] = 1;
"4308
[e = *U + _tbl * -> -> 16 `i `x -> -> # *U _tbl `i `x -> -> 1 `i `uc ]
[; ;ff.c: 4309: i = (fmt == 3) ? 0 : 512;
"4309
[e = _i -> ? == -> _fmt `i -> 3 `i : -> 0 `i -> 512 `i `ui ]
[; ;ff.c: 4310: *(BYTE*)(tbl + 17)=(BYTE)(i); *((BYTE*)(tbl + 17)+1)=(BYTE)((WORD)(i)>>8);
"4310
[e = *U + _tbl * -> -> 17 `i `x -> -> # *U _tbl `i `x -> _i `uc ]
[e = *U + + _tbl * -> -> 17 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 17 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4311: if (n_vol < 0x10000) {
"4311
[e $ ! < _n_vol -> -> 65536 `l `ul 715  ]
{
[; ;ff.c: 4312: *(BYTE*)(tbl + 19)=(BYTE)(n_vol); *((BYTE*)(tbl + 19)+1)=(BYTE)((WORD)(n_vol)>>8);
"4312
[e = *U + _tbl * -> -> 19 `i `x -> -> # *U _tbl `i `x -> _n_vol `uc ]
[e = *U + + _tbl * -> -> 19 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 19 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_vol `us `ui -> 8 `i `uc ]
"4313
}
[; ;ff.c: 4313: } else {
[e $U 716  ]
[e :U 715 ]
{
[; ;ff.c: 4314: *(BYTE*)(tbl + 32)=(BYTE)(n_vol); *((BYTE*)(tbl + 32)+1)=(BYTE)((WORD)(n_vol)>>8); *((BYTE*)(tbl + 32)+2)=(BYTE)((DWORD)(n_vol)>>16); *((BYTE*)(tbl + 32)+3)=(BYTE)((DWORD)(n_vol)>>24);
"4314
[e = *U + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x -> _n_vol `uc ]
[e = *U + + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_vol `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_vol -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 32 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_vol -> 24 `i `uc ]
"4315
}
[e :U 716 ]
[; ;ff.c: 4315: }
[; ;ff.c: 4316: tbl[21] = md;
"4316
[e = *U + _tbl * -> -> 21 `i `x -> -> # *U _tbl `i `x _md ]
[; ;ff.c: 4317: *(BYTE*)(tbl + 24)=(BYTE)(63); *((BYTE*)(tbl + 24)+1)=(BYTE)((WORD)(63)>>8);
"4317
[e = *U + _tbl * -> -> 24 `i `x -> -> # *U _tbl `i `x -> -> 63 `i `uc ]
[e = *U + + _tbl * -> -> 24 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 24 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 63 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4318: *(BYTE*)(tbl + 26)=(BYTE)(255); *((BYTE*)(tbl + 26)+1)=(BYTE)((WORD)(255)>>8);
"4318
[e = *U + _tbl * -> -> 26 `i `x -> -> # *U _tbl `i `x -> -> 255 `i `uc ]
[e = *U + + _tbl * -> -> 26 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 26 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 255 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4319: *(BYTE*)(tbl + 28)=(BYTE)(b_vol); *((BYTE*)(tbl + 28)+1)=(BYTE)((WORD)(b_vol)>>8); *((BYTE*)(tbl + 28)+2)=(BYTE)((DWORD)(b_vol)>>16); *((BYTE*)(tbl + 28)+3)=(BYTE)((DWORD)(b_vol)>>24);
"4319
[e = *U + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x -> _b_vol `uc ]
[e = *U + + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _b_vol `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x `i `x -> >> _b_vol -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 28 `i `x -> -> # *U _tbl `i `x `i `x -> >> _b_vol -> 24 `i `uc ]
[; ;ff.c: 4320: n = ((DWORD)(2016 - 1980) << 25 | (DWORD)7 << 21 | (DWORD)30 << 16);
"4320
[e = _n | | << -> - -> 2016 `i -> 1980 `i `ul -> 25 `i << -> -> 7 `i `ul -> 21 `i << -> -> 30 `i `ul -> 16 `i ]
[; ;ff.c: 4321: if (fmt == 3) {
"4321
[e $ ! == -> _fmt `i -> 3 `i 717  ]
{
[; ;ff.c: 4322: *(BYTE*)(tbl + 67)=(BYTE)(n); *((BYTE*)(tbl + 67)+1)=(BYTE)((WORD)(n)>>8); *((BYTE*)(tbl + 67)+2)=(BYTE)((DWORD)(n)>>16); *((BYTE*)(tbl + 67)+3)=(BYTE)((DWORD)(n)>>24);
"4322
[e = *U + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x -> _n `uc ]
[e = *U + + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 67 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 24 `i `uc ]
[; ;ff.c: 4323: *(BYTE*)(tbl + 36)=(BYTE)(n_fat); *((BYTE*)(tbl + 36)+1)=(BYTE)((WORD)(n_fat)>>8); *((BYTE*)(tbl + 36)+2)=(BYTE)((DWORD)(n_fat)>>16); *((BYTE*)(tbl + 36)+3)=(BYTE)((DWORD)(n_fat)>>24);
"4323
[e = *U + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x -> _n_fat `uc ]
[e = *U + + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_fat `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_fat -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n_fat -> 24 `i `uc ]
[; ;ff.c: 4324: *(BYTE*)(tbl + 44)=(BYTE)(2); *((BYTE*)(tbl + 44)+1)=(BYTE)((WORD)(2)>>8); *((BYTE*)(tbl + 44)+2)=(BYTE)((DWORD)(2)>>16); *((BYTE*)(tbl + 44)+3)=(BYTE)((DWORD)(2)>>24);
"4324
[e = *U + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x -> -> 2 `i `uc ]
[e = *U + + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 2 `i `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 2 `i `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 44 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 2 `i `ul -> 24 `i `uc ]
[; ;ff.c: 4325: *(BYTE*)(tbl + 48)=(BYTE)(1); *((BYTE*)(tbl + 48)+1)=(BYTE)((WORD)(1)>>8);
"4325
[e = *U + _tbl * -> -> 48 `i `x -> -> # *U _tbl `i `x -> -> 1 `i `uc ]
[e = *U + + _tbl * -> -> 48 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 48 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 1 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4326: *(BYTE*)(tbl + 50)=(BYTE)(6); *((BYTE*)(tbl + 50)+1)=(BYTE)((WORD)(6)>>8);
"4326
[e = *U + _tbl * -> -> 50 `i `x -> -> # *U _tbl `i `x -> -> 6 `i `uc ]
[e = *U + + _tbl * -> -> 50 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 50 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 6 `i `us `ui -> 8 `i `uc ]
[; ;ff.c: 4327: tbl[64] = 0x80;
"4327
[e = *U + _tbl * -> -> 64 `i `x -> -> # *U _tbl `i `x -> -> 128 `i `uc ]
[; ;ff.c: 4328: tbl[66] = 0x29;
"4328
[e = *U + _tbl * -> -> 66 `i `x -> -> # *U _tbl `i `x -> -> 41 `i `uc ]
[; ;ff.c: 4329: mem_cpy(tbl + 71, "NO NAME    " "FAT32   ", 19);
"4329
[e ( _mem_cpy (3 , , -> + _tbl * -> -> 71 `i `x -> -> # *U _tbl `i `x `*v -> :s 12C `*Cv -> -> 19 `i `ui ]
"4330
}
[; ;ff.c: 4330: } else {
[e $U 718  ]
[e :U 717 ]
{
[; ;ff.c: 4331: *(BYTE*)(tbl + 39)=(BYTE)(n); *((BYTE*)(tbl + 39)+1)=(BYTE)((WORD)(n)>>8); *((BYTE*)(tbl + 39)+2)=(BYTE)((DWORD)(n)>>16); *((BYTE*)(tbl + 39)+3)=(BYTE)((DWORD)(n)>>24);
"4331
[e = *U + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x -> _n `uc ]
[e = *U + + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 39 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 24 `i `uc ]
[; ;ff.c: 4332: *(BYTE*)(tbl + 22)=(BYTE)(n_fat); *((BYTE*)(tbl + 22)+1)=(BYTE)((WORD)(n_fat)>>8);
"4332
[e = *U + _tbl * -> -> 22 `i `x -> -> # *U _tbl `i `x -> _n_fat `uc ]
[e = *U + + _tbl * -> -> 22 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 22 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n_fat `us `ui -> 8 `i `uc ]
[; ;ff.c: 4333: tbl[36] = 0x80;
"4333
[e = *U + _tbl * -> -> 36 `i `x -> -> # *U _tbl `i `x -> -> 128 `i `uc ]
[; ;ff.c: 4334: tbl[38] = 0x29;
"4334
[e = *U + _tbl * -> -> 38 `i `x -> -> # *U _tbl `i `x -> -> 41 `i `uc ]
[; ;ff.c: 4335: mem_cpy(tbl + 43, "NO NAME    " "FAT     ", 19);
"4335
[e ( _mem_cpy (3 , , -> + _tbl * -> -> 43 `i `x -> -> # *U _tbl `i `x `*v -> :s 13C `*Cv -> -> 19 `i `ui ]
"4336
}
[e :U 718 ]
[; ;ff.c: 4336: }
[; ;ff.c: 4337: *(BYTE*)(tbl + 510)=(BYTE)(0xAA55); *((BYTE*)(tbl + 510)+1)=(BYTE)((WORD)(0xAA55)>>8);
"4337
[e = *U + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x -> -> 43605 `ui `uc ]
[e = *U + + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 43605 `ui `us `ui -> 8 `i `uc ]
[; ;ff.c: 4338: if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)
"4338
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc _b_vol -> -> 1 `i `ui `i -> . `E198 0 `i 719  ]
[; ;ff.c: 4339: return FR_DISK_ERR;
"4339
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 719 ]
[; ;ff.c: 4340: if (fmt == 3)
"4340
[e $ ! == -> _fmt `i -> 3 `i 720  ]
[; ;ff.c: 4341: disk_write(pdrv, tbl, b_vol + 6, 1);
"4341
[e ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc + _b_vol -> -> -> 6 `i `l `ul -> -> 1 `i `ui ]
[e :U 720 ]
[; ;ff.c: 4344: wsect = b_fat;
"4344
[e = _wsect _b_fat ]
[; ;ff.c: 4345: for (i = 0; i < 1; i++) {
"4345
{
[e = _i -> -> 0 `i `ui ]
[e $ < _i -> -> 1 `i `ui 721  ]
[e $U 722  ]
[e :U 721 ]
{
[; ;ff.c: 4346: mem_set(tbl, 0, ((UINT)512));
"4346
[e ( _mem_set (3 , , -> _tbl `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 4347: n = md;
"4347
[e = _n -> _md `ul ]
[; ;ff.c: 4348: if (fmt != 3) {
"4348
[e $ ! != -> _fmt `i -> 3 `i 724  ]
{
[; ;ff.c: 4349: n |= (fmt == 1) ? 0x00FFFF00 : 0xFFFFFF00;
"4349
[e =| _n ? == -> _fmt `i -> 1 `i : -> -> 16776960 `l `ul -> -256 `ul ]
[; ;ff.c: 4350: *(BYTE*)(tbl + 0)=(BYTE)(n); *((BYTE*)(tbl + 0)+1)=(BYTE)((WORD)(n)>>8); *((BYTE*)(tbl + 0)+2)=(BYTE)((DWORD)(n)>>16); *((BYTE*)(tbl + 0)+3)=(BYTE)((DWORD)(n)>>24);
"4350
[e = *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x -> _n `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 24 `i `uc ]
"4351
}
[; ;ff.c: 4351: } else {
[e $U 725  ]
[e :U 724 ]
{
[; ;ff.c: 4352: n |= 0xFFFFFF00;
"4352
[e =| _n -> -256 `ul ]
[; ;ff.c: 4353: *(BYTE*)(tbl + 0)=(BYTE)(n); *((BYTE*)(tbl + 0)+1)=(BYTE)((WORD)(n)>>8); *((BYTE*)(tbl + 0)+2)=(BYTE)((DWORD)(n)>>16); *((BYTE*)(tbl + 0)+3)=(BYTE)((DWORD)(n)>>24);
"4353
[e = *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x -> _n `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> _n `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> _n -> 24 `i `uc ]
[; ;ff.c: 4354: *(BYTE*)(tbl + 4)=(BYTE)(0xFFFFFFFF); *((BYTE*)(tbl + 4)+1)=(BYTE)((WORD)(0xFFFFFFFF)>>8); *((BYTE*)(tbl + 4)+2)=(BYTE)((DWORD)(0xFFFFFFFF)>>16); *((BYTE*)(tbl + 4)+3)=(BYTE)((DWORD)(0xFFFFFFFF)>>24);
"4354
[e = *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x -> -> -1 `ul `uc ]
[e = *U + + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> -1 `ul `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -1 `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 4 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -1 `ul -> 24 `i `uc ]
[; ;ff.c: 4355: *(BYTE*)(tbl + 8)=(BYTE)(0x0FFFFFFF); *((BYTE*)(tbl + 8)+1)=(BYTE)((WORD)(0x0FFFFFFF)>>8); *((BYTE*)(tbl + 8)+2)=(BYTE)((DWORD)(0x0FFFFFFF)>>16); *((BYTE*)(tbl + 8)+3)=(BYTE)((DWORD)(0x0FFFFFFF)>>24);
"4355
[e = *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x -> -> 268435455 `l `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 268435455 `l `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 268435455 `l `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 8 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 268435455 `l `ul -> 24 `i `uc ]
"4356
}
[e :U 725 ]
[; ;ff.c: 4356: }
[; ;ff.c: 4357: if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
"4357
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc ++ _wsect -> -> -> 1 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 726  ]
[; ;ff.c: 4358: return FR_DISK_ERR;
"4358
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 726 ]
[; ;ff.c: 4359: mem_set(tbl, 0, ((UINT)512));
"4359
[e ( _mem_set (3 , , -> _tbl `*v -> 0 `i -> -> 512 `i `ui ]
[; ;ff.c: 4360: for (n = 1; n < n_fat; n++) {
"4360
{
[e = _n -> -> -> 1 `i `l `ul ]
[e $U 730  ]
[e :U 727 ]
{
[; ;ff.c: 4361: if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
"4361
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc ++ _wsect -> -> -> 1 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 731  ]
[; ;ff.c: 4362: return FR_DISK_ERR;
"4362
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 731 ]
"4363
}
"4360
[e ++ _n -> -> -> 1 `i `l `ul ]
[e :U 730 ]
[e $ < _n _n_fat 727  ]
[e :U 728 ]
"4363
}
"4364
}
"4345
[e ++ _i -> -> 1 `i `ui ]
[e $ < _i -> -> 1 `i `ui 721  ]
[e :U 722 ]
"4364
}
[; ;ff.c: 4363: }
[; ;ff.c: 4364: }
[; ;ff.c: 4367: i = (fmt == 3) ? au : (UINT)n_dir;
"4367
[e = _i ? == -> _fmt `i -> 3 `i : _au -> _n_dir `ui ]
[; ;ff.c: 4368: do {
"4368
[e :U 734 ]
{
[; ;ff.c: 4369: if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
"4369
[e $ ! != -> ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc ++ _wsect -> -> -> 1 `i `l `ul -> -> 1 `i `ui `i -> . `E198 0 `i 735  ]
[; ;ff.c: 4370: return FR_DISK_ERR;
"4370
[e ) -> . `E67 1 `E67 ]
[e $UE 675  ]
[e :U 735 ]
"4371
}
[; ;ff.c: 4371: } while (--i);
[e $ != =- _i -> -> 1 `i `ui -> -> 0 `i `ui 734  ]
[e :U 733 ]
[; ;ff.c: 4374: {
"4374
{
[; ;ff.c: 4375: eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == 3) ? 1 : 0)) * au - 1;
"4375
[e = *U + &U _eb * -> -> -> 0 `i `ui `ux -> -> # *U &U _eb `ui `ux _wsect ]
[e = *U + &U _eb * -> -> -> 1 `i `ui `ux -> -> # *U &U _eb `ui `ux - + _wsect * - _n_clst -> -> ? == -> _fmt `i -> 3 `i : -> 1 `i -> 0 `i `l `ul -> _au `ul -> -> -> 1 `i `l `ul ]
[; ;ff.c: 4376: disk_ioctl(pdrv, 4, eb);
"4376
[e ( _disk_ioctl (3 , , _pdrv -> -> 4 `i `uc -> &U _eb `*v ]
"4377
}
[; ;ff.c: 4377: }
[; ;ff.c: 4381: if (fmt == 3) {
"4381
[e $ ! == -> _fmt `i -> 3 `i 736  ]
{
[; ;ff.c: 4382: *(BYTE*)(tbl + 0)=(BYTE)(0x41615252); *((BYTE*)(tbl + 0)+1)=(BYTE)((WORD)(0x41615252)>>8); *((BYTE*)(tbl + 0)+2)=(BYTE)((DWORD)(0x41615252)>>16); *((BYTE*)(tbl + 0)+3)=(BYTE)((DWORD)(0x41615252)>>24);
"4382
[e = *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x -> -> 1096897106 `l `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 1096897106 `l `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 1096897106 `l `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 0 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 1096897106 `l `ul -> 24 `i `uc ]
[; ;ff.c: 4383: *(BYTE*)(tbl + 484)=(BYTE)(0x61417272); *((BYTE*)(tbl + 484)+1)=(BYTE)((WORD)(0x61417272)>>8); *((BYTE*)(tbl + 484)+2)=(BYTE)((DWORD)(0x61417272)>>16); *((BYTE*)(tbl + 484)+3)=(BYTE)((DWORD)(0x61417272)>>24);
"4383
[e = *U + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x -> -> 1631679090 `l `uc ]
[e = *U + + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 1631679090 `l `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 1631679090 `l `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 484 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 1631679090 `l `ul -> 24 `i `uc ]
[; ;ff.c: 4384: *(BYTE*)(tbl + 488)=(BYTE)(n_clst - 1); *((BYTE*)(tbl + 488)+1)=(BYTE)((WORD)(n_clst - 1)>>8); *((BYTE*)(tbl + 488)+2)=(BYTE)((DWORD)(n_clst - 1)>>16); *((BYTE*)(tbl + 488)+3)=(BYTE)((DWORD)(n_clst - 1)>>24);
"4384
[e = *U + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x -> - _n_clst -> -> -> 1 `i `l `ul `uc ]
[e = *U + + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> - _n_clst -> -> -> 1 `i `l `ul `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x `i `x -> >> - _n_clst -> -> -> 1 `i `l `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 488 `i `x -> -> # *U _tbl `i `x `i `x -> >> - _n_clst -> -> -> 1 `i `l `ul -> 24 `i `uc ]
[; ;ff.c: 4385: *(BYTE*)(tbl + 492)=(BYTE)(2); *((BYTE*)(tbl + 492)+1)=(BYTE)((WORD)(2)>>8); *((BYTE*)(tbl + 492)+2)=(BYTE)((DWORD)(2)>>16); *((BYTE*)(tbl + 492)+3)=(BYTE)((DWORD)(2)>>24);
"4385
[e = *U + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x -> -> 2 `i `uc ]
[e = *U + + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 2 `i `us `ui -> 8 `i `uc ]
[e = *U + + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x * -> -> 2 `i `x -> -> # *U + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 2 `i `ul -> 16 `i `uc ]
[e = *U + + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x * -> -> 3 `i `x -> -> # *U + _tbl * -> -> 492 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> 2 `i `ul -> 24 `i `uc ]
[; ;ff.c: 4386: *(BYTE*)(tbl + 510)=(BYTE)(0xAA55); *((BYTE*)(tbl + 510)+1)=(BYTE)((WORD)(0xAA55)>>8);
"4386
[e = *U + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x -> -> 43605 `ui `uc ]
[e = *U + + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x * -> -> 1 `i `x -> -> # *U + _tbl * -> -> 510 `i `x -> -> # *U _tbl `i `x `i `x -> >> -> -> -> 43605 `ui `us `ui -> 8 `i `uc ]
[; ;ff.c: 4387: disk_write(pdrv, tbl, b_vol + 1, 1);
"4387
[e ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc + _b_vol -> -> -> 1 `i `l `ul -> -> 1 `i `ui ]
[; ;ff.c: 4388: disk_write(pdrv, tbl, b_vol + 7, 1);
"4388
[e ( _disk_write (4 , , , _pdrv -> _tbl `*Cuc + _b_vol -> -> -> 7 `i `l `ul -> -> 1 `i `ui ]
"4389
}
[e :U 736 ]
[; ;ff.c: 4389: }
[; ;ff.c: 4391: return (disk_ioctl(pdrv, 0, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
"4391
[e ) -> ? == -> ( _disk_ioctl (3 , , _pdrv -> -> 0 `i `uc -> -> 0 `i `*v `i -> . `E198 0 `i : -> . `E67 0 `i -> . `E67 1 `i `E67 ]
[e $UE 675  ]
[; ;ff.c: 4392: }
"4392
[e :UE 675 ]
}
"4474
[v _f_gets `(*uc ~T0 @X0 1 ef3`*uc`i`*S2 ]
"4479
{
[; ;ff.c: 4474: TCHAR* f_gets (
[; ;ff.c: 4475: TCHAR* buff,
[; ;ff.c: 4476: int len,
[; ;ff.c: 4477: FIL* fp
[; ;ff.c: 4478: )
[; ;ff.c: 4479: {
[e :U _f_gets ]
"4475
[v _buff `*uc ~T0 @X0 1 r1 ]
"4476
[v _len `i ~T0 @X0 1 r2 ]
"4477
[v _fp `*S2 ~T0 @X0 1 r3 ]
"4479
[f ]
"4480
[v _n `i ~T0 @X0 1 a ]
[; ;ff.c: 4480: int n = 0;
[e = _n -> 0 `i ]
"4481
[v _c `uc ~T0 @X0 1 a ]
[v _p `*uc ~T0 @X0 1 a ]
[; ;ff.c: 4481: TCHAR c, *p = buff;
[e = _p _buff ]
"4482
[v _s `uc ~T0 @X0 -> 2 `i a ]
"4483
[v _rc `ui ~T0 @X0 1 a ]
[; ;ff.c: 4482: BYTE s[2];
[; ;ff.c: 4483: UINT rc;
[; ;ff.c: 4486: while (n < len - 1) {
"4486
[e $U 738  ]
[e :U 739 ]
{
[; ;ff.c: 4531: f_read(fp, s, 1, &rc);
"4531
[e ( _f_read (4 , , , _fp -> &U _s `*v -> -> 1 `i `ui &U _rc ]
[; ;ff.c: 4532: if (rc != 1) break;
"4532
[e $ ! != _rc -> -> 1 `i `ui 741  ]
[e $U 740  ]
[e :U 741 ]
[; ;ff.c: 4533: c = s[0];
"4533
[e = _c *U + &U _s * -> -> -> 0 `i `ui `ux -> -> # *U &U _s `ui `ux ]
[; ;ff.c: 4535: if (2 == 2 && c == '\r') continue;
"4535
[e $ ! && == -> 2 `i -> 2 `i == -> _c `ui -> 13 `ui 742  ]
[e $U 738  ]
[e :U 742 ]
[; ;ff.c: 4536: *p++ = c;
"4536
[e = *U ++ _p * -> -> 1 `i `x -> -> # *U _p `i `x _c ]
[; ;ff.c: 4537: n++;
"4537
[e ++ _n -> 1 `i ]
[; ;ff.c: 4538: if (c == '\n') break;
"4538
[e $ ! == -> _c `ui -> 10 `ui 743  ]
[e $U 740  ]
[e :U 743 ]
"4539
}
[e :U 738 ]
"4486
[e $ < _n - _len -> 1 `i 739  ]
[e :U 740 ]
[; ;ff.c: 4539: }
[; ;ff.c: 4540: *p = 0;
"4540
[e = *U _p -> -> 0 `i `uc ]
[; ;ff.c: 4541: return n ? buff : 0;
"4541
[e ) ? != _n -> 0 `i : _buff -> -> 0 `i `*uc ]
[e $UE 737  ]
[; ;ff.c: 4542: }
"4542
[e :UE 737 ]
}
[; ;stdarg.h: 7: typedef void * va_list[1];
[; ;stdarg.h: 10: extern void * __va_start(void);
[; ;stdarg.h: 13: extern void * __va_arg(void *, ...);
[; ;ff.c: 4553: typedef struct {
[; ;ff.c: 4554: FIL* fp;
[; ;ff.c: 4555: int idx, nchr;
[; ;ff.c: 4556: BYTE buf[64];
[; ;ff.c: 4557: } putbuff;
"4561
[v _putc_bfd `(v ~T0 @X0 1 sf2`*S744`uc ]
"4565
{
[; ;ff.c: 4560: static
[; ;ff.c: 4561: void putc_bfd (
[; ;ff.c: 4562: putbuff* pb,
[; ;ff.c: 4563: TCHAR c
[; ;ff.c: 4564: )
[; ;ff.c: 4565: {
[e :U _putc_bfd ]
"4562
[v _pb `*S744 ~T0 @X0 1 r1 ]
"4563
[v _c `uc ~T0 @X0 1 r2 ]
"4565
[f ]
"4566
[v _bw `ui ~T0 @X0 1 a ]
"4567
[v _i `i ~T0 @X0 1 a ]
[; ;ff.c: 4566: UINT bw;
[; ;ff.c: 4567: int i;
[; ;ff.c: 4570: if (2 == 2 && c == '\n')
"4570
[e $ ! && == -> 2 `i -> 2 `i == -> _c `ui -> 10 `ui 746  ]
[; ;ff.c: 4571: putc_bfd(pb, '\r');
"4571
[e ( _putc_bfd (2 , _pb -> -> 13 `ui `uc ]
[e :U 746 ]
[; ;ff.c: 4573: i = pb->idx;
"4573
[e = _i . *U _pb 1 ]
[; ;ff.c: 4574: if (i < 0) return;
"4574
[e $ ! < _i -> 0 `i 747  ]
[e $UE 745  ]
[e :U 747 ]
[; ;ff.c: 4603: pb->buf[i++] = (BYTE)c;
"4603
[e = *U + &U . *U _pb 3 * -> -> ++ _i -> 1 `i `ui `ux -> -> # *U &U . *U _pb 3 `ui `ux _c ]
[; ;ff.c: 4606: if (i >= (int)(sizeof pb->buf) - 3) {
"4606
[e $ ! >= _i - -> * -> # *U &U . *U _pb 3 `ui -> -> 64 `i `ui `i -> 3 `i 748  ]
{
[; ;ff.c: 4607: f_write(pb->fp, pb->buf, (UINT)i, &bw);
"4607
[e ( _f_write (4 , , , . *U _pb 0 -> &U . *U _pb 3 `*Cv -> _i `ui &U _bw ]
[; ;ff.c: 4608: i = (bw == (UINT)i) ? 0 : -1;
"4608
[e = _i ? == _bw -> _i `ui : -> 0 `i -U -> 1 `i ]
"4609
}
[e :U 748 ]
[; ;ff.c: 4609: }
[; ;ff.c: 4610: pb->idx = i;
"4610
[e = . *U _pb 1 _i ]
[; ;ff.c: 4611: pb->nchr++;
"4611
[e ++ . *U _pb 2 -> 1 `i ]
[; ;ff.c: 4612: }
"4612
[e :UE 745 ]
}
"4616
[v _f_putc `(i ~T0 @X0 1 ef2`uc`*S2 ]
"4620
{
[; ;ff.c: 4616: int f_putc (
[; ;ff.c: 4617: TCHAR c,
[; ;ff.c: 4618: FIL* fp
[; ;ff.c: 4619: )
[; ;ff.c: 4620: {
[e :U _f_putc ]
"4617
[v _c `uc ~T0 @X0 1 r1 ]
"4618
[v _fp `*S2 ~T0 @X0 1 r2 ]
"4620
[f ]
"4621
[v _pb `S744 ~T0 @X0 1 a ]
"4622
[v _nw `ui ~T0 @X0 1 a ]
[; ;ff.c: 4621: putbuff pb;
[; ;ff.c: 4622: UINT nw;
[; ;ff.c: 4625: pb.fp = fp;
"4625
[e = . _pb 0 _fp ]
[; ;ff.c: 4626: pb.nchr = pb.idx = 0;
"4626
[e = . _pb 2 = . _pb 1 -> 0 `i ]
[; ;ff.c: 4628: putc_bfd(&pb, c);
"4628
[e ( _putc_bfd (2 , &U _pb _c ]
[; ;ff.c: 4630: if ( pb.idx >= 0
[; ;ff.c: 4631: && f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
[; ;ff.c: 4632: && (UINT)pb.idx == nw) return pb.nchr;
"4632
[e $ ! && && >= . _pb 1 -> 0 `i == -> ( _f_write (4 , , , . _pb 0 -> &U . _pb 3 `*Cv -> . _pb 1 `ui &U _nw `i -> . `E67 0 `i == -> . _pb 1 `ui _nw 750  ]
[e ) . _pb 2 ]
[e $UE 749  ]
[e :U 750 ]
[; ;ff.c: 4633: return (-1);
"4633
[e ) -U -> 1 `i ]
[e $UE 749  ]
[; ;ff.c: 4634: }
"4634
[e :UE 749 ]
}
"4643
[v _f_puts `(i ~T0 @X0 1 ef2`*Cuc`*S2 ]
"4647
{
[; ;ff.c: 4643: int f_puts (
[; ;ff.c: 4644: const TCHAR* str,
[; ;ff.c: 4645: FIL* fp
[; ;ff.c: 4646: )
[; ;ff.c: 4647: {
[e :U _f_puts ]
"4644
[v _str `*Cuc ~T0 @X0 1 r1 ]
"4645
[v _fp `*S2 ~T0 @X0 1 r2 ]
"4647
[f ]
"4648
[v _pb `S744 ~T0 @X0 1 a ]
"4649
[v _nw `ui ~T0 @X0 1 a ]
[; ;ff.c: 4648: putbuff pb;
[; ;ff.c: 4649: UINT nw;
[; ;ff.c: 4652: pb.fp = fp;
"4652
[e = . _pb 0 _fp ]
[; ;ff.c: 4653: pb.nchr = pb.idx = 0;
"4653
[e = . _pb 2 = . _pb 1 -> 0 `i ]
[; ;ff.c: 4655: while (*str)
"4655
[e $U 752  ]
[e :U 753 ]
[; ;ff.c: 4656: putc_bfd(&pb, *str++);
"4656
[e ( _putc_bfd (2 , &U _pb *U ++ _str * -> -> 1 `i `x -> -> # *U _str `i `x ]
[e :U 752 ]
"4655
[e $ != -> *U _str `i -> -> -> 0 `i `Cuc `i 753  ]
[e :U 754 ]
[; ;ff.c: 4658: if ( pb.idx >= 0
[; ;ff.c: 4659: && f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
[; ;ff.c: 4660: && (UINT)pb.idx == nw) return pb.nchr;
"4660
[e $ ! && && >= . _pb 1 -> 0 `i == -> ( _f_write (4 , , , . _pb 0 -> &U . _pb 3 `*Cv -> . _pb 1 `ui &U _nw `i -> . `E67 0 `i == -> . _pb 1 `ui _nw 755  ]
[e ) . _pb 2 ]
[e $UE 751  ]
[e :U 755 ]
[; ;ff.c: 4661: return (-1);
"4661
[e ) -U -> 1 `i ]
[e $UE 751  ]
[; ;ff.c: 4662: }
"4662
[e :UE 751 ]
}
"4671
[v _f_printf `(i ~T0 @X0 1 e1v`*S2`*Cuc ]
"4676
{
[; ;ff.c: 4671: int f_printf (
[; ;ff.c: 4672: FIL* fp,
[; ;ff.c: 4673: const TCHAR* fmt,
[; ;ff.c: 4674: ...
[; ;ff.c: 4675: )
[; ;ff.c: 4676: {
[e :U _f_printf ]
"4672
[v _fp `*S2 ~T0 @X0 1 r1 ]
"4673
[v _fmt `*Cuc ~T0 @X0 1 r0 ]
"4676
[f ]
"4677
[v _arp `*v ~T0 @X0 -> -> 1 `i `ux a ]
"4678
[v _f `uc ~T0 @X0 1 a ]
[v _r `uc ~T0 @X0 1 a ]
"4679
[v _nw `ui ~T0 @X0 1 a ]
[v _i `ui ~T0 @X0 1 a ]
[v _j `ui ~T0 @X0 1 a ]
[v _w `ui ~T0 @X0 1 a ]
"4680
[v _v `ul ~T0 @X0 1 a ]
"4681
[v _c `uc ~T0 @X0 1 a ]
[v _d `uc ~T0 @X0 1 a ]
[v _s `uc ~T0 @X0 -> 16 `i a ]
[v _p `*uc ~T0 @X0 1 a ]
"4682
[v _pb `S744 ~T0 @X0 1 a ]
[; ;ff.c: 4677: va_list arp;
[; ;ff.c: 4678: BYTE f, r;
[; ;ff.c: 4679: UINT nw, i, j, w;
[; ;ff.c: 4680: DWORD v;
[; ;ff.c: 4681: TCHAR c, d, s[16], *p;
[; ;ff.c: 4682: putbuff pb;
[; ;ff.c: 4685: pb.fp = fp;
"4685
[e = . _pb 0 _fp ]
[; ;ff.c: 4686: pb.nchr = pb.idx = 0;
"4686
[e = . _pb 2 = . _pb 1 -> 0 `i ]
[; ;ff.c: 4688: *arp = __va_start();
"4688
[e = *U &U _arp ( ___va_start ..  ]
[; ;ff.c: 4690: for (;;) {
"4690
{
[e :U 757 ]
{
[; ;ff.c: 4691: c = *fmt++;
"4691
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
[; ;ff.c: 4692: if (c == 0) break;
"4692
[e $ ! == -> _c `i -> 0 `i 760  ]
[e $U 758  ]
[e :U 760 ]
[; ;ff.c: 4693: if (c != '%') {
"4693
[e $ ! != -> _c `ui -> 37 `ui 761  ]
{
[; ;ff.c: 4694: putc_bfd(&pb, c);
"4694
[e ( _putc_bfd (2 , &U _pb _c ]
[; ;ff.c: 4695: continue;
"4695
[e $U 759  ]
"4696
}
[e :U 761 ]
[; ;ff.c: 4696: }
[; ;ff.c: 4697: w = f = 0;
"4697
[e = _w -> = _f -> -> 0 `i `uc `ui ]
[; ;ff.c: 4698: c = *fmt++;
"4698
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
[; ;ff.c: 4699: if (c == '0') {
"4699
[e $ ! == -> _c `ui -> 48 `ui 762  ]
{
[; ;ff.c: 4700: f = 1; c = *fmt++;
"4700
[e = _f -> -> 1 `i `uc ]
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
"4701
}
[; ;ff.c: 4701: } else {
[e $U 763  ]
[e :U 762 ]
{
[; ;ff.c: 4702: if (c == '-') {
"4702
[e $ ! == -> _c `ui -> 45 `ui 764  ]
{
[; ;ff.c: 4703: f = 2; c = *fmt++;
"4703
[e = _f -> -> 2 `i `uc ]
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
"4704
}
[e :U 764 ]
"4705
}
[e :U 763 ]
[; ;ff.c: 4704: }
[; ;ff.c: 4705: }
[; ;ff.c: 4706: while ((((c)>='0')&&((c)<='9'))) {
"4706
[e $U 765  ]
[e :U 766 ]
{
[; ;ff.c: 4707: w = w * 10 + c - '0';
"4707
[e = _w - + * _w -> -> 10 `i `ui -> _c `ui -> 48 `ui ]
[; ;ff.c: 4708: c = *fmt++;
"4708
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
"4709
}
[e :U 765 ]
"4706
[e $ && >= -> _c `ui -> 48 `ui <= -> _c `ui -> 57 `ui 766  ]
[e :U 767 ]
[; ;ff.c: 4709: }
[; ;ff.c: 4710: if (c == 'l' || c == 'L') {
"4710
[e $ ! || == -> _c `ui -> 108 `ui == -> _c `ui -> 76 `ui 768  ]
{
[; ;ff.c: 4711: f |= 4; c = *fmt++;
"4711
[e =| _f -> -> 4 `i `uc ]
[e = _c *U ++ _fmt * -> -> 1 `i `x -> -> # *U _fmt `i `x ]
"4712
}
[e :U 768 ]
[; ;ff.c: 4712: }
[; ;ff.c: 4713: if (!c) break;
"4713
[e $ ! ! != -> _c `i -> -> -> 0 `i `uc `i 769  ]
[e $U 758  ]
[e :U 769 ]
[; ;ff.c: 4714: d = c;
"4714
[e = _d _c ]
[; ;ff.c: 4715: if ((((d)>='a')&&((d)<='z'))) d -= 0x20;
"4715
[e $ ! && >= -> _d `ui -> 97 `ui <= -> _d `ui -> 122 `ui 770  ]
[e =- _d -> -> 32 `i `uc ]
[e :U 770 ]
[; ;ff.c: 4716: switch (d) {
"4716
[e $U 772  ]
{
[; ;ff.c: 4717: case 'S' :
"4717
[e :U 773 ]
[; ;ff.c: 4718: p = (*(TCHAR* *)__va_arg((*(TCHAR* **)arp), (TCHAR*)0));
"4718
[e = _p *U -> ( ___va_arg , (. -> *U -> &U _arp `***uc `*v -> -> 0 `i `*uc `**uc ]
[; ;ff.c: 4719: for (j = 0; p[j]; j++) ;
"4719
{
[e = _j -> -> 0 `i `ui ]
[e $U 777  ]
[e :U 774 ]
[e ++ _j -> -> 1 `i `ui ]
[e :U 777 ]
[e $ != -> *U + _p * -> _j `ux -> -> # *U _p `ui `ux `i -> -> -> 0 `i `uc `i 774  ]
[e :U 775 ]
}
[; ;ff.c: 4720: if (!(f & 2)) {
"4720
[e $ ! ! != & -> _f `i -> 2 `i -> 0 `i 778  ]
{
[; ;ff.c: 4721: while (j++ < w) putc_bfd(&pb, ' ');
"4721
[e $U 779  ]
[e :U 780 ]
[e ( _putc_bfd (2 , &U _pb -> -> 32 `ui `uc ]
[e :U 779 ]
[e $ < ++ _j -> -> 1 `i `ui _w 780  ]
[e :U 781 ]
"4722
}
[e :U 778 ]
[; ;ff.c: 4722: }
[; ;ff.c: 4723: while (*p) putc_bfd(&pb, *p++);
"4723
[e $U 782  ]
[e :U 783 ]
[e ( _putc_bfd (2 , &U _pb *U ++ _p * -> -> 1 `i `x -> -> # *U _p `i `x ]
[e :U 782 ]
[e $ != -> *U _p `i -> -> -> 0 `i `uc `i 783  ]
[e :U 784 ]
[; ;ff.c: 4724: while (j++ < w) putc_bfd(&pb, ' ');
"4724
[e $U 785  ]
[e :U 786 ]
[e ( _putc_bfd (2 , &U _pb -> -> 32 `ui `uc ]
[e :U 785 ]
[e $ < ++ _j -> -> 1 `i `ui _w 786  ]
[e :U 787 ]
[; ;ff.c: 4725: continue;
"4725
[e $U 759  ]
[; ;ff.c: 4726: case 'C' :
"4726
[e :U 788 ]
[; ;ff.c: 4727: putc_bfd(&pb, (TCHAR)(*(int *)__va_arg((*(int **)arp), (int)0))); continue;
"4727
[e ( _putc_bfd (2 , &U _pb -> *U -> ( ___va_arg , (. -> *U -> &U _arp `**i `*v -> 0 `i `*i `uc ]
[e $U 759  ]
[; ;ff.c: 4728: case 'B' :
"4728
[e :U 789 ]
[; ;ff.c: 4729: r = 2; break;
"4729
[e = _r -> -> 2 `i `uc ]
[e $U 771  ]
[; ;ff.c: 4730: case 'O' :
"4730
[e :U 790 ]
[; ;ff.c: 4731: r = 8; break;
"4731
[e = _r -> -> 8 `i `uc ]
[e $U 771  ]
[; ;ff.c: 4732: case 'D' :
"4732
[e :U 791 ]
"4733
[e :U 792 ]
[; ;ff.c: 4733: case 'U' :
[; ;ff.c: 4734: r = 10; break;
"4734
[e = _r -> -> 10 `i `uc ]
[e $U 771  ]
[; ;ff.c: 4735: case 'X' :
"4735
[e :U 793 ]
[; ;ff.c: 4736: r = 16; break;
"4736
[e = _r -> -> 16 `i `uc ]
[e $U 771  ]
[; ;ff.c: 4737: default:
"4737
[e :U 794 ]
[; ;ff.c: 4738: putc_bfd(&pb, c); continue;
"4738
[e ( _putc_bfd (2 , &U _pb _c ]
[e $U 759  ]
"4739
}
[; ;ff.c: 4739: }
[e $U 771  ]
"4716
[e :U 772 ]
[e [\ _d , $ -> -> 83 `ui `uc 773
 , $ -> -> 67 `ui `uc 788
 , $ -> -> 66 `ui `uc 789
 , $ -> -> 79 `ui `uc 790
 , $ -> -> 68 `ui `uc 791
 , $ -> -> 85 `ui `uc 792
 , $ -> -> 88 `ui `uc 793
 794 ]
"4739
[e :U 771 ]
[; ;ff.c: 4742: v = (f & 4) ? (DWORD)(*(long *)__va_arg((*(long **)arp), (long)0)) : ((d == 'D') ? (DWORD)(long)(*(int *)__va_arg((*(int **)arp), (int)0)) : (DWORD)(*(unsigned int *)__va_arg((*(unsigned int **)arp), (unsigned int)0)));
"4742
[e = _v ? != & -> _f `i -> 4 `i -> 0 `i : -> *U -> ( ___va_arg , (. -> *U -> &U _arp `**l `*v -> -> 0 `i `l `*l `ul ? == -> _d `ui -> 68 `ui : -> -> *U -> ( ___va_arg , (. -> *U -> &U _arp `**i `*v -> 0 `i `*i `l `ul -> *U -> ( ___va_arg , (. -> *U -> &U _arp `**ui `*v -> -> 0 `i `ui `*ui `ul ]
[; ;ff.c: 4743: if (d == 'D' && (v & 0x80000000)) {
"4743
[e $ ! && == -> _d `ui -> 68 `ui != & _v -> -2147483648 `ul -> -> 0 `i `ul 795  ]
{
[; ;ff.c: 4744: v = 0 - v;
"4744
[e = _v - -> -> -> 0 `i `l `ul _v ]
[; ;ff.c: 4745: f |= 8;
"4745
[e =| _f -> -> 8 `i `uc ]
"4746
}
[e :U 795 ]
[; ;ff.c: 4746: }
[; ;ff.c: 4747: i = 0;
"4747
[e = _i -> -> 0 `i `ui ]
[; ;ff.c: 4748: do {
"4748
[e :U 798 ]
{
[; ;ff.c: 4749: d = (TCHAR)(v % r); v /= r;
"4749
[e = _d -> % _v -> _r `ul `uc ]
[e =/ _v -> _r `ul ]
[; ;ff.c: 4750: if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
"4750
[e $ ! > -> _d `i -> 9 `i 799  ]
[e =+ _d -> ? == -> _c `ui -> 120 `ui : -> 39 `i -> 7 `i `uc ]
[e :U 799 ]
[; ;ff.c: 4751: s[i++] = d + '0';
"4751
[e = *U + &U _s * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U &U _s `ui `ux -> + -> _d `ui -> 48 `ui `uc ]
"4752
}
[; ;ff.c: 4752: } while (v && i < sizeof s / sizeof s[0]);
[e $ && != _v -> -> 0 `i `ul < _i / -> # _s `ui -> # *U + &U _s * -> -> -> 0 `i `ui `ux -> -> # *U &U _s `ui `ux `ui 798  ]
[e :U 797 ]
[; ;ff.c: 4753: if (f & 8) s[i++] = '-';
"4753
[e $ ! != & -> _f `i -> 8 `i -> 0 `i 800  ]
[e = *U + &U _s * -> ++ _i -> -> 1 `i `ui `ux -> -> # *U &U _s `ui `ux -> -> 45 `ui `uc ]
[e :U 800 ]
[; ;ff.c: 4754: j = i; d = (f & 1) ? '0' : ' ';
"4754
[e = _j _i ]
[e = _d -> ? != & -> _f `i -> 1 `i -> 0 `i : -> 48 `ui -> 32 `ui `uc ]
[; ;ff.c: 4755: while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
"4755
[e $U 801  ]
[e :U 802 ]
[e ( _putc_bfd (2 , &U _pb _d ]
[e :U 801 ]
[e $ && ! != & -> _f `i -> 2 `i -> 0 `i < ++ _j -> -> 1 `i `ui _w 802  ]
[e :U 803 ]
[; ;ff.c: 4756: do putc_bfd(&pb, s[--i]); while (i);
"4756
[e :U 806 ]
[e ( _putc_bfd (2 , &U _pb *U + &U _s * -> =- _i -> -> 1 `i `ui `ux -> -> # *U &U _s `ui `ux ]
[e $ != _i -> -> 0 `i `ui 806  ]
[e :U 805 ]
[; ;ff.c: 4757: while (j++ < w) putc_bfd(&pb, d);
"4757
[e $U 807  ]
[e :U 808 ]
[e ( _putc_bfd (2 , &U _pb _d ]
[e :U 807 ]
[e $ < ++ _j -> -> 1 `i `ui _w 808  ]
[e :U 809 ]
"4758
}
[e :U 759 ]
[; ;ff.c: 4758: }
[e $U 757  ]
[e :U 758 ]
}
[; ;ff.c: 4760: ;
[; ;ff.c: 4762: if ( pb.idx >= 0
[; ;ff.c: 4763: && f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
[; ;ff.c: 4764: && (UINT)pb.idx == nw) return pb.nchr;
"4764
[e $ ! && && >= . _pb 1 -> 0 `i == -> ( _f_write (4 , , , . _pb 0 -> &U . _pb 3 `*Cv -> . _pb 1 `ui &U _nw `i -> . `E67 0 `i == -> . _pb 1 `ui _nw 810  ]
[e ) . _pb 2 ]
[e $UE 756  ]
[e :U 810 ]
[; ;ff.c: 4765: return (-1);
"4765
[e ) -U -> 1 `i ]
[e $UE 756  ]
[; ;ff.c: 4766: }
"4766
[e :UE 756 ]
}
[a 10C 34 42 43 44 46 58 59 60 61 62 63 91 93 124 127 0 ]
[a 1C 34 42 43 44 58 59 60 61 62 63 91 93 124 127 0 ]
[a 2C 82 65 77 0 ]
[a 4C 67 70 0 ]
[a 3C 78 65 78 68 0 ]
[a 9C 85 83 66 51 0 ]
[a 6C 83 68 50 0 ]
[a 8C 85 83 66 50 0 ]
[a 5C 83 68 49 0 ]
[a 7C 85 83 66 49 0 ]
[a 11C 235 254 144 77 83 68 79 83 53 46 48 0 ]
[a 12C 78 79 32 78 65 77 69 32 32 32 32 70 65 84 51 50 32 32 32 0 ]
[a 13C 78 79 32 78 65 77 69 32 32 32 32 70 65 84 32 32 32 32 32 0 ]
